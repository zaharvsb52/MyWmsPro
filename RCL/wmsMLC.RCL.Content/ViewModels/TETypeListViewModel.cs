using System.Windows.Controls;
using wmsMLC.Business.Objects;
using wmsMLC.General.PL.Model;
using wmsMLC.General.PL.WPF;
using wmsMLC.General.PL.WPF.Components.Controls.Rcl;
using wmsMLC.General.PL.WPF.Components.ViewModels;
using wmsMLC.General.PL.WPF.Views;

namespace wmsMLC.RCL.Content.ViewModels
{
    public class TETypeListViewModel : DialogSourceViewModel<TEType>, ISelectable
    {
        private const string TeTypeFieldName = "TeTypeGrid";
        private const string MenuName = "FooterMenu";
        private const string EscapeMenuName = "MenuEscape";
        private const string ModelLayout = "<?xml version=\"1.0\" encoding=\"utf-16\"?><CustomDataLayoutControl ID=\"objectDataLayout\" Orientation=\"Vertical\"><Element ID=\"TeTypeGrid\" VerticalAlignment=\"Stretch\" Label=\"\" TeTypeGrid_RclGridControl_RclGridControl=\"&lt;XtraSerializer version=&quot;1.0&quot; application=&quot;GridControl&quot;&gt;&#xD;&#xA;  &lt;property name=&quot;#LayoutVersion&quot;&gt;1.0.0.0&lt;/property&gt;&#xD;&#xA;  &lt;property name=&quot;$GridControl&quot; iskey=&quot;true&quot; value=&quot;GridControl&quot;&gt;&#xD;&#xA;    &lt;property name=&quot;Columns&quot; iskey=&quot;true&quot; value=&quot;18&quot;&gt;&#xD;&#xA;      &lt;property name=&quot;Item1&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPECODE&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;83&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item2&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPENAME&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;447&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item3&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;2&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPETAREWEIGHT&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item4&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;3&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPELENGTH&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item5&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;4&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPEWIDTH&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item6&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;5&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPEHEIGHT&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item7&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;6&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPEMAXWEIGHT&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item8&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;7&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPELENGTHINTERNAL&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item9&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;8&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPEWIDTHINTERNAL&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item10&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;9&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPEHEIGHTINTERNAL&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item11&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;10&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPENUMBERPREFIX&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item12&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;11&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;Value&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPESELMM&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item13&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;12&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;Value&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TETYPECRITMSC&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item14&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;13&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;USERINS&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item15&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;14&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;Value&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;DATEINS&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Default&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item16&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;15&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;USERUPD&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item17&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;15&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;Value&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;DATEUPD&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Default&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;Item18&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;VisibleIndex&quot;&gt;17&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Visible&quot;&gt;false&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ColumnFilterMode&quot;&gt;DisplayText&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Name&quot;&gt;TRANSACT&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;AutoFilterCondition&quot;&gt;Contains&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;GridRow&quot;&gt;0&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;ActualWidth&quot;&gt;NaN&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;    &lt;/property&gt;&#xD;&#xA;    &lt;property name=&quot;SortInfo&quot; iskey=&quot;true&quot; value=&quot;0&quot; /&gt;&#xD;&#xA;    &lt;property name=&quot;GroupCount&quot;&gt;0&lt;/property&gt;&#xD;&#xA;    &lt;property name=&quot;GroupSummary&quot; iskey=&quot;true&quot; value=&quot;0&quot; /&gt;&#xD;&#xA;    &lt;property name=&quot;View&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;      &lt;property name=&quot;ShowGroupPanel&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;AutoWidth&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;AllowColumnFiltering&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;ColumnChooserState&quot; isnull=&quot;true&quot; iskey=&quot;true&quot;&gt;&#xD;&#xA;        &lt;property name=&quot;Size&quot;&gt;220,250&lt;/property&gt;&#xD;&#xA;        &lt;property name=&quot;Location&quot;&gt;265,80&lt;/property&gt;&#xD;&#xA;      &lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;ShowIndicator&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;ShowFilterPanelMode&quot;&gt;Never&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;ItemsSourceErrorInfoShowMode&quot;&gt;None&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;NavigationStyle&quot;&gt;Cell&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;AllowEditing&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;ShowSearchPanelCloseButton&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;SearchPanelHighlightResults&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;AllowPerPixelScrolling&quot;&gt;false&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;IsRowCellMenuEnabled&quot;&gt;true&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;AllowCascadeUpdate&quot;&gt;true&lt;/property&gt;&#xD;&#xA;      &lt;property name=&quot;ScrollAnimationMode&quot;&gt;Linear&lt;/property&gt;&#xD;&#xA;    &lt;/property&gt;&#xD;&#xA;    &lt;property name=&quot;SelectionMode&quot;&gt;None&lt;/property&gt;&#xD;&#xA;    &lt;property name=&quot;TotalSummary&quot; iskey=&quot;true&quot; value=&quot;0&quot; /&gt;&#xD;&#xA;    &lt;property name=&quot;MRUFilters&quot; iskey=&quot;true&quot; value=&quot;0&quot; /&gt;&#xD;&#xA;    &lt;property name=&quot;GroupSummarySortInfo&quot; iskey=&quot;true&quot; value=&quot;0&quot; /&gt;&#xD;&#xA;  &lt;/property&gt;&#xD;&#xA;&lt;/XtraSerializer&gt;\" /><Element ID=\"FooterMenu\" VerticalAlignment=\"Bottom\" /><AvailableItems /></CustomDataLayoutControl>";

        public TETypeListViewModel()
        {
            LayoutValue = ModelLayout;
            IsMenuVisible = false;
            var fields = Fields;
            var teTypeGrid = new ValueDataField
            {
                Name = TeTypeFieldName,
                FieldName = TeTypeFieldName,
                SourceName = TeTypeFieldName,
                Caption = "Список",
                LabelPosition = "Top",
                Order = 0,
                IsEnabled = true,
                Visible = true,
                FieldType = typeof(TEType),
                SetFocus = true,
                LookupCode = "TETYPE_NAME"
            };            
            teTypeGrid.Properties.Add(ValueDataFieldConstants.LookupType, RclLookupType.SelectGridControl.ToString());
            teTypeGrid.Properties.Add(ValueDataFieldConstants.ShowControlMenu, "True");
            teTypeGrid.Properties.Add(ValueDataFieldConstants.CloseDialogOnSelectedItemChanged, "True");
            fields.Add(teTypeGrid);

            var menuItem = new ValueDataField
            {
                Name = MenuName,
                FieldName = MenuName,
                SourceName = MenuName,
                Caption = MenuName,
                LabelPosition = "Left",
                Order = 1,
                IsEnabled = true,
                Visible = true,
                FieldType = typeof(IFooterMenu),
            };
            menuItem.Properties[ValueDataFieldConstants.FooterMenu] = new[]
            {
                new ValueDataField
                {
                    Name = EscapeMenuName,
                    FieldName = EscapeMenuName,
                    SourceName = EscapeMenuName,
                    Order = 0,
                    Caption = "Отмена",
                    IsEnabled = true,
                    Value = "Escape",
                    FieldType = typeof(Button),
                    Visible = true
                }
            };
            fields.Add(menuItem);

            UpdateSource();
        }

        public override void SetEntityFilter(string filter)
        {
            Fields[0].LookupFilterExt = filter;
        }

        #region .  ISelectable  .
        public object[] GetSelectedKeys()
        {
            return new []{ this[TeTypeFieldName] };
        }
        #endregion
    }
}
