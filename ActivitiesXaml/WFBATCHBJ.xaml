<Activity mc:Ignorable="sads sap" x:Class="{x:Null}"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:bm="clr-namespace:BLToolkit.Mapping;assembly=BLToolkit.4"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=Microsoft.VisualBasic"
 xmlns:mv1="clr-namespace:Microsoft.VisualBasic;assembly=System"
 xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:s1="clr-namespace:System;assembly=System"
 xmlns:s2="clr-namespace:System;assembly=System.ServiceModel"
 xmlns:s3="clr-namespace:System;assembly=System.Core"
 xmlns:s4="clr-namespace:System;assembly=System.ComponentModel.Composition"
 xmlns:s5="clr-namespace:System;assembly=System.Runtime"
 xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:sg="clr-namespace:System.Globalization;assembly=mscorlib"
 xmlns:sxs="clr-namespace:System.Xml.Serialization;assembly=System.Xml"
 xmlns:wada="clr-namespace:wmsMLC.Activities.Dialogs.Activities;assembly=wmsMLC.Activities.Dialogs"
 xmlns:wag="clr-namespace:wmsMLC.Activities.General;assembly=wmsMLC.Activities.General"
 xmlns:wbmp="clr-namespace:wmsMLC.Business.Managers.Processes;assembly=wmsMLC.Business.Managers"
 xmlns:wbo="clr-namespace:wmsMLC.Business.Objects;assembly=wmsMLC.Business.Objects"
 xmlns:wg="clr-namespace:wmsMLC.General;assembly=wmsMLC.General"
 xmlns:wgb="clr-namespace:wmsMLC.General.BL;assembly=wmsMLC.General.BL"
 xmlns:wgbv="clr-namespace:wmsMLC.General.BL.Validation;assembly=wmsMLC.General.BL"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="BpContext" Type="InArgument(wgb:BpContext)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>654,676</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces for internal implementation</mva:VisualBasic.Settings>
  <Flowchart DisplayName="Разбор batch-кода для Буржуа" sap:VirtualizedContainerService.HintSize="614,636">
    <Flowchart.Variables>
      <Variable x:TypeArguments="x:String" Name="BatchCode" />
      <Variable x:TypeArguments="wbo:WMSBusinessObject" Name="Target" />
      <Variable x:TypeArguments="x:Boolean" Name="OnlyParse" />
      <Variable x:TypeArguments="s:DateTime" Name="DateBatchCode" />
      <Variable x:TypeArguments="s:String[]" Name="DateBatchCodeFormat" />
      <Variable x:TypeArguments="x:Boolean" Name="IsDateFormat" />
      <Variable x:TypeArguments="s:Nullable(s:DateTime)" Name="ProductDate" />
      <Variable x:TypeArguments="s:Nullable(s:DateTime)" Name="ExpiryDate" />
      <Variable x:TypeArguments="x:String" Name="ErrorMessage" />
      <Variable x:TypeArguments="x:Int32" Name="CurrentStartYear" />
      <Variable x:TypeArguments="s:Nullable(x:Decimal)" Name="LifeTime" />
      <Variable x:TypeArguments="x:String" Name="LifeTimeMeasure" />
      <Variable x:TypeArguments="x:String" Name="ArtCode" />
      <Variable x:TypeArguments="x:Int32" Name="YearShift" />
      <Variable x:TypeArguments="x:Int32" Name="TargetStartYear" />
      <Variable x:TypeArguments="x:Int32" Name="YearStep" />
      <Variable x:TypeArguments="s:DateTime" Name="InputDate" />
      <Variable x:TypeArguments="x:String" Name="PosBatchCode" />
      <Variable x:TypeArguments="s:Nullable(x:Decimal)" Name="SKUID" />
    </Flowchart.Variables>
    <sap:WorkflowViewStateService.ViewState>
      <scg:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">False</x:Boolean>
        <av:Point x:Key="ShapeLocation">260,2.5</av:Point>
        <av:Size x:Key="ShapeSize">60,75</av:Size>
        <av:PointCollection x:Key="ConnectorLocation">290,77.5 290,107.5 326,107.5 326,226</av:PointCollection>
      </scg:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <Flowchart.StartNode>
      <x:Reference>__ReferenceID116</x:Reference>
    </Flowchart.StartNode>
    <FlowStep x:Name="__ReferenceID115">
      <sap:WorkflowViewStateService.ViewState>
        <scg:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">130,515</av:Point>
          <av:Size x:Key="ShapeSize">244,51</av:Size>
        </scg:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <TryCatch DisplayName="TryCatch Основной блок" sap:VirtualizedContainerService.HintSize="244,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
        <TryCatch.Try>
          <Flowchart DisplayName="Flowchart Основной блок" sap:VirtualizedContainerService.HintSize="752,1651">
            <sap:WorkflowViewStateService.ViewState>
              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                <av:Point x:Key="ShapeLocation">350,2.5</av:Point>
                <av:Size x:Key="ShapeSize">60,75</av:Size>
                <x:Double x:Key="Height">1615</x:Double>
                <x:Double x:Key="Width">738</x:Double>
                <av:PointCollection x:Key="ConnectorLocation">380,77.5 380,107.5 396,107.5 396,216</av:PointCollection>
              </scg:Dictionary>
            </sap:WorkflowViewStateService.ViewState>
            <Flowchart.StartNode>
              <x:Reference>__ReferenceID114</x:Reference>
            </Flowchart.StartNode>
            <FlowStep x:Name="__ReferenceID0">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">117,1374.5</av:Point>
                  <av:Size x:Key="ShapeSize">218,134</av:Size>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <InvokeMethod DisplayName="ParseResult" sap:VirtualizedContainerService.HintSize="218,134" MethodName="Set">
                <InvokeMethod.GenericTypeArguments>
                  <x:Type Type="x:String" />
                </InvokeMethod.GenericTypeArguments>
                <InvokeMethod.TargetObject>
                  <InArgument x:TypeArguments="wgb:BpContext">[BpContext]</InArgument>
                </InvokeMethod.TargetObject>
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <InArgument x:TypeArguments="x:String">ParseResult</InArgument>
                <InArgument x:TypeArguments="x:String">[iif(string.IsNullOrEmpty(errorMessage), string.Format("Batch-код = '{0}'{3}Дата производства = '{1}'{3}Срок годности = '{2}'", PosBatchCode, ProductDate, ExpiryDate, System.Environment.NewLine), errorMessage).toString]</InArgument>
              </InvokeMethod>
            </FlowStep>
            <FlowDecision x:Name="__ReferenceID19" Condition="[OnlyParse]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID0}">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  <av:Point x:Key="ShapeLocation">361,1228</av:Point>
                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                  <av:PointCollection x:Key="FalseConnector">431,1271.5 590,1271.5 590,1364.5</av:PointCollection>
                  <av:PointCollection x:Key="TrueConnector">361,1271.5 226,1271.5 226,1374.5</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <FlowDecision.False>
                <FlowStep x:Name="__ReferenceID113">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">468,1364.5</av:Point>
                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Flowchart DisplayName="Заполнение Target" sap:VirtualizedContainerService.HintSize="745,1248">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                        <av:Point x:Key="ShapeLocation">310,12.5</av:Point>
                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                        <av:PointCollection x:Key="ConnectorLocation">340,87.5 340,117.5 401,117.5 401,244</av:PointCollection>
                        <x:Double x:Key="Width">731</x:Double>
                        <x:Double x:Key="Height">1212.5</x:Double>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <Flowchart.StartNode>
                      <x:Reference>__ReferenceID16</x:Reference>
                    </Flowchart.StartNode>
                    <FlowStep x:Name="__ReferenceID6">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">324,1190.5</av:Point>
                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Throw Exception="[new DeveloperException(&quot;Для типа '{0}' не определены свойства, заполняемые при распозновании Batch-кода.&quot;, Target.GetType)]" sap:VirtualizedContainerService.HintSize="200,22">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Throw>
                    </FlowStep>
                    <FlowStep x:Name="__ReferenceID5">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">256,1002.5</av:Point>
                          <av:Size x:Key="ShapeSize">244,51</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Flowchart DisplayName="Свойства Product" sap:VirtualizedContainerService.HintSize="614,833">
                        <Flowchart.Variables>
                          <Variable x:TypeArguments="wbo:Product" Name="TargetProduct" />
                        </Flowchart.Variables>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                            <av:Size x:Key="ShapeSize">60,75</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,170</av:PointCollection>
                            <x:Double x:Key="Height">797</x:Double>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart.StartNode>
                          <x:Reference>__ReferenceID4</x:Reference>
                        </Flowchart.StartNode>
                        <FlowStep x:Name="__ReferenceID4">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">179,170</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,230 300,331.5</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="wbo:Product">[TargetProduct]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="wbo:Product">[CType(Target, Product)]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID1">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">200,331.5</av:Point>
                                  <av:Size x:Key="ShapeSize">200,57</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,388.5 300,418.5 301.5,418.5 301.5,480.5</av:PointCollection>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:Product" DisplayName="Заполняем поля объекта" sap:VirtualizedContainerService.HintSize="200,57" Object="[TargetProduct]">
                                <wag:MultipleDynamicAssignActivity.Properties>
                                  <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[PRODUCTEXPIRYDATE]">[ExpiryDate]</InArgument>
                                  <InArgument x:TypeArguments="x:String" x:Key="[PRODUCTBATCHCODE]">[PosBatchCode]</InArgument>
                                  <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[PRODUCTDATE]">[ProductDate]</InArgument>
                                </wag:MultipleDynamicAssignActivity.Properties>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </wag:MultipleDynamicAssignActivity>
                              <FlowStep.Next>
                                <FlowStep x:Name="__ReferenceID3">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">95.5,480.5</av:Point>
                                      <av:Size x:Key="ShapeSize">412,74</av:Size>
                                      <av:PointCollection x:Key="ConnectorLocation">301.5,554.5 301.5,584.5 300,584.5 300,663</av:PointCollection>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <wada:CommentActivity Comment="Передаем список свойств измененных при разшифровке batch-кода.&#xA;Используется в БП Корректировка товара" DisplayName="Комментарий" sap:VirtualizedContainerService.HintSize="412,74">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </wada:CommentActivity>
                                  <FlowStep.Next>
                                    <FlowStep x:Name="__ReferenceID2">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">191,663</av:Point>
                                          <av:Size x:Key="ShapeSize">218,134</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">347,595 347,651</av:PointCollection>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <InvokeMethod DisplayName="PropertyNames" sap:VirtualizedContainerService.HintSize="218,134" MethodName="Set">
                                        <InvokeMethod.GenericTypeArguments>
                                          <x:Type Type="s:String[]" />
                                        </InvokeMethod.GenericTypeArguments>
                                        <InvokeMethod.TargetObject>
                                          <InArgument x:TypeArguments="wgb:BpContext">[BpContext]</InArgument>
                                        </InvokeMethod.TargetObject>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <InArgument x:TypeArguments="x:String">PropertyNames</InArgument>
                                        <InArgument x:TypeArguments="s:String[]">[new string(){"PRODUCTDATE", "PRODUCTEXPIRYDATE"}]</InArgument>
                                      </InvokeMethod>
                                    </FlowStep>
                                  </FlowStep.Next>
                                </FlowStep>
                              </FlowStep.Next>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                        <x:Reference>__ReferenceID1</x:Reference>
                        <x:Reference>__ReferenceID2</x:Reference>
                        <x:Reference>__ReferenceID3</x:Reference>
                      </Flowchart>
                    </FlowStep>
                    <FlowDecision x:Name="__ReferenceID10" Condition="[TypeOf Target is Product]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID5}" False="{x:Reference __ReferenceID6}">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">493,834.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="TrueConnector">493,878 378,878 378,1002.5</av:PointCollection>
                          <av:PointCollection x:Key="FalseConnector">563,878 574,878 574,1160.5 424,1160.5 424,1190.5</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                    </FlowDecision>
                    <FlowStep x:Name="__ReferenceID9">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">179,692</av:Point>
                          <av:Size x:Key="ShapeSize">244,51</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Flowchart DisplayName="Свойства IWBPos" sap:VirtualizedContainerService.HintSize="244,51">
                        <Flowchart.Variables>
                          <Variable x:TypeArguments="wbo:IWBPos" Name="TargetIWBPos" />
                        </Flowchart.Variables>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                            <av:Size x:Key="ShapeSize">60,75</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,170</av:PointCollection>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart.StartNode>
                          <x:Reference>__ReferenceID8</x:Reference>
                        </Flowchart.StartNode>
                        <FlowStep x:Name="__ReferenceID8">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">179,170</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,230 300,351.5</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="wbo:IWBPos">[TargetIWBPos]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="wbo:IWBPos">[CType(Target, IWBPos)]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID7">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">200,351.5</av:Point>
                                  <av:Size x:Key="ShapeSize">200,57</av:Size>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:IWBPos" DisplayName="Заполняем поля объекта" sap:VirtualizedContainerService.HintSize="200,57" Object="[TargetIWBPos]">
                                <wag:MultipleDynamicAssignActivity.Properties>
                                  <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[IWBPOSPRODUCTDATE]">[ProductDate]</InArgument>
                                  <InArgument x:TypeArguments="x:String" x:Key="[IWBBATCHCODE]">[PosBatchCode]</InArgument>
                                  <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[IWBPOSEXPIRYDATE]">[ExpiryDate]</InArgument>
                                </wag:MultipleDynamicAssignActivity.Properties>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </wag:MultipleDynamicAssignActivity>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                        <x:Reference>__ReferenceID7</x:Reference>
                      </Flowchart>
                    </FlowStep>
                    <FlowDecision x:Name="__ReferenceID15" Condition="[TypeOf Target is IWBPos]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID9}" False="{x:Reference __ReferenceID10}">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">416,524</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="TrueConnector">416,567.5 301,567.5 301,692</av:PointCollection>
                          <av:PointCollection x:Key="FalseConnector">486,567.5 528,567.5 528,834.5</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                    </FlowDecision>
                    <FlowStep x:Name="__ReferenceID14">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">149,442</av:Point>
                          <av:Size x:Key="ShapeSize">244,51</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Flowchart DisplayName="Свойства IWBPosInput" sap:VirtualizedContainerService.HintSize="244,51">
                        <Flowchart.Variables>
                          <Variable x:TypeArguments="wbo:IWBPosInput" Name="TargetIWBPosInput" />
                        </Flowchart.Variables>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                            <av:Size x:Key="ShapeSize">60,75</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,170</av:PointCollection>
                            <x:Double x:Key="Width">626</x:Double>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart.StartNode>
                          <x:Reference>__ReferenceID13</x:Reference>
                        </Flowchart.StartNode>
                        <FlowStep x:Name="__ReferenceID11">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">179,480</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="x:Boolean">[TargetIWBPosInput.IsBpBatchcodeCompleted]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="x:Boolean">True</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                        </FlowStep>
                        <FlowStep x:Name="__ReferenceID13">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">179,170</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,230 300,311.5</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="wbo:IWBPosInput">[TargetIWBPosInput]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="wbo:IWBPosInput">[CType(Target, IWBPosInput)]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID12">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">200,311.5</av:Point>
                                  <av:Size x:Key="ShapeSize">200,57</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,368.5 300,480</av:PointCollection>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:IWBPosInput" DisplayName="Заполняем поля объекта" sap:VirtualizedContainerService.HintSize="200,57" Object="[TargetIWBPosInput]">
                                <wag:MultipleDynamicAssignActivity.Properties>
                                  <InArgument x:TypeArguments="s:DateTime" x:Key="[IWBPOSEXPIRYDATE]">[ExpiryDate.Value]</InArgument>
                                  <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[IWBPOSPRODUCTDATE]">[ProductDate]</InArgument>
                                  <InArgument x:TypeArguments="x:String" x:Key="[IWBPOSINPUTBATCHCODE]">[PosBatchCode]</InArgument>
                                </wag:MultipleDynamicAssignActivity.Properties>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </wag:MultipleDynamicAssignActivity>
                              <FlowStep.Next>
                                <x:Reference>__ReferenceID11</x:Reference>
                              </FlowStep.Next>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                        <x:Reference>__ReferenceID12</x:Reference>
                      </Flowchart>
                    </FlowStep>
                    <FlowDecision x:Name="__ReferenceID16" Condition="[TypeOf Target is IWBPosInput]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID14}" False="{x:Reference __ReferenceID15}">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">366,244</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="TrueConnector">366,287.5 271,287.5 271,442</av:PointCollection>
                          <av:PointCollection x:Key="FalseConnector">436,287.5 451,287.5 451,524</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                    </FlowDecision>
                  </Flowchart>
                </FlowStep>
              </FlowDecision.False>
            </FlowDecision>
            <FlowStep x:Name="__ReferenceID25">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">274,1086</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">396,1137 396,1228</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Нормализация batch-кода" sap:VirtualizedContainerService.HintSize="244,51">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,126.5</av:PointCollection>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID18</x:Reference>
                </Flowchart.StartNode>
                <FlowDecision x:Name="__ReferenceID18" Condition="[PosBatchCode.Length = 2]" sap:VirtualizedContainerService.HintSize="70,87">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">265,126.5</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="TrueConnector">265,170 150,170 150,290</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <FlowDecision.True>
                    <FlowStep x:Name="__ReferenceID17">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">29,290</av:Point>
                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                        <Assign.To>
                          <OutArgument x:TypeArguments="x:String">[PosBatchCode]</OutArgument>
                        </Assign.To>
                        <Assign.Value>
                          <InArgument x:TypeArguments="x:String">[string.Format("{0}01", PosBatchCode)]</InArgument>
                        </Assign.Value>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Assign>
                    </FlowStep>
                  </FlowDecision.True>
                </FlowDecision>
                <x:Reference>__ReferenceID17</x:Reference>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID19</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <FlowStep x:Name="__ReferenceID42">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">454,946</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">576,997 576,1111.5 518,1111.5</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Срок годности" sap:VirtualizedContainerService.HintSize="244,51">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <x:Double x:Key="Width">711</x:Double>
                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,206.5</av:PointCollection>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID24</x:Reference>
                </Flowchart.StartNode>
                <FlowStep x:Name="__ReferenceID23">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">10,409</av:Point>
                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Throw Exception="[new PassThroughException(&quot;Для артикула '{0}' определна неизвестная единица измерения срока жизни товара '{1}'.&quot;, ArtCode, LifeTimeMeasure)]" sap:VirtualizedContainerService.HintSize="200,22">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Throw>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID22">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">469,300</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ExpiryDate]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ProductDate.Value.AddYears(Convert.ToInt32(LifeTime))]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID21">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">469,220</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ExpiryDate]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ProductDate.Value.AddMonths(Convert.ToInt32(LifeTime))]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID20">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">469,150</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ExpiryDate]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ProductDate.Value.AddDays(Convert.ToInt32(LifeTime))]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                </FlowStep>
                <FlowSwitch x:TypeArguments="x:String" Default="{x:Reference __ReferenceID23}" x:Name="__ReferenceID24" Expression="[LifeTimeMeasure.ToUpper()]" sap:VirtualizedContainerService.HintSize="70,87">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">265,206.5</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="DAYConnector">335,228.25 365,228.25 365,180 469,180</av:PointCollection>
                      <av:PointCollection x:Key="MONConnector">335,250 469,250</av:PointCollection>
                      <av:PointCollection x:Key="ANNConnector">335,271.75 365,271.75 365,330 469,330</av:PointCollection>
                      <av:PointCollection x:Key="Default">265,250 235,250 235,420 210,420</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <x:Reference>__ReferenceID20<x:Key>DAY</x:Key></x:Reference>
                  <x:Reference>__ReferenceID21<x:Key>MON</x:Key></x:Reference>
                  <x:Reference>__ReferenceID22<x:Key>ANN</x:Key></x:Reference>
                </FlowSwitch>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID25</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <FlowStep x:Name="__ReferenceID41">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">113.091666666667,945.52</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">235.091666666667,996.52 235.091666666667,1111.5 274,1111.5</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Дата производства товара и бач-код" sap:VirtualizedContainerService.HintSize="244,51">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">730,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <x:Double x:Key="Width">1050</x:Double>
                    <av:PointCollection x:Key="ConnectorLocation">760,77.5 760,206.5</av:PointCollection>
                    <x:Double x:Key="Height">741</x:Double>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID40</x:Reference>
                </Flowchart.StartNode>
                <FlowStep x:Name="__ReferenceID36">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">850,419</av:Point>
                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Throw Exception="[new PassThroughException(&quot;Для артикула '{0}' определна неизвестная единица измерения срока жизни товара '{1}'.&quot;, ArtCode, LifeTimeMeasure)]" sap:VirtualizedContainerService.HintSize="200,22">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Throw>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID35">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">390,310</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">390,340 317.5,340 317.5,466.5</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ProductDate]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:DateTime">[ExpiryDate.Value.AddYears(Convert.ToInt32(LifeTime)*-1)]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <FlowDecision x:Name="__ReferenceID32" Condition="[InputDate &lt; ProductDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">265,466.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="TrueConnector">265,510 130,510 130,609</av:PointCollection>
                          <av:PointCollection x:Key="FalseConnector">335,510 470,510 470,584.5</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <FlowDecision.True>
                        <FlowStep x:Name="__ReferenceID37">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">30,609</av:Point>
                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Throw Exception="[new PassThroughException(&quot;Некорректный batch-код. Дата товара = '{0}'; текущая дата = '{1}'&quot;, ProductDate.Value.ToShortDateString, InputDate.ToShortDateString)]" sap:VirtualizedContainerService.HintSize="200,22">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Throw>
                        </FlowStep>
                      </FlowDecision.True>
                      <FlowDecision.False>
                        <FlowStep x:Name="__ReferenceID38">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">348,584.5</av:Point>
                              <av:Size x:Key="ShapeSize">244,51</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">470,635.5 470,680</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <While DisplayName="Ищем восьмилетку" sap:VirtualizedContainerService.HintSize="831,994">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <While.Condition>[TargetStartYear = 0]</While.Condition>
                            <Flowchart DisplayName="Восьмилетка" sap:VirtualizedContainerService.HintSize="805,876">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,136.5</av:PointCollection>
                                  <x:Double x:Key="Width">791</x:Double>
                                  <x:Double x:Key="Height">840</x:Double>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID31</x:Reference>
                              </Flowchart.StartNode>
                              <FlowDecision x:Name="__ReferenceID29" Condition="[ProductDate.Value.Year &gt;= (CurrentStartYear + YearShift)]" sap:VirtualizedContainerService.HintSize="70,87">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,296.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,340 240,340 240,456.5 300,456.5 300,486.5</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">335,340 520,340 520,400</av:PointCollection>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowDecision.True>
                                  <FlowDecision x:Name="__ReferenceID28" Condition="[ProductDate.Value.Year &lt; CurrentStartYear + YearStep]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">265,486.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">265,530 130,530 130,650</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">335,530 520,530 520,460</av:PointCollection>
                                      </scg:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID27">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">9,650</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Искомая восьмилетка" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:Int32">[TargetStartYear]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:Int32">[CurrentStartYear]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID26">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">399,400</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Следующая восьмилетка" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:Int32">[CurrentStartYear]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:Int32">[CurrentStartYear + YearStep]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowDecision.True>
                                <FlowDecision.False>
                                  <x:Reference>__ReferenceID26</x:Reference>
                                </FlowDecision.False>
                              </FlowDecision>
                              <x:Reference>__ReferenceID27</x:Reference>
                              <x:Reference>__ReferenceID26</x:Reference>
                              <x:Reference>__ReferenceID28</x:Reference>
                              <FlowStep x:Name="__ReferenceID30">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">380,219</av:Point>
                                    <av:Size x:Key="ShapeSize">200,22</av:Size>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Throw Exception="[new PassThroughException(&quot;Некорректный Batch-код. Восьмилетка = '{0}'; текущая дата = '{1}'&quot;, CurrentStartYear - YearStep, ProductDate.Value.ToShortDateString)]" sap:VirtualizedContainerService.HintSize="200,22">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Throw>
                              </FlowStep>
                              <FlowDecision x:Name="__ReferenceID31" Condition="[ProductDate.Value.Year &gt;= CurrentStartYear]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID29}" False="{x:Reference __ReferenceID30}">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,136.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,180 240,180 240,266.5 300,266.5 300,296.5</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">335,180 480,180 480,219</av:PointCollection>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </FlowDecision>
                            </Flowchart>
                          </While>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID39">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">349,680</av:Point>
                                  <av:Size x:Key="ShapeSize">242,60</av:Size>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Assign DisplayName="Вычисляем бач-код" sap:VirtualizedContainerService.HintSize="242,60">
                                <Assign.To>
                                  <OutArgument x:TypeArguments="x:String">[PosBatchCode]</OutArgument>
                                </Assign.To>
                                <Assign.Value>
                                  <InArgument x:TypeArguments="x:String">[string.Format("{0}", ((ProductDate.Value.Year - TargetStartYear)* 12 + ProductDate.Value.Month))]</InArgument>
                                </Assign.Value>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </Assign>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowDecision.False>
                    </FlowDecision>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID34">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">340,220</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">340,250 300,250 300,466.5</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ProductDate]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:DateTime">[ExpiryDate.Value.AddMonths(Convert.ToInt32(LifeTime)*-1)]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID32</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID33">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">310,130</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">310,160 282.5,160 282.5,466.5</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ProductDate]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:DateTime">[ExpiryDate.Value.AddDays(Convert.ToInt32(LifeTime)*-1)]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID32</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowSwitch x:TypeArguments="x:String" Default="{x:Reference __ReferenceID36}" x:Name="__ReferenceID40" Expression="[LifeTimeMeasure.ToUpper()]" sap:VirtualizedContainerService.HintSize="70,87">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">725,206.5</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="DAYConnector">725,228.25 695,228.25 695,160 552,160</av:PointCollection>
                      <av:PointCollection x:Key="MONConnector">725,250 582,250</av:PointCollection>
                      <av:PointCollection x:Key="ANNConnector">725,271.75 695,271.75 695,340 632,340</av:PointCollection>
                      <av:PointCollection x:Key="Default">795,250 825,250 825,430 850,430</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <x:Reference>__ReferenceID33<x:Key>DAY</x:Key></x:Reference>
                  <x:Reference>__ReferenceID34<x:Key>MON</x:Key></x:Reference>
                  <x:Reference>__ReferenceID35<x:Key>ANN</x:Key></x:Reference>
                </FlowSwitch>
                <x:Reference>__ReferenceID37</x:Reference>
                <x:Reference>__ReferenceID32</x:Reference>
                <x:Reference>__ReferenceID38</x:Reference>
                <x:Reference>__ReferenceID39</x:Reference>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID25</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <FlowDecision x:Name="__ReferenceID56" Condition="[IsDateFormat]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID41}" False="{x:Reference __ReferenceID42}">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  <av:Point x:Key="ShapeLocation">361,818</av:Point>
                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                  <x:String x:Key="TrueLabel">ДД.ММ.ГГГГ</x:String>
                  <x:String x:Key="FalseLabel">12345678</x:String>
                  <av:PointCollection x:Key="TrueConnector">361,861.5 235.091666666667,861.5 235.091666666667,945.52</av:PointCollection>
                  <av:PointCollection x:Key="FalseConnector">431,861.5 576,861.5 576,946</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
            </FlowDecision>
            <FlowStep x:Name="__ReferenceID76">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">274,706</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">396,757 396,818</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Проверка и получение времени жизни" sap:VirtualizedContainerService.HintSize="244,51">
                <Flowchart.Variables>
                  <Variable x:TypeArguments="wbo:Art" Name="Art" />
                  <Variable x:TypeArguments="scg:List(wbo:Art)" Name="ArtList" />
                </Flowchart.Variables>
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">330,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <av:PointCollection x:Key="ConnectorLocation">360,77.5 360,107.5 230,107.5 230,226.5</av:PointCollection>
                    <x:Double x:Key="Height">1023.5</x:Double>
                    <x:Double x:Key="Width">770</x:Double>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID55</x:Reference>
                </Flowchart.StartNode>
                <FlowDecision x:Name="__ReferenceID55" Condition="[SKUID.HasValue = false]" sap:VirtualizedContainerService.HintSize="70,87">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">195,226.5</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="FalseConnector">265,270 440,270 440,339</av:PointCollection>
                      <av:PointCollection x:Key="TrueConnector">195,270 120,270 120,369</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <FlowDecision.True>
                    <FlowStep x:Name="__ReferenceID44">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">20,369</av:Point>
                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Throw Exception="[new PassThroughException(&quot;Не указано SKU.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Throw>
                    </FlowStep>
                  </FlowDecision.True>
                  <FlowDecision.False>
                    <FlowStep x:Name="__ReferenceID43">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">340,339</av:Point>
                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                          <av:PointCollection x:Key="ConnectorLocation">440,361 440,406.5</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <wag:GetByFilterActivity x:TypeArguments="wbo:Art" AttrEntity="{x:Null}" DisplayName="Получим артикул по SKU" Filter="[string.Format(&quot;artcode in (select artcode_r from wmssku where skuid = {0})&quot;, SKUID.Value)]" sap:VirtualizedContainerService.HintSize="200,22" Mode="Partial" Result="[ArtList]">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </wag:GetByFilterActivity>
                      <FlowStep.Next>
                        <FlowSwitch x:TypeArguments="x:Int32" x:Name="__ReferenceID45" Expression="[ArtList.Count]" sap:VirtualizedContainerService.HintSize="70,87">
                          <FlowSwitch.Default>
                            <FlowStep x:Name="__ReferenceID46">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">570,419</av:Point>
                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Throw DisplayName="Нашли много" Exception="[new PassThroughException(string.Format(&quot;Для SKU с кодом '{0}' получено более одного артикула.&quot;, SKUID.Value))]" sap:VirtualizedContainerService.HintSize="200,22">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </Throw>
                            </FlowStep>
                          </FlowSwitch.Default>
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">405,406.5</av:Point>
                              <av:Size x:Key="ShapeSize">70,87</av:Size>
                              <av:PointCollection x:Key="Default">475,428.25 505,428.25 505,430 570,430</av:PointCollection>
                              <av:PointCollection x:Key="0Connector">475,450 505,450 505,470 570,470</av:PointCollection>
                              <av:PointCollection x:Key="1Connector">405,450 320,450 320,520</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <FlowStep x:Key="0" x:Name="__ReferenceID47">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">570,459</av:Point>
                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Throw DisplayName="Не нашли" Exception="[new PassThroughException(string.Format(&quot;Для SKU с кодом '{0}' не найдено ни одного артикула.&quot;, SKUID.Value))]" sap:VirtualizedContainerService.HintSize="200,22">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                            </Throw>
                          </FlowStep>
                          <FlowStep x:Key="1" x:Name="__ReferenceID54">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">199,520</av:Point>
                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">320,580 320,610</av:PointCollection>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Assign sap:VirtualizedContainerService.HintSize="242,60">
                              <Assign.To>
                                <OutArgument x:TypeArguments="x:String">[ArtCode]</OutArgument>
                              </Assign.To>
                              <Assign.Value>
                                <InArgument x:TypeArguments="x:String">[ArtList(0).Get(of String)("ARTCODE")]</InArgument>
                              </Assign.Value>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                            </Assign>
                            <FlowStep.Next>
                              <FlowStep x:Name="__ReferenceID48">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">199,610</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">320,670 320,696.5</av:PointCollection>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[LifeTime]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[ArtList(0).Get(of Decimal?)("ARTLIFETIME")]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID50" Condition="[LifeTime.HasValue = false]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">285,696.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="FalseConnector">355,740 380,740 380,820 320,820 320,850</av:PointCollection>
                                        <av:PointCollection x:Key="TrueConnector">285,740 110,740 110,759</av:PointCollection>
                                      </scg:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID51">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">10,759</av:Point>
                                            <av:Size x:Key="ShapeSize">200,22</av:Size>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Throw Exception="[new PassThroughException(string.Format(&quot;Для артикула '{0}' не удалось определить время жизни товара.&quot;, ArtCode))]" sap:VirtualizedContainerService.HintSize="200,22">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Throw>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID49">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">199,850</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">320,910 320,936.5</av:PointCollection>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:String">[LifeTimeMeasure]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:String">[ArtList(0).Get(of String)("ARTLIFETIMEMEASURE")]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowDecision x:Name="__ReferenceID53" Condition="[string.IsNullOrEmpty(LifeTimeMeasure)]" sap:VirtualizedContainerService.HintSize="70,87">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                <av:Point x:Key="ShapeLocation">285,936.5</av:Point>
                                                <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                <av:PointCollection x:Key="FalseConnector">365,660 390,660 390,740 330,740 330,770</av:PointCollection>
                                                <av:PointCollection x:Key="TrueConnector">285,980 110,980 110,999</av:PointCollection>
                                              </scg:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <FlowDecision.True>
                                              <FlowStep x:Name="__ReferenceID52">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">10,999</av:Point>
                                                    <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                  </scg:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Throw Exception="[new PassThroughException(string.Format(&quot;Для артикула '{0}' не удалось определить единицу измерения времени жизни товара.&quot;, ArtCode))]" sap:VirtualizedContainerService.HintSize="200,22">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Throw>
                                              </FlowStep>
                                            </FlowDecision.True>
                                          </FlowDecision>
                                        </FlowStep.Next>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                            </FlowStep.Next>
                          </FlowStep>
                        </FlowSwitch>
                      </FlowStep.Next>
                    </FlowStep>
                  </FlowDecision.False>
                </FlowDecision>
                <x:Reference>__ReferenceID43</x:Reference>
                <x:Reference>__ReferenceID44</x:Reference>
                <x:Reference>__ReferenceID45</x:Reference>
                <x:Reference>__ReferenceID46</x:Reference>
                <x:Reference>__ReferenceID47</x:Reference>
                <x:Reference>__ReferenceID48</x:Reference>
                <x:Reference>__ReferenceID49</x:Reference>
                <x:Reference>__ReferenceID50</x:Reference>
                <x:Reference>__ReferenceID51</x:Reference>
                <x:Reference>__ReferenceID52</x:Reference>
                <x:Reference>__ReferenceID53</x:Reference>
                <x:Reference>__ReferenceID54</x:Reference>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID56</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <FlowStep x:Name="__ReferenceID79">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">444,566</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">566,617 566,731.5 518,731.5</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Разбор в формате 12345678" sap:VirtualizedContainerService.HintSize="244,51">
                <Flowchart.Variables>
                  <Variable x:TypeArguments="x:Int32" Name="BatchFirstDigits" />
                  <Variable x:TypeArguments="x:Double" Name="BatchDouble" />
                  <Variable x:TypeArguments="x:Int32" Name="Month" />
                </Flowchart.Variables>
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,136.5</av:PointCollection>
                    <x:Double x:Key="Width">1069.5</x:Double>
                    <x:Double x:Key="Height">1471</x:Double>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID75</x:Reference>
                </Flowchart.StartNode>
                <FlowStep x:Name="__ReferenceID65">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">179,330</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">300,390 300,440</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign DisplayName="Выделяем первые две цифры – значение Батч кода" sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:Int32">[BatchFirstDigits]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:Int32">[System.Int32.Parse(BatchCode.Substring(0, 2))]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <FlowStep x:Name="__ReferenceID64">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">179,440</av:Point>
                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                          <av:PointCollection x:Key="ConnectorLocation">300,500 300,580</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Assign DisplayName="Результат деления на 12" sap:VirtualizedContainerService.HintSize="242,60">
                        <Assign.To>
                          <OutArgument x:TypeArguments="x:Double">[BatchDouble]</OutArgument>
                        </Assign.To>
                        <Assign.Value>
                          <InArgument x:TypeArguments="x:Double">[BatchFirstDigits/12]</InArgument>
                        </Assign.Value>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Assign>
                      <FlowStep.Next>
                        <FlowStep x:Name="__ReferenceID66">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">179,580</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,640 300,680</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign DisplayName="Сдвиг" sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="x:Int32">[YearShift]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="x:Int32">[Convert.ToInt32(Math.Floor(BatchDouble))]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID67">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">179,680</av:Point>
                                  <av:Size x:Key="ShapeSize">242,60</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,740 300,776.5</av:PointCollection>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Assign DisplayName="Месяц" sap:VirtualizedContainerService.HintSize="242,60">
                                <Assign.To>
                                  <OutArgument x:TypeArguments="x:Int32">[Month]</OutArgument>
                                </Assign.To>
                                <Assign.Value>
                                  <InArgument x:TypeArguments="x:Int32">[Convert.ToInt32((BatchDouble - YearShift) * 12)]</InArgument>
                                </Assign.Value>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </Assign>
                              <FlowStep.Next>
                                <FlowDecision x:Name="__ReferenceID68" Condition="[Month = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      <av:Point x:Key="ShapeLocation">265,776.5</av:Point>
                                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                                      <av:PointCollection x:Key="TrueConnector">265,820 130,820 130,900</av:PointCollection>
                                      <av:PointCollection x:Key="FalseConnector">335,820 452,820 452,1150 422,1150</av:PointCollection>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <FlowDecision.True>
                                    <FlowStep x:Name="__ReferenceID72">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">9,900</av:Point>
                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">130,960 130,1020</av:PointCollection>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Assign DisplayName="Декабрь" sap:VirtualizedContainerService.HintSize="242,60">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="x:Int32">[YearShift]</OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="x:Int32">[YearShift - 1]</InArgument>
                                        </Assign.Value>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Assign>
                                      <FlowStep.Next>
                                        <FlowStep x:Name="__ReferenceID69">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <av:Point x:Key="ShapeLocation">9,1020</av:Point>
                                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                                              <av:PointCollection x:Key="ConnectorLocation">130,1080 130,1150 178,1150</av:PointCollection>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Assign DisplayName="Декабрь" sap:VirtualizedContainerService.HintSize="242,60">
                                            <Assign.To>
                                              <OutArgument x:TypeArguments="x:Int32">[Month]</OutArgument>
                                            </Assign.To>
                                            <Assign.Value>
                                              <InArgument x:TypeArguments="x:Int32">12</InArgument>
                                            </Assign.Value>
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              </scg:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                          </Assign>
                                          <FlowStep.Next>
                                            <FlowStep x:Name="__ReferenceID63">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">178,1124.5</av:Point>
                                                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">300,1175.5 300,1205.5 299.895,1205.5 299.895,1220</av:PointCollection>
                                                </scg:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <While DisplayName="Ищем восьмилетку" sap:VirtualizedContainerService.HintSize="244,51">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <While.Condition>[TargetStartYear = 0]</While.Condition>
                                                <Flowchart DisplayName="Восьмилетка" sap:VirtualizedContainerService.HintSize="805,876">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                                      <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                      <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                      <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,136.5</av:PointCollection>
                                                      <x:Double x:Key="Width">791</x:Double>
                                                      <x:Double x:Key="Height">840</x:Double>
                                                    </scg:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <Flowchart.StartNode>
                                                    <x:Reference>__ReferenceID62</x:Reference>
                                                  </Flowchart.StartNode>
                                                  <FlowDecision x:Name="__ReferenceID60" Condition="[InputDate.Year &gt;= (CurrentStartYear + YearShift)]" sap:VirtualizedContainerService.HintSize="70,87">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        <av:Point x:Key="ShapeLocation">265,386.5</av:Point>
                                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                        <av:PointCollection x:Key="TrueConnector">265,430 240,430 240,586.5 300,586.5 300,616.5</av:PointCollection>
                                                        <av:PointCollection x:Key="FalseConnector">335,430 520,430 520,490</av:PointCollection>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <FlowDecision.True>
                                                      <FlowDecision x:Name="__ReferenceID59" Condition="[InputDate.Year &lt; CurrentStartYear + YearStep]" sap:VirtualizedContainerService.HintSize="70,87">
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                            <av:Point x:Key="ShapeLocation">265,616.5</av:Point>
                                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                            <av:PointCollection x:Key="TrueConnector">265,660 130,660 130,780</av:PointCollection>
                                                            <av:PointCollection x:Key="FalseConnector">335,660 520,660 520,550</av:PointCollection>
                                                          </scg:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                        <FlowDecision.True>
                                                          <FlowStep x:Name="__ReferenceID58">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <av:Point x:Key="ShapeLocation">9,780</av:Point>
                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                              </scg:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                            <Assign DisplayName="Искомая восьмилетка" sap:VirtualizedContainerService.HintSize="242,60">
                                                              <Assign.To>
                                                                <OutArgument x:TypeArguments="x:Int32">[TargetStartYear]</OutArgument>
                                                              </Assign.To>
                                                              <Assign.Value>
                                                                <InArgument x:TypeArguments="x:Int32">[CurrentStartYear]</InArgument>
                                                              </Assign.Value>
                                                              <sap:WorkflowViewStateService.ViewState>
                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                </scg:Dictionary>
                                                              </sap:WorkflowViewStateService.ViewState>
                                                            </Assign>
                                                          </FlowStep>
                                                        </FlowDecision.True>
                                                        <FlowDecision.False>
                                                          <FlowStep x:Name="__ReferenceID57">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <av:Point x:Key="ShapeLocation">399,490</av:Point>
                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                              </scg:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                            <Assign DisplayName="Следующая восьмилетка" sap:VirtualizedContainerService.HintSize="242,60">
                                                              <Assign.To>
                                                                <OutArgument x:TypeArguments="x:Int32">[CurrentStartYear]</OutArgument>
                                                              </Assign.To>
                                                              <Assign.Value>
                                                                <InArgument x:TypeArguments="x:Int32">[CurrentStartYear + YearStep]</InArgument>
                                                              </Assign.Value>
                                                              <sap:WorkflowViewStateService.ViewState>
                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                </scg:Dictionary>
                                                              </sap:WorkflowViewStateService.ViewState>
                                                            </Assign>
                                                          </FlowStep>
                                                        </FlowDecision.False>
                                                      </FlowDecision>
                                                    </FlowDecision.True>
                                                    <FlowDecision.False>
                                                      <x:Reference>__ReferenceID57</x:Reference>
                                                    </FlowDecision.False>
                                                  </FlowDecision>
                                                  <x:Reference>__ReferenceID58</x:Reference>
                                                  <x:Reference>__ReferenceID57</x:Reference>
                                                  <x:Reference>__ReferenceID59</x:Reference>
                                                  <FlowStep x:Name="__ReferenceID61">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">380,219</av:Point>
                                                        <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <Throw Exception="[new PassThroughException(&quot;Некорректный Batch-код. Восьмилетка = '{0}'; сдвиг = '{1}'; месяц = '{2}'; текущая дата = '{3}'&quot;, CurrentStartYear - YearStep,YearShift, Month, InputDate.ToShortDateString)]" sap:VirtualizedContainerService.HintSize="200,22">
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </Throw>
                                                  </FlowStep>
                                                  <FlowDecision x:Name="__ReferenceID62" Condition="[InputDate.Year &gt;= CurrentStartYear]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID60}" False="{x:Reference __ReferenceID61}">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        <av:Point x:Key="ShapeLocation">265,136.5</av:Point>
                                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                        <av:PointCollection x:Key="TrueConnector">265,180 240,180 240,356.5 300,356.5 300,386.5</av:PointCollection>
                                                        <av:PointCollection x:Key="FalseConnector">335,180 480,180 480,219</av:PointCollection>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                  </FlowDecision>
                                                </Flowchart>
                                              </While>
                                              <FlowStep.Next>
                                                <FlowStep x:Name="__ReferenceID70">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <av:Point x:Key="ShapeLocation">178.895,1220</av:Point>
                                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                      <av:PointCollection x:Key="ConnectorLocation">299.895,1280 299.895,1310 300,1310 300,1326.5</av:PointCollection>
                                                    </scg:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <Assign DisplayName="Дата производства" sap:VirtualizedContainerService.HintSize="242,60">
                                                    <Assign.To>
                                                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ProductDate]</OutArgument>
                                                    </Assign.To>
                                                    <Assign.Value>
                                                      <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[new DateTime(TargetStartYear + YearShift, Month, 1)]</InArgument>
                                                    </Assign.Value>
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                  </Assign>
                                                  <FlowStep.Next>
                                                    <FlowDecision x:Name="__ReferenceID73" Condition="[ProductDate.Value &gt; InputDate]" sap:VirtualizedContainerService.HintSize="70,87">
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                          <av:Point x:Key="ShapeLocation">265,1326.5</av:Point>
                                                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                          <av:PointCollection x:Key="TrueConnector">265,1370 110,1370 110,1449</av:PointCollection>
                                                        </scg:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                      <FlowDecision.True>
                                                        <FlowStep x:Name="__ReferenceID74">
                                                          <sap:WorkflowViewStateService.ViewState>
                                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                              <av:Point x:Key="ShapeLocation">10,1449</av:Point>
                                                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                            </scg:Dictionary>
                                                          </sap:WorkflowViewStateService.ViewState>
                                                          <Throw Exception="[new PassThroughException(&quot;Некорректный batch-код. Дата товара = '{0}'; текущая дата = '{1}'&quot;, ProductDate.Value.ToShortDateString, InputDate.ToShortDateString)]" sap:VirtualizedContainerService.HintSize="200,22">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                              </scg:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                          </Throw>
                                                        </FlowStep>
                                                      </FlowDecision.True>
                                                    </FlowDecision>
                                                  </FlowStep.Next>
                                                </FlowStep>
                                              </FlowStep.Next>
                                            </FlowStep>
                                          </FlowStep.Next>
                                        </FlowStep>
                                      </FlowStep.Next>
                                    </FlowStep>
                                  </FlowDecision.True>
                                  <FlowDecision.False>
                                    <x:Reference>__ReferenceID63</x:Reference>
                                  </FlowDecision.False>
                                </FlowDecision>
                              </FlowStep.Next>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowStep.Next>
                    </FlowStep>
                  </FlowStep.Next>
                </FlowStep>
                <x:Reference>__ReferenceID64</x:Reference>
                <FlowStep>
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">545,330.5</av:Point>
                      <av:Size x:Key="ShapeSize">310,59</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">545,360 421,360</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <wada:CommentActivity Comment="Выделяем первые две цифры – значение Батч кода" DisplayName="Комментарий" sap:VirtualizedContainerService.HintSize="310,59">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </wada:CommentActivity>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID65</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep>
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">547,433</av:Point>
                      <av:Size x:Key="ShapeSize">286,74</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">547,470 421,470</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <wada:CommentActivity Comment="Данное значение необходимо разделить на 12.&#xA;получится целое число и неделимый остаток." DisplayName="Комментарий" sap:VirtualizedContainerService.HintSize="286,74">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </wada:CommentActivity>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID64</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep>
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">530.5,550.5</av:Point>
                      <av:Size x:Key="ShapeSize">539,119</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">530.5,610 421,610</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <wada:CommentActivity Comment="Целое число это «сдвиг» по определению года относительно «восьмилетки».&#xA;Определение года начинается с 2000, повторяется через каждые 8 лет (2000 ,2008, 2016 и т.д.)&#xA;Год определять по дате прихода. &#xA;Год должен быть ближайший в меньшую сторону.&#xA;" DisplayName="Комментарий" sap:VirtualizedContainerService.HintSize="539,119">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </wada:CommentActivity>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID66</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <x:Reference>__ReferenceID66</x:Reference>
                <x:Reference>__ReferenceID67</x:Reference>
                <x:Reference>__ReferenceID68</x:Reference>
                <x:Reference>__ReferenceID69</x:Reference>
                <x:Reference>__ReferenceID63</x:Reference>
                <x:Reference>__ReferenceID70</x:Reference>
                <FlowDecision x:Name="__ReferenceID75" Condition="[BatchCode.Length &gt;= 2]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID65}">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">265,136.5</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="TrueConnector">265,180 149,180 149,360 179,360</av:PointCollection>
                      <av:PointCollection x:Key="FalseConnector">335,180 590,180 590,239</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <FlowDecision.False>
                    <FlowStep x:Name="__ReferenceID71">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">490,239</av:Point>
                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Throw Exception="[new PassThroughException(&quot;Некорректный Batch-код.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Throw>
                    </FlowStep>
                  </FlowDecision.False>
                </FlowDecision>
                <x:Reference>__ReferenceID71</x:Reference>
                <x:Reference>__ReferenceID72</x:Reference>
                <x:Reference>__ReferenceID73</x:Reference>
                <x:Reference>__ReferenceID74</x:Reference>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID76</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <FlowStep x:Name="__ReferenceID78">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">106,566</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">228,617 228,731.5 274,731.5</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Разбор в формате ДД.ММ.ГГГГ" sap:VirtualizedContainerService.HintSize="244,51">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,140</av:PointCollection>
                    <x:Double x:Key="Width">690</x:Double>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID77</x:Reference>
                </Flowchart.StartNode>
                <FlowStep x:Name="__ReferenceID77">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">179,140</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ExpiryDate]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[DateBatchCode]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                </FlowStep>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID76</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <FlowDecision x:Name="__ReferenceID103" Condition="[IsDateFormat]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID78}" False="{x:Reference __ReferenceID79}">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  <av:Point x:Key="ShapeLocation">361,418</av:Point>
                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                  <x:String x:Key="TrueLabel">ДД.ММ.ГГГГ</x:String>
                  <x:String x:Key="FalseLabel">12345678</x:String>
                  <av:PointCollection x:Key="TrueConnector">361,461.5 228,461.5 228,566</av:PointCollection>
                  <av:PointCollection x:Key="FalseConnector">431,461.5 566,461.5 566,566</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
            </FlowDecision>
            <FlowStep x:Name="__ReferenceID112">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">274,306</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">396,357 396,418</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Начальные значения" sap:VirtualizedContainerService.HintSize="244,51">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,107.5 299.895,107.5 299.895,130</av:PointCollection>
                    <x:Double x:Key="Height">1161</x:Double>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID102</x:Reference>
                </Flowchart.StartNode>
                <FlowStep x:Name="__ReferenceID95">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">179,360</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">300,420 300,540</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign DisplayName="Текущая восьмилетка начало отсчета" sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:Int32">[CurrentStartYear]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:Int32">2000</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <FlowStep x:Name="__ReferenceID97">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">179,540</av:Point>
                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                          <av:PointCollection x:Key="ConnectorLocation">300,600 300,673</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Assign DisplayName="Год определять по дате прихода" sap:VirtualizedContainerService.HintSize="242,60">
                        <Assign.To>
                          <OutArgument x:TypeArguments="s:DateTime">[InputDate]</OutArgument>
                        </Assign.To>
                        <Assign.Value>
                          <InArgument x:TypeArguments="s:DateTime">[BPH.GetSystemDate]</InArgument>
                        </Assign.Value>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Assign>
                      <FlowStep.Next>
                        <FlowStep x:Name="__ReferenceID100">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">191,673</av:Point>
                              <av:Size x:Key="ShapeSize">218,134</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,807 300,914.5</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <InvokeMethod sap:VirtualizedContainerService.HintSize="218,134" MethodName="TryParseExact" TargetType="s:DateTime">
                            <InvokeMethod.Result>
                              <OutArgument x:TypeArguments="x:Boolean">[IsDateFormat]</OutArgument>
                            </InvokeMethod.Result>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <InArgument x:TypeArguments="x:String">[BatchCode]</InArgument>
                            <InArgument x:TypeArguments="x:String">dd.MM.yyyy</InArgument>
                            <InArgument x:TypeArguments="s:IFormatProvider">[System.Globalization.CultureInfo.CurrentCulture]</InArgument>
                            <InArgument x:TypeArguments="sg:DateTimeStyles">[System.Globalization.DateTimeStyles.None]</InArgument>
                            <InOutArgument x:TypeArguments="s:DateTime">[DateBatchCode]</InOutArgument>
                          </InvokeMethod>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID101">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">178,914.5</av:Point>
                                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,965.5 300,1046.5</av:PointCollection>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart DisplayName="Получаем значения из Target" sap:VirtualizedContainerService.HintSize="244,51">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,166.5</av:PointCollection>
                                    <x:Double x:Key="Height">1135</x:Double>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Flowchart.StartNode>
                                  <x:Reference>__ReferenceID94</x:Reference>
                                </Flowchart.StartNode>
                                <FlowStep x:Name="__ReferenceID84">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">48,364.5</av:Point>
                                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Flowchart DisplayName="Свойства IWBPosInput" sap:VirtualizedContainerService.HintSize="244,51">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                                        <x:Double x:Key="Width">702</x:Double>
                                        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,190</av:PointCollection>
                                        <x:Double x:Key="Height">830</x:Double>
                                      </scg:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Flowchart.StartNode>
                                      <x:Reference>__ReferenceID83</x:Reference>
                                    </Flowchart.StartNode>
                                    <FlowDecision x:Name="__ReferenceID81" Condition="[OnlyParse]" sap:VirtualizedContainerService.HintSize="70,87">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          <av:Point x:Key="ShapeLocation">265,536.5</av:Point>
                                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                                          <av:PointCollection x:Key="FalseConnector">335,580 430,580 430,740</av:PointCollection>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <FlowDecision.False>
                                        <FlowStep x:Name="__ReferenceID80">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <av:Point x:Key="ShapeLocation">309,740</av:Point>
                                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                            <Assign.To>
                                              <OutArgument x:TypeArguments="x:Boolean">[Ctype(Target, IWBPosInput).IsBpBatchcodeCompleted]</OutArgument>
                                            </Assign.To>
                                            <Assign.Value>
                                              <InArgument x:TypeArguments="x:Boolean">False</InArgument>
                                            </Assign.Value>
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              </scg:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                          </Assign>
                                        </FlowStep>
                                      </FlowDecision.False>
                                    </FlowDecision>
                                    <x:Reference>__ReferenceID80</x:Reference>
                                    <FlowStep x:Name="__ReferenceID82">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">179,350</av:Point>
                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">300,410 300,536.5</av:PointCollection>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Assign DisplayName="Бач-код позиции" sap:VirtualizedContainerService.HintSize="242,60">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="x:String">[PosBatchCode]</OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="x:String">[Target.Get(Of String)("IWBPOSINPUTBATCHCODE")]</InArgument>
                                        </Assign.Value>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Assign>
                                      <FlowStep.Next>
                                        <x:Reference>__ReferenceID81</x:Reference>
                                      </FlowStep.Next>
                                    </FlowStep>
                                    <FlowStep x:Name="__ReferenceID83">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">179,190</av:Point>
                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">300,250 300,350</av:PointCollection>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[SKUID]</OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[Target.Get(of Decimal?)("SKUID")]</InArgument>
                                        </Assign.Value>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Assign>
                                      <FlowStep.Next>
                                        <x:Reference>__ReferenceID82</x:Reference>
                                      </FlowStep.Next>
                                    </FlowStep>
                                  </Flowchart>
                                </FlowStep>
                                <FlowDecision x:Name="__ReferenceID94" Condition="[TypeOf Target is IWBPosInput]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID84}">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      <av:Point x:Key="ShapeLocation">265,166.5</av:Point>
                                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                                      <av:PointCollection x:Key="TrueConnector">265,210 170,210 170,364.5</av:PointCollection>
                                      <av:PointCollection x:Key="FalseConnector">335,210 350,210 350,446.5</av:PointCollection>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <FlowDecision.False>
                                    <FlowDecision x:Name="__ReferenceID89" Condition="[TypeOf Target is IWBPos]" sap:VirtualizedContainerService.HintSize="70,87">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          <av:Point x:Key="ShapeLocation">315,446.5</av:Point>
                                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                                          <av:PointCollection x:Key="TrueConnector">315,490 200,490 200,614.5</av:PointCollection>
                                          <av:PointCollection x:Key="FalseConnector">385,490 427,490 427,757</av:PointCollection>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <FlowDecision.True>
                                        <FlowStep x:Name="__ReferenceID90">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <av:Point x:Key="ShapeLocation">78,614.5</av:Point>
                                              <av:Size x:Key="ShapeSize">244,51</av:Size>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Flowchart DisplayName="Свойства IWBPos" sap:VirtualizedContainerService.HintSize="244,51">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,107.5 301,107.5 301,176</av:PointCollection>
                                              </scg:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Flowchart.StartNode>
                                              <x:Reference>__ReferenceID86</x:Reference>
                                            </Flowchart.StartNode>
                                            <FlowStep x:Name="__ReferenceID86">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">180,176</av:Point>
                                                  <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">301,236 301,266 300,266 300,310</av:PointCollection>
                                                </scg:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                <Assign.To>
                                                  <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[SKUID]</OutArgument>
                                                </Assign.To>
                                                <Assign.Value>
                                                  <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[Target.Get(of Decimal?)("SKUID_R")]</InArgument>
                                                </Assign.Value>
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                              </Assign>
                                              <FlowStep.Next>
                                                <FlowStep x:Name="__ReferenceID85">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <av:Point x:Key="ShapeLocation">179,310</av:Point>
                                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                      <av:PointCollection x:Key="ConnectorLocation">296,470 296,510</av:PointCollection>
                                                    </scg:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <Assign DisplayName="Бач-код позиции" sap:VirtualizedContainerService.HintSize="242,60">
                                                    <Assign.To>
                                                      <OutArgument x:TypeArguments="x:String">[PosBatchCode]</OutArgument>
                                                    </Assign.To>
                                                    <Assign.Value>
                                                      <InArgument x:TypeArguments="x:String">[Target.Get(Of String)("IWBBATCHCODE")]</InArgument>
                                                    </Assign.Value>
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                  </Assign>
                                                </FlowStep>
                                              </FlowStep.Next>
                                            </FlowStep>
                                            <x:Reference>__ReferenceID85</x:Reference>
                                          </Flowchart>
                                        </FlowStep>
                                      </FlowDecision.True>
                                      <FlowDecision.False>
                                        <FlowDecision x:Name="__ReferenceID92" Condition="[TypeOf Target is Product]" sap:VirtualizedContainerService.HintSize="70,87">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              <av:Point x:Key="ShapeLocation">392,757</av:Point>
                                              <av:Size x:Key="ShapeSize">70,87</av:Size>
                                              <av:PointCollection x:Key="TrueConnector">392,800.5 277,800.5 277,925</av:PointCollection>
                                              <av:PointCollection x:Key="FalseConnector">462,800.5 473,800.5 473,1083 323,1083 323,1113</av:PointCollection>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <FlowDecision.True>
                                            <FlowStep x:Name="__ReferenceID91">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">155,925</av:Point>
                                                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                </scg:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <Flowchart DisplayName="Свойства Product" sap:VirtualizedContainerService.HintSize="614,636">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,170</av:PointCollection>
                                                  </scg:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Flowchart.StartNode>
                                                  <x:Reference>__ReferenceID88</x:Reference>
                                                </Flowchart.StartNode>
                                                <FlowStep x:Name="__ReferenceID87">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <av:Point x:Key="ShapeLocation">179,320</av:Point>
                                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                      <av:PointCollection x:Key="ConnectorLocation">313,479 313,519</av:PointCollection>
                                                    </scg:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <Assign DisplayName="Бач-код позиции" sap:VirtualizedContainerService.HintSize="242,60">
                                                    <Assign.To>
                                                      <OutArgument x:TypeArguments="x:String">[PosBatchCode]</OutArgument>
                                                    </Assign.To>
                                                    <Assign.Value>
                                                      <InArgument x:TypeArguments="x:String">[Target.Get(Of String)("PRODUCTBATCHCODE")]</InArgument>
                                                    </Assign.Value>
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                  </Assign>
                                                </FlowStep>
                                                <FlowStep x:Name="__ReferenceID88">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <av:Point x:Key="ShapeLocation">179,170</av:Point>
                                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                      <av:PointCollection x:Key="ConnectorLocation">300,230 300,320</av:PointCollection>
                                                    </scg:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                    <Assign.To>
                                                      <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[SKUID]</OutArgument>
                                                    </Assign.To>
                                                    <Assign.Value>
                                                      <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[Target.Get(of Decimal?)("SKUID_R")]</InArgument>
                                                    </Assign.Value>
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                  </Assign>
                                                  <FlowStep.Next>
                                                    <x:Reference>__ReferenceID87</x:Reference>
                                                  </FlowStep.Next>
                                                </FlowStep>
                                              </Flowchart>
                                            </FlowStep>
                                          </FlowDecision.True>
                                          <FlowDecision.False>
                                            <FlowStep x:Name="__ReferenceID93">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">223,1113</av:Point>
                                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                </scg:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <Throw Exception="[new DeveloperException(&quot;Для типа '{0}' не определены свойства, заполняемые при распозновании Batch-кода.&quot;, Target.GetType)]" sap:VirtualizedContainerService.HintSize="200,22">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                              </Throw>
                                            </FlowStep>
                                          </FlowDecision.False>
                                        </FlowDecision>
                                      </FlowDecision.False>
                                    </FlowDecision>
                                  </FlowDecision.False>
                                </FlowDecision>
                                <x:Reference>__ReferenceID89</x:Reference>
                                <x:Reference>__ReferenceID90</x:Reference>
                                <x:Reference>__ReferenceID91</x:Reference>
                                <x:Reference>__ReferenceID92</x:Reference>
                                <x:Reference>__ReferenceID93</x:Reference>
                              </Flowchart>
                              <FlowStep.Next>
                                <FlowDecision x:Name="__ReferenceID99" Condition="[InputDate.Year &lt; CurrentStartYear]" sap:VirtualizedContainerService.HintSize="70,87">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      <av:Point x:Key="ShapeLocation">265,1046.5</av:Point>
                                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                                      <av:PointCollection x:Key="TrueConnector">265,1090 130,1090 130,1139</av:PointCollection>
                                      <av:PointCollection x:Key="FalseConnector">335,510 470,510 470,584.5</av:PointCollection>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <FlowDecision.True>
                                    <FlowStep x:Name="__ReferenceID98">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">30,1139</av:Point>
                                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Throw Exception="[new PassThroughException(&quot;Проверьте системное время.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Throw>
                                    </FlowStep>
                                  </FlowDecision.True>
                                </FlowDecision>
                              </FlowStep.Next>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowStep.Next>
                    </FlowStep>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID96">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">178.895,240</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">299.895,300 299.895,330 300,330 300,360</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign DisplayName="Шаг восьмилетки" sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:Int32">[YearStep]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:Int32">8</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID95</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID102">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">178.895,130</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">299.895,190 299.895,240</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign DisplayName="Сброс искомой восьмилетки" sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:Int32">[TargetStartYear]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:Int32">0</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID96</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <x:Reference>__ReferenceID97</x:Reference>
                <x:Reference>__ReferenceID98</x:Reference>
                <x:Reference>__ReferenceID99</x:Reference>
                <x:Reference>__ReferenceID100</x:Reference>
                <x:Reference>__ReferenceID101</x:Reference>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID103</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <FlowStep x:Name="__ReferenceID114">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">274,216</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">396,267 396,306</av:PointCollection>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <Flowchart DisplayName="Проверка входных парметров" sap:VirtualizedContainerService.HintSize="244,51">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                    <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,254.5</av:PointCollection>
                    <x:Double x:Key="Height">801</x:Double>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID111</x:Reference>
                </Flowchart.StartNode>
                <FlowDecision x:Name="__ReferenceID104" Condition="[OnlyParse = False AND Target is Nothing]" sap:VirtualizedContainerService.HintSize="70,87">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">265,686.5</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="FalseConnector">485,510 570,510 570,584.5</av:PointCollection>
                      <av:PointCollection x:Key="TrueConnector">265,730 120,730 120,779</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <FlowDecision.True>
                    <FlowStep x:Name="__ReferenceID106">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">20,779</av:Point>
                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Throw Exception="[new PassThroughException(&quot;Не передан обязательный для заполнения параметр Target.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Throw>
                    </FlowStep>
                  </FlowDecision.True>
                </FlowDecision>
                <FlowDecision x:Name="__ReferenceID110" Condition="[string.IsNullOrEmpty(BatchCode)]" sap:VirtualizedContainerService.HintSize="70,87">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">265,506.5</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="FalseConnector">335,550 360,550 360,656.5 300,656.5 300,686.5</av:PointCollection>
                      <av:PointCollection x:Key="TrueConnector">265,550 140,550 140,589</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <FlowDecision.True>
                    <FlowStep x:Name="__ReferenceID105">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">40,589</av:Point>
                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Throw Exception="[new PassThroughException(&quot;BatchCode не указан.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Throw>
                    </FlowStep>
                  </FlowDecision.True>
                  <FlowDecision.False>
                    <x:Reference>__ReferenceID104</x:Reference>
                  </FlowDecision.False>
                </FlowDecision>
                <x:Reference>__ReferenceID105</x:Reference>
                <x:Reference>__ReferenceID106</x:Reference>
                <FlowStep x:Name="__ReferenceID111">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">178,254.5</av:Point>
                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">300,305.5 300,506.5</av:PointCollection>
                    </scg:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Flowchart DisplayName="Разбираем BpContext" sap:VirtualizedContainerService.HintSize="614,636">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,200</av:PointCollection>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <Flowchart.StartNode>
                      <x:Reference>__ReferenceID109</x:Reference>
                    </Flowchart.StartNode>
                    <FlowStep x:Name="__ReferenceID109">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">179,200</av:Point>
                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                          <av:PointCollection x:Key="ConnectorLocation">300,260 300,350</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                        <Assign.To>
                          <OutArgument x:TypeArguments="x:String">[BatchCode]</OutArgument>
                        </Assign.To>
                        <Assign.Value>
                          <InArgument x:TypeArguments="x:String">[BpContext.Get(Of String)("BatchCode")]</InArgument>
                        </Assign.Value>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Assign>
                      <FlowStep.Next>
                        <FlowStep x:Name="__ReferenceID107">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">179,350</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,410 300,500</av:PointCollection>
                            </scg:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="wbo:WMSBusinessObject">[Target]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="wbo:WMSBusinessObject">[BpContext.Get(Of WMSBusinessObject)("Target")]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID108">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">179,500</av:Point>
                                  <av:Size x:Key="ShapeSize">242,60</av:Size>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                <Assign.To>
                                  <OutArgument x:TypeArguments="x:Boolean">[OnlyParse]</OutArgument>
                                </Assign.To>
                                <Assign.Value>
                                  <InArgument x:TypeArguments="x:Boolean">[BpContext.Get(Of Boolean)("OnlyParse")]</InArgument>
                                </Assign.Value>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </Assign>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowStep.Next>
                    </FlowStep>
                    <x:Reference>__ReferenceID107</x:Reference>
                    <x:Reference>__ReferenceID108</x:Reference>
                  </Flowchart>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID110</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
              </Flowchart>
              <FlowStep.Next>
                <x:Reference>__ReferenceID112</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <x:Reference>__ReferenceID113</x:Reference>
          </Flowchart>
        </TryCatch.Try>
        <TryCatch.Catches>
          <Catch x:TypeArguments="s:Exception" sap:VirtualizedContainerService.HintSize="404,21">
            <sap:WorkflowViewStateService.ViewState>
              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                <x:Boolean x:Key="IsPinned">False</x:Boolean>
              </scg:Dictionary>
            </sap:WorkflowViewStateService.ViewState>
            <ActivityAction x:TypeArguments="s:Exception">
              <ActivityAction.Argument>
                <DelegateInArgument x:TypeArguments="s:Exception" Name="exMain" />
              </ActivityAction.Argument>
              <wada:ErrorHandlerActivity DisplayName="Обработчик ошибок" Error="[exMain]" ForceError="False" sap:VirtualizedContainerService.HintSize="200,22" IsActivitiesStackIncluded="True" IsSendMail="False" Message="[Nothing]" Rethrow="True" ShowErorDialog="False" Title="[Nothing]" />
            </ActivityAction>
          </Catch>
        </TryCatch.Catches>
      </TryCatch>
    </FlowStep>
    <FlowStep x:Name="__ReferenceID116">
      <sap:WorkflowViewStateService.ViewState>
        <scg:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">130,226</av:Point>
          <av:Size x:Key="ShapeSize">390,147</av:Size>
          <av:PointCollection x:Key="ConnectorLocation">325,373 325,403 252,403 252,515</av:PointCollection>
        </scg:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <wada:CommentActivity Comment="1. Target приходит как WMSBusinessObject.&#xA;  Поэтому для получения  или  изменения&#xA;  свойств из Target необходимо приводить Target к нужному типу.&#xA;2. WF понимает сущности:&#xA;2.1. IWBPosInput,&#xA;2.2. IWBPos,&#xA;2.3. Product." DisplayName="Комментарий" sap:VirtualizedContainerService.HintSize="390,147">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </wada:CommentActivity>
      <FlowStep.Next>
        <x:Reference>__ReferenceID115</x:Reference>
      </FlowStep.Next>
    </FlowStep>
  </Flowchart>
</Activity>