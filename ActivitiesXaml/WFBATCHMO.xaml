<Activity mc:Ignorable="sads sap" x:Class="{x:Null}"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:bm="clr-namespace:BLToolkit.Mapping;assembly=BLToolkit.4"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System"
 xmlns:mv1="clr-namespace:Microsoft.VisualBasic;assembly=Microsoft.VisualBasic"
 xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities"
 xmlns:mvc="clr-namespace:Microsoft.VisualBasic.CompilerServices;assembly=Microsoft.VisualBasic"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:s1="clr-namespace:System;assembly=System"
 xmlns:s2="clr-namespace:System;assembly=System.Core"
 xmlns:s3="clr-namespace:System;assembly=System.ServiceModel"
 xmlns:s4="clr-namespace:System;assembly=System.ComponentModel.Composition"
 xmlns:s5="clr-namespace:System;assembly=System.Runtime"
 xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System"
 xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core"
 xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel"
 xmlns:st="clr-namespace:System.Text;assembly=mscorlib"
 xmlns:sxs="clr-namespace:System.Xml.Serialization;assembly=System.Xml"
 xmlns:wada="clr-namespace:wmsMLC.Activities.Dialogs.Activities;assembly=wmsMLC.Activities.Dialogs"
 xmlns:wag="clr-namespace:wmsMLC.Activities.General;assembly=wmsMLC.Activities.General"
 xmlns:wav="clr-namespace:wmsMLC.Activities.ViewInteraction;assembly=wmsMLC.Activities.ViewInteraction"
 xmlns:wbmp="clr-namespace:wmsMLC.Business.Managers.Processes;assembly=wmsMLC.Business.Managers"
 xmlns:wbo="clr-namespace:wmsMLC.Business.Objects;assembly=wmsMLC.Business.Objects"
 xmlns:wg="clr-namespace:wmsMLC.General;assembly=wmsMLC.General"
 xmlns:wgb="clr-namespace:wmsMLC.General.BL;assembly=wmsMLC.General.BL"
 xmlns:wgbv="clr-namespace:wmsMLC.General.BL.Validation;assembly=wmsMLC.General.BL"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="BpContext" Type="InArgument(wgb:BpContext)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>654,676</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces for internal implementation</mva:VisualBasic.Settings>
  <Flowchart DisplayName="Основной блок" sap:VirtualizedContainerService.HintSize="614,636">
    <Flowchart.Variables>
      <Variable x:TypeArguments="x:String" Name="FactoryBatchCode2" />
      <Variable x:TypeArguments="s:Nullable(s:DateTime)" Name="ManufactureDate" />
      <Variable x:TypeArguments="s:DateTime" Default="[BPH.GetSystemDate()]" Name="CurrentDate" />
      <Variable x:TypeArguments="x:String" Name="SerialNumber" />
      <Variable x:TypeArguments="wbo:Factory" Name="FactoryObject" />
      <Variable x:TypeArguments="x:String" Name="FactoryName" />
      <Variable x:TypeArguments="x:String" Name="FactoryCode" />
      <Variable x:TypeArguments="x:String" Default="[Nothing]" Name="ErrorMessage" />
      <Variable x:TypeArguments="s:Nullable(x:Decimal)" Name="FactoryID" />
      <Variable x:TypeArguments="scg1:List(wbo:Factory)" Default="[new List(of Factory)]" Name="FactoryList" />
      <Variable x:TypeArguments="x:Decimal" Name="MandantID" />
      <Variable x:TypeArguments="wbo:Art" Name="Art" />
      <Variable x:TypeArguments="x:String" Name="BatchCode" />
      <Variable x:TypeArguments="wbo:WMSBusinessObject" Name="Target" />
      <Variable x:TypeArguments="x:Boolean" Name="OnlyParse" />
      <Variable x:TypeArguments="x:String" Name="ArtCode" />
    </Flowchart.Variables>
    <sap:WorkflowViewStateService.ViewState>
      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">False</x:Boolean>
        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
        <av:Size x:Key="ShapeSize">60,75</av:Size>
        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,235.5</av:PointCollection>
      </scg1:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <Flowchart.StartNode>
      <x:Reference>__ReferenceID209</x:Reference>
    </Flowchart.StartNode>
    <FlowStep x:Name="__ReferenceID209">
      <sap:WorkflowViewStateService.ViewState>
        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">104,235.5</av:Point>
          <av:Size x:Key="ShapeSize">390,147</av:Size>
          <av:PointCollection x:Key="ConnectorLocation">299,382.5 299,412.5 300,412.5 300,524.5</av:PointCollection>
        </scg1:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <wada:CommentActivity Comment="1. Target приходит как WMSBusinessObject.&#xA;  Поэтому для получения  или  изменения&#xA;  свойств из Target необходимо приводить Target к нужному типу.&#xA;2. WF понимает сущности:&#xA;2.1. IWBPosInput,&#xA;2.2. IWBPos,&#xA;2.3. Product." DisplayName="Комментарий" sap:VirtualizedContainerService.HintSize="390,147">
        <sap:WorkflowViewStateService.ViewState>
          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg1:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </wada:CommentActivity>
      <FlowStep.Next>
        <FlowStep x:Name="__ReferenceID208">
          <sap:WorkflowViewStateService.ViewState>
            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
              <av:Point x:Key="ShapeLocation">178,524.5</av:Point>
              <av:Size x:Key="ShapeSize">244,51</av:Size>
            </scg1:Dictionary>
          </sap:WorkflowViewStateService.ViewState>
          <TryCatch DisplayName="TryCatch Основной блок" sap:VirtualizedContainerService.HintSize="244,51">
            <sap:WorkflowViewStateService.ViewState>
              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
              </scg1:Dictionary>
            </sap:WorkflowViewStateService.ViewState>
            <TryCatch.Try>
              <Flowchart DisplayName="Flowchart Основной блок" sap:VirtualizedContainerService.HintSize="975,2008">
                <sap:WorkflowViewStateService.ViewState>
                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                    <av:Point x:Key="ShapeLocation">350,2.5</av:Point>
                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                    <x:Double x:Key="Width">961</x:Double>
                    <x:Double x:Key="Height">1972</x:Double>
                    <av:PointCollection x:Key="ConnectorLocation">380,77.5 380,107.5 391,107.5 391,271</av:PointCollection>
                  </scg1:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <Flowchart.StartNode>
                  <x:Reference>__ReferenceID207</x:Reference>
                </Flowchart.StartNode>
                <FlowStep x:Name="__ReferenceID37">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">651,1785.5</av:Point>
                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Throw DisplayName="Была ошибка при разборе" Exception="[new PassThroughException(ErrorMessage)]" sap:VirtualizedContainerService.HintSize="200,22">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Throw>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID36">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">389,1921</av:Point>
                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Flowchart DisplayName="Заполнение Target" sap:VirtualizedContainerService.HintSize="745,937">
                    <Flowchart.Variables>
                      <Variable x:TypeArguments="s:Nullable(x:Decimal)" Name="LifeTime" />
                      <Variable x:TypeArguments="x:String" Name="LifeTimeMeasure" />
                      <Variable x:TypeArguments="s:DateTime" Name="ExpiryDate" />
                    </Flowchart.Variables>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                        <av:Point x:Key="ShapeLocation">410,12.5</av:Point>
                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                        <av:PointCollection x:Key="ConnectorLocation">440,87.5 440,116.5</av:PointCollection>
                        <x:Double x:Key="Width">731</x:Double>
                        <x:Double x:Key="Height">901</x:Double>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <Flowchart.StartNode>
                      <x:Reference>__ReferenceID35</x:Reference>
                    </Flowchart.StartNode>
                    <FlowSwitch x:TypeArguments="x:String" x:Name="__ReferenceID28" Expression="[LifeTimeMeasure.ToUpper()]" sap:VirtualizedContainerService.HintSize="70,87">
                      <FlowSwitch.Default>
                        <FlowStep x:Name="__ReferenceID34">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">0,589</av:Point>
                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Throw Exception="[new PassThroughException(&quot;Для артикула '{0}' определна неизвестная единица измерения срока жизни товара '{1}'.&quot;, ArtCode, LifeTimeMeasure)]" sap:VirtualizedContainerService.HintSize="200,22">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Throw>
                        </FlowStep>
                      </FlowSwitch.Default>
                      <sap:WorkflowViewStateService.ViewState>
                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">165,466.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="DAYConnector">235,488.25 265,488.25 265,440 369,440</av:PointCollection>
                          <av:PointCollection x:Key="MONConnector">235,510 369,510</av:PointCollection>
                          <av:PointCollection x:Key="ANNConnector">235,531.75 265,531.75 265,590 369,590</av:PointCollection>
                          <av:PointCollection x:Key="Default">165,510 100,510 100,589</av:PointCollection>
                        </scg1:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <FlowStep x:Key="DAY" x:Name="__ReferenceID17">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">369,410</av:Point>
                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">611,440 640,440 640,724.5 370,724.5 370,754.5</av:PointCollection>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Assign sap:VirtualizedContainerService.HintSize="242,60">
                          <Assign.To>
                            <OutArgument x:TypeArguments="s:DateTime">[ExpiryDate]</OutArgument>
                          </Assign.To>
                          <Assign.Value>
                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddDays(Convert.ToInt32(LifeTime))]</InArgument>
                          </Assign.Value>
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                        </Assign>
                        <FlowStep.Next>
                          <FlowStep x:Name="__ReferenceID16">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">248,754.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Flowchart Заполняем поля объекта" sap:VirtualizedContainerService.HintSize="614,1171">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,166.5</av:PointCollection>
                                  <x:Double x:Key="Height">1135</x:Double>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID15</x:Reference>
                              </Flowchart.StartNode>
                              <FlowStep x:Name="__ReferenceID3">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">48,364.5</av:Point>
                                    <av:Size x:Key="ShapeSize">244,51</av:Size>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Flowchart DisplayName="Свойства IWBPosInput" sap:VirtualizedContainerService.HintSize="244,51">
                                  <Flowchart.Variables>
                                    <Variable x:TypeArguments="wbo:IWBPosInput" Name="TargetIWBPosInput" />
                                  </Flowchart.Variables>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                      <av:Size x:Key="ShapeSize">60,75</av:Size>
                                      <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,170</av:PointCollection>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Flowchart.StartNode>
                                    <x:Reference>__ReferenceID2</x:Reference>
                                  </Flowchart.StartNode>
                                  <FlowStep x:Name="__ReferenceID0">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">179,480</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:Boolean">[TargetIWBPosInput.IsBpBatchcodeCompleted]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:Boolean">True</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                  <FlowStep x:Name="__ReferenceID1">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">200,331.5</av:Point>
                                        <av:Size x:Key="ShapeSize">200,57</av:Size>
                                        <av:PointCollection x:Key="ConnectorLocation">300,388.5 300,480</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:IWBPosInput" DisplayName="Заполняем поля объекта" sap:VirtualizedContainerService.HintSize="200,57" Object="[TargetIWBPosInput]">
                                      <wag:MultipleDynamicAssignActivity.Properties>
                                        <InArgument x:TypeArguments="x:String" x:Key="[IWBPOSSERIALNUMBER]">[SerialNumber]</InArgument>
                                        <InArgument x:TypeArguments="s:DateTime" x:Key="[IWBPOSEXPIRYDATE]">[ExpiryDate]</InArgument>
                                        <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[IWBPOSPRODUCTDATE]">[ManufactureDate]</InArgument>
                                      </wag:MultipleDynamicAssignActivity.Properties>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </wag:MultipleDynamicAssignActivity>
                                    <FlowStep.Next>
                                      <x:Reference>__ReferenceID0</x:Reference>
                                    </FlowStep.Next>
                                  </FlowStep>
                                  <FlowStep x:Name="__ReferenceID2">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">179,170</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                        <av:PointCollection x:Key="ConnectorLocation">300,230 300,331.5</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="wbo:IWBPosInput">[TargetIWBPosInput]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="wbo:IWBPosInput">[CType(Target, IWBPosInput)]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                    <FlowStep.Next>
                                      <x:Reference>__ReferenceID1</x:Reference>
                                    </FlowStep.Next>
                                  </FlowStep>
                                </Flowchart>
                              </FlowStep>
                              <FlowDecision x:Name="__ReferenceID15" Condition="[TypeOf Target is IWBPosInput]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID3}">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,166.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,210 170,210 170,364.5</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">335,210 350,210 350,446.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowDecision.False>
                                  <FlowDecision x:Name="__ReferenceID10" Condition="[TypeOf Target is IWBPos]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">315,446.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">315,490 200,490 200,614.5</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">385,490 427,490 427,757</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID11">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">78,614.5</av:Point>
                                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Flowchart DisplayName="Свойства IWBPos" sap:VirtualizedContainerService.HintSize="244,51">
                                          <Flowchart.Variables>
                                            <Variable x:TypeArguments="wbo:IWBPos" Name="TargetIWBPos" />
                                          </Flowchart.Variables>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,170</av:PointCollection>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Flowchart.StartNode>
                                            <x:Reference>__ReferenceID5</x:Reference>
                                          </Flowchart.StartNode>
                                          <FlowStep x:Name="__ReferenceID5">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">179,170</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">300,230 300,351.5</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="wbo:IWBPos">[TargetIWBPos]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="wbo:IWBPos">[CType(Target, IWBPos)]</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <FlowStep x:Name="__ReferenceID4">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">200,351.5</av:Point>
                                                    <av:Size x:Key="ShapeSize">200,57</av:Size>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:IWBPos" DisplayName="Заполняем поля объекта" sap:VirtualizedContainerService.HintSize="200,57" Object="[TargetIWBPos]">
                                                  <wag:MultipleDynamicAssignActivity.Properties>
                                                    <InArgument x:TypeArguments="x:String" x:Key="[IWBPOSSERIALNUMBER]">[SerialNumber]</InArgument>
                                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[IWBPOSEXPIRYDATE]">[ExpiryDate]</InArgument>
                                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[IWBPOSPRODUCTDATE]">[ManufactureDate]</InArgument>
                                                  </wag:MultipleDynamicAssignActivity.Properties>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </wag:MultipleDynamicAssignActivity>
                                              </FlowStep>
                                            </FlowStep.Next>
                                          </FlowStep>
                                          <x:Reference>__ReferenceID4</x:Reference>
                                        </Flowchart>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowDecision x:Name="__ReferenceID13" Condition="[TypeOf Target is Product]" sap:VirtualizedContainerService.HintSize="70,87">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            <av:Point x:Key="ShapeLocation">392,757</av:Point>
                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                            <av:PointCollection x:Key="TrueConnector">392,800.5 277,800.5 277,925</av:PointCollection>
                                            <av:PointCollection x:Key="FalseConnector">462,800.5 473,800.5 473,1083 323,1083 323,1113</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <FlowDecision.True>
                                          <FlowStep x:Name="__ReferenceID12">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">155,925</av:Point>
                                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Flowchart DisplayName="Свойства Product" sap:VirtualizedContainerService.HintSize="614,880">
                                              <Flowchart.Variables>
                                                <Variable x:TypeArguments="wbo:Product" Name="TargetProduct" />
                                              </Flowchart.Variables>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,170</av:PointCollection>
                                                  <x:Double x:Key="Height">843.5</x:Double>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <Flowchart.StartNode>
                                                <x:Reference>__ReferenceID9</x:Reference>
                                              </Flowchart.StartNode>
                                              <FlowStep x:Name="__ReferenceID9">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">179,170</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">300,230 300,331.5</av:PointCollection>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="wbo:Product">[TargetProduct]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="wbo:Product">[CType(Target, Product)]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                                <FlowStep.Next>
                                                  <FlowStep x:Name="__ReferenceID6">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">200,331.5</av:Point>
                                                        <av:Size x:Key="ShapeSize">200,57</av:Size>
                                                        <av:PointCollection x:Key="ConnectorLocation">300,388.5 300,418.5 310,418.5 310,507</av:PointCollection>
                                                      </scg1:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:Product" DisplayName="Заполняем поля объекта" sap:VirtualizedContainerService.HintSize="200,57" Object="[TargetProduct]">
                                                      <wag:MultipleDynamicAssignActivity.Properties>
                                                        <InArgument x:TypeArguments="x:String" x:Key="[PRODUCTSERIALNUMBER]">[SerialNumber]</InArgument>
                                                        <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[PRODUCTDATE]">[ManufactureDate]</InArgument>
                                                        <InArgument x:TypeArguments="s:Nullable(s:DateTime)" x:Key="[PRODUCTEXPIRYDATE]">[ExpiryDate]</InArgument>
                                                      </wag:MultipleDynamicAssignActivity.Properties>
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg1:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </wag:MultipleDynamicAssignActivity>
                                                    <FlowStep.Next>
                                                      <FlowStep x:Name="__ReferenceID8">
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <av:Point x:Key="ShapeLocation">104,507</av:Point>
                                                            <av:Size x:Key="ShapeSize">412,74</av:Size>
                                                            <av:PointCollection x:Key="ConnectorLocation">310,581 310,611 308.5,611 308.5,689.5</av:PointCollection>
                                                          </scg1:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                        <wada:CommentActivity Comment="Передаем список свойств измененных при разшифровке batch-кода.&#xA;Используется в БП Корректировка товара" DisplayName="Комментарий" sap:VirtualizedContainerService.HintSize="412,74">
                                                          <sap:WorkflowViewStateService.ViewState>
                                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                            </scg1:Dictionary>
                                                          </sap:WorkflowViewStateService.ViewState>
                                                        </wada:CommentActivity>
                                                        <FlowStep.Next>
                                                          <FlowStep x:Name="__ReferenceID7">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <av:Point x:Key="ShapeLocation">199.5,689.5</av:Point>
                                                                <av:Size x:Key="ShapeSize">218,134</av:Size>
                                                                <av:PointCollection x:Key="ConnectorLocation">495.5,491.5 495.5,547.5</av:PointCollection>
                                                              </scg1:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                            <InvokeMethod DisplayName="PropertyNames" sap:VirtualizedContainerService.HintSize="218,134" MethodName="Set">
                                                              <InvokeMethod.GenericTypeArguments>
                                                                <x:Type Type="s:String[]" />
                                                              </InvokeMethod.GenericTypeArguments>
                                                              <InvokeMethod.TargetObject>
                                                                <InArgument x:TypeArguments="wgb:BpContext">[BpContext]</InArgument>
                                                              </InvokeMethod.TargetObject>
                                                              <sap:WorkflowViewStateService.ViewState>
                                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                </scg1:Dictionary>
                                                              </sap:WorkflowViewStateService.ViewState>
                                                              <InArgument x:TypeArguments="x:String">PropertyNames</InArgument>
                                                              <InArgument x:TypeArguments="s:String[]">[new string(){"PRODUCTDATE", "PRODUCTEXPIRYDATE", "PRODUCTSERIALNUMBER"}]</InArgument>
                                                            </InvokeMethod>
                                                          </FlowStep>
                                                        </FlowStep.Next>
                                                      </FlowStep>
                                                    </FlowStep.Next>
                                                  </FlowStep>
                                                </FlowStep.Next>
                                              </FlowStep>
                                              <x:Reference>__ReferenceID6</x:Reference>
                                              <x:Reference>__ReferenceID7</x:Reference>
                                              <x:Reference>__ReferenceID8</x:Reference>
                                            </Flowchart>
                                          </FlowStep>
                                        </FlowDecision.True>
                                        <FlowDecision.False>
                                          <FlowStep x:Name="__ReferenceID14">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">223,1113</av:Point>
                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Throw Exception="[new DeveloperException(&quot;Для типа '{0}' не определены свойства, заполняемые при распозновании Batch-кода.&quot;, Target.GetType)]" sap:VirtualizedContainerService.HintSize="200,22">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Throw>
                                          </FlowStep>
                                        </FlowDecision.False>
                                      </FlowDecision>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowDecision.False>
                              </FlowDecision>
                              <x:Reference>__ReferenceID10</x:Reference>
                              <x:Reference>__ReferenceID11</x:Reference>
                              <x:Reference>__ReferenceID12</x:Reference>
                              <x:Reference>__ReferenceID13</x:Reference>
                              <x:Reference>__ReferenceID14</x:Reference>
                            </Flowchart>
                          </FlowStep>
                        </FlowStep.Next>
                      </FlowStep>
                      <FlowStep x:Key="MON" x:Name="__ReferenceID18">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">369,480</av:Point>
                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">611,510 640,510 640,724.5 370,724.5 370,754.5</av:PointCollection>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Assign sap:VirtualizedContainerService.HintSize="242,60">
                          <Assign.To>
                            <OutArgument x:TypeArguments="s:DateTime">[ExpiryDate]</OutArgument>
                          </Assign.To>
                          <Assign.Value>
                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddMonths(Convert.ToInt32(LifeTime))]</InArgument>
                          </Assign.Value>
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                        </Assign>
                        <FlowStep.Next>
                          <x:Reference>__ReferenceID16</x:Reference>
                        </FlowStep.Next>
                      </FlowStep>
                      <FlowStep x:Key="ANN" x:Name="__ReferenceID19">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">369,560</av:Point>
                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">611,590 640,590 640,724.5 370,724.5 370,754.5</av:PointCollection>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Assign sap:VirtualizedContainerService.HintSize="242,60">
                          <Assign.To>
                            <OutArgument x:TypeArguments="s:DateTime">[ExpiryDate]</OutArgument>
                          </Assign.To>
                          <Assign.Value>
                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(Convert.ToInt32(LifeTime))]</InArgument>
                          </Assign.Value>
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                        </Assign>
                        <FlowStep.Next>
                          <x:Reference>__ReferenceID16</x:Reference>
                        </FlowStep.Next>
                      </FlowStep>
                    </FlowSwitch>
                    <x:Reference>__ReferenceID17</x:Reference>
                    <x:Reference>__ReferenceID18</x:Reference>
                    <x:Reference>__ReferenceID19</x:Reference>
                    <FlowDecision x:Name="__ReferenceID35" Condition="[ManufactureDate.HasValue]" sap:VirtualizedContainerService.HintSize="70,87">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">405,116.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="TrueConnector">405,160 375,160 375,220 342,220</av:PointCollection>
                          <av:PointCollection x:Key="FalseConnector">475,160 610,160 610,200</av:PointCollection>
                        </scg1:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <FlowDecision.True>
                        <FlowStep x:Name="__ReferenceID29">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">98,194.5</av:Point>
                              <av:Size x:Key="ShapeSize">244,51</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">220,245.5 220,275.5 272.5,275.5 272.5,316.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart DisplayName="Проверка и получение времени жизни" sap:VirtualizedContainerService.HintSize="244,51">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                <av:Point x:Key="ShapeLocation">340,2.5</av:Point>
                                <av:Size x:Key="ShapeSize">60,75</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">370,77.5 370,107.5 230,107.5 230,226.5</av:PointCollection>
                                <x:Double x:Key="Height">1121</x:Double>
                                <x:Double x:Key="Width">770</x:Double>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart.StartNode>
                              <x:Reference>__ReferenceID27</x:Reference>
                            </Flowchart.StartNode>
                            <FlowDecision x:Name="__ReferenceID27" Condition="[Art is Nothing]" sap:VirtualizedContainerService.HintSize="70,87">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">195,226.5</av:Point>
                                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                                  <av:PointCollection x:Key="FalseConnector">265,270 400,270 400,440</av:PointCollection>
                                  <av:PointCollection x:Key="TrueConnector">195,270 120,270 120,369</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <FlowDecision.True>
                                <FlowStep x:Name="__ReferenceID20">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">20,369</av:Point>
                                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Throw Exception="[new DeveloperException(&quot;Не указан артикул.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Throw>
                                </FlowStep>
                              </FlowDecision.True>
                              <FlowDecision.False>
                                <FlowStep x:Name="__ReferenceID21">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">279,440</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      <av:PointCollection x:Key="ConnectorLocation">400,500 400,596.5</av:PointCollection>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[LifeTime]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[Art.Get(of Decimal?)("ARTLIFETIME")]</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                  <FlowStep.Next>
                                    <FlowDecision x:Name="__ReferenceID23" Condition="[LifeTime.HasValue = false]" sap:VirtualizedContainerService.HintSize="70,87">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          <av:Point x:Key="ShapeLocation">365,596.5</av:Point>
                                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                                          <av:PointCollection x:Key="FalseConnector">435,640 465,640 465,820 320,820 320,850</av:PointCollection>
                                          <av:PointCollection x:Key="TrueConnector">365,640 110,640 110,779</av:PointCollection>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <FlowDecision.True>
                                        <FlowStep x:Name="__ReferenceID24">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <av:Point x:Key="ShapeLocation">10,779</av:Point>
                                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Throw Exception="[new PassThroughException(string.Format(&quot;Для артикула '{0}' не удалось определить время жизни товара.&quot;, ArtCode))]" sap:VirtualizedContainerService.HintSize="200,22">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                          </Throw>
                                        </FlowStep>
                                      </FlowDecision.True>
                                      <FlowDecision.False>
                                        <FlowStep x:Name="__ReferenceID22">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <av:Point x:Key="ShapeLocation">199,850</av:Point>
                                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                                              <av:PointCollection x:Key="ConnectorLocation">320,910 320,940 360,940 360,956.5</av:PointCollection>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                            <Assign.To>
                                              <OutArgument x:TypeArguments="x:String">[LifeTimeMeasure]</OutArgument>
                                            </Assign.To>
                                            <Assign.Value>
                                              <InArgument x:TypeArguments="x:String">[Art.Get(of String)("ARTLIFETIMEMEASURE")]</InArgument>
                                            </Assign.Value>
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                          </Assign>
                                          <FlowStep.Next>
                                            <FlowDecision x:Name="__ReferenceID26" Condition="[string.IsNullOrEmpty(LifeTimeMeasure)]" sap:VirtualizedContainerService.HintSize="70,87">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  <av:Point x:Key="ShapeLocation">325,956.5</av:Point>
                                                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                  <av:PointCollection x:Key="FalseConnector">365,660 390,660 390,740 330,740 330,770</av:PointCollection>
                                                  <av:PointCollection x:Key="TrueConnector">325,1000 110,1000 110,1099</av:PointCollection>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <FlowDecision.True>
                                                <FlowStep x:Name="__ReferenceID25">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <av:Point x:Key="ShapeLocation">10,1099</av:Point>
                                                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <Throw Exception="[new PassThroughException(string.Format(&quot;Для артикула '{0}' не удалось определить единицу измерения времени жизни товара.&quot;, ArtCode))]" sap:VirtualizedContainerService.HintSize="200,22">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      </scg1:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                  </Throw>
                                                </FlowStep>
                                              </FlowDecision.True>
                                            </FlowDecision>
                                          </FlowStep.Next>
                                        </FlowStep>
                                      </FlowDecision.False>
                                    </FlowDecision>
                                  </FlowStep.Next>
                                </FlowStep>
                              </FlowDecision.False>
                            </FlowDecision>
                            <x:Reference>__ReferenceID20</x:Reference>
                            <x:Reference>__ReferenceID21</x:Reference>
                            <x:Reference>__ReferenceID22</x:Reference>
                            <x:Reference>__ReferenceID23</x:Reference>
                            <x:Reference>__ReferenceID24</x:Reference>
                            <x:Reference>__ReferenceID25</x:Reference>
                            <x:Reference>__ReferenceID26</x:Reference>
                          </Flowchart>
                          <FlowStep.Next>
                            <FlowDecision x:Name="__ReferenceID31" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID28}">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">255,316.5</av:Point>
                                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                                  <av:PointCollection x:Key="TrueConnector">255,360 200,360 200,466.5</av:PointCollection>
                                  <av:PointCollection x:Key="FalseConnector">325,360 510,360</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <FlowDecision.False>
                                <FlowStep x:Name="__ReferenceID33">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">510,349</av:Point>
                                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Throw Exception="[new PassThroughException(ErrorMessage)]" sap:VirtualizedContainerService.HintSize="200,22">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Throw>
                                </FlowStep>
                              </FlowDecision.False>
                            </FlowDecision>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowDecision.True>
                      <FlowDecision.False>
                        <FlowStep x:Name="__ReferenceID30">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">489,200</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">610,260 610,289</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Не удалось определить дату производства")]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID32">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">510,289</av:Point>
                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Throw Exception="[new PassThroughException(ErrorMessage)]" sap:VirtualizedContainerService.HintSize="200,22">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </Throw>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowDecision.False>
                    </FlowDecision>
                    <x:Reference>__ReferenceID29</x:Reference>
                    <x:Reference>__ReferenceID30</x:Reference>
                    <x:Reference>__ReferenceID31</x:Reference>
                    <x:Reference>__ReferenceID32</x:Reference>
                    <x:Reference>__ReferenceID33</x:Reference>
                    <x:Reference>__ReferenceID34</x:Reference>
                    <x:Reference>__ReferenceID16</x:Reference>
                  </Flowchart>
                </FlowStep>
                <FlowDecision x:Name="__ReferenceID39" Condition="[string.IsNullOrEmpty(ErrorMessage)]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID36}" False="{x:Reference __ReferenceID37}">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">566,1663</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="TrueConnector">566,1706.5 511,1706.5 511,1921</av:PointCollection>
                      <av:PointCollection x:Key="FalseConnector">636,1706.5 751,1706.5 751,1785.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                </FlowDecision>
                <FlowStep x:Name="__ReferenceID38">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">102,1640.5</av:Point>
                      <av:Size x:Key="ShapeSize">218,134</av:Size>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <InvokeMethod DisplayName="ParseResult" sap:VirtualizedContainerService.HintSize="218,134" MethodName="Set">
                    <InvokeMethod.GenericTypeArguments>
                      <x:Type Type="x:String" />
                    </InvokeMethod.GenericTypeArguments>
                    <InvokeMethod.TargetObject>
                      <InArgument x:TypeArguments="wgb:BpContext">[BpContext]</InArgument>
                    </InvokeMethod.TargetObject>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <InArgument x:TypeArguments="x:String">ParseResult</InArgument>
                    <InArgument x:TypeArguments="x:String">[iif(string.IsNullOrEmpty(errorMessage), string.Format("Фабрика={0} ({1});Дата производства={2};Серийный номер={3}", FactoryName, FactoryCode, ManufactureDate, SerialNumber), errorMessage ).toString]</InArgument>
                  </InvokeMethod>
                </FlowStep>
                <FlowDecision x:Name="__ReferenceID40" Condition="[OnlyParse]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID38}" False="{x:Reference __ReferenceID39}">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">386,1533</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="FalseConnector">456,1576.5 601,1576.5 601,1663</av:PointCollection>
                      <av:PointCollection x:Key="TrueConnector">386,1576.5 211,1576.5 211,1640.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                </FlowDecision>
                <FlowStep x:Name="__ReferenceID41">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">530,1376.5</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">530,1406.5 421,1406.5 421,1533</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:String">[FactoryName]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:String">[FactoryObject.Get(of string)("FACTORYNAME")]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID40</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID42">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">529.895,1276.5</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">650.895,1336.5 650.895,1366.5 651,1366.5 651,1376.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[FactoryID]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[FactoryObject.GetKey(Of Decimal)]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID41</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID44">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">530,1196.5</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">651,1256.5 650.895,1256.5 650.895,1276.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="wbo:Factory">[FactoryObject]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="wbo:Factory">[FactoryList(0)]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID42</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID43">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">260,1266.5</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">381,1326.5 381,1633 583.5,1633 583.5,1663</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:String">[string.Format("Не найдена фабрика с кодом '{0}'.", FactoryCode)]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID39</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowDecision x:Name="__ReferenceID45" Condition="[not(not(FactoryList is Nothing) andAlso FactoryList.Count &gt; 0)]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID43}" False="{x:Reference __ReferenceID44}">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">386,1153</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="FalseConnector">456,1196.5 486,1196.5 486,1226.5 530,1226.5</av:PointCollection>
                      <av:PointCollection x:Key="TrueConnector">386,1196.5 381,1196.5 381,1266.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                </FlowDecision>
                <FlowStep x:Name="__ReferenceID46">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">551,1155.5</av:Point>
                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">551,1166.5 521,1166.5 521,1123 438.5,1123 438.5,1153</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <wag:GetByFilterActivity x:TypeArguments="wbo:Factory" AttrEntity="{x:Null}" DisplayName="Поиск ID фабрики по коду " Filter="[string.Format(&quot;FACTORYCODE = '{0}' and PARTNERID_R = {1}&quot;, FactoryCode, MandantID)]" sap:VirtualizedContainerService.HintSize="200,22" Mode="Full" Result="[FactoryList]">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </wag:GetByFilterActivity>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID45</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID47">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">530,1076.5</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">651,1136.5 651,1155.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:Decimal">[MandantID]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:Decimal">[Art.Get(of Decimal)("MANDANTID")]</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID46</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID48">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">551,995.5</av:Point>
                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">651,1017.5 651,1076.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <wag:GetByKeyActivity x:TypeArguments="wbo:Art" DisplayName="Артикул" sap:VirtualizedContainerService.HintSize="200,22" Key="[ArtCode]" Mode="Partial" Result="[Art]">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </wag:GetByKeyActivity>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID47</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowDecision x:Name="__ReferenceID179" Condition="[FactoryCode is Nothing]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID40}" False="{x:Reference __ReferenceID48}">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      <av:Point x:Key="ShapeLocation">356,883</av:Point>
                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                      <av:PointCollection x:Key="TrueConnector">356,926.5 241,926.5 241,1503 421,1503 421,1533</av:PointCollection>
                      <av:PointCollection x:Key="FalseConnector">426,926.5 651,926.5 651,995.5</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                </FlowDecision>
                <FlowStep x:Name="__ReferenceID197">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">269,631</av:Point>
                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">391,682 391,883</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Flowchart DisplayName="Разбор" sap:VirtualizedContainerService.HintSize="244,51">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,116.5</av:PointCollection>
                        <x:Double x:Key="Width">684</x:Double>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <Flowchart.StartNode>
                      <x:Reference>__ReferenceID178</x:Reference>
                    </Flowchart.StartNode>
                    <FlowSwitch x:TypeArguments="x:Int32" x:Name="__ReferenceID178" Expression="[BatchCode.Length]" sap:VirtualizedContainerService.HintSize="70,87">
                      <FlowSwitch.Default>
                        <FlowStep x:Name="__ReferenceID177">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">9,170</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="x:String">[string.Format("Неизвестный BatchCode={0}.", BatchCode)]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                        </FlowStep>
                      </FlowSwitch.Default>
                      <sap:WorkflowViewStateService.ViewState>
                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">265,116.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="5Connector">335,138.25 365,138.25 365,150 440,150</av:PointCollection>
                          <av:PointCollection x:Key="Default">265,138.25 130,138.25 130,170</av:PointCollection>
                          <av:PointCollection x:Key="6Connector">335,160 365,160 365,210 440,210</av:PointCollection>
                          <av:PointCollection x:Key="7Connector">335,181.75 365,181.75 365,270 440,270</av:PointCollection>
                          <av:PointCollection x:Key="11Connector">282.5,203.5 282.5,510 440,510</av:PointCollection>
                          <av:PointCollection x:Key="10Connector">300,203.5 300,450 440,450</av:PointCollection>
                          <av:PointCollection x:Key="9Connector">317.5,203.5 317.5,390 440,390</av:PointCollection>
                          <av:PointCollection x:Key="8Connector">335,181.75 353,181.75 353,330 440,330</av:PointCollection>
                        </scg1:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <FlowStep x:Key="8" x:Name="__ReferenceID173">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">440,304.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart DisplayName="8 символов" sap:VirtualizedContainerService.HintSize="244,51">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,134.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart.StartNode>
                            <x:Reference>__ReferenceID65</x:Reference>
                          </Flowchart.StartNode>
                          <FlowStep x:Name="__ReferenceID63">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">48,424.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем дату изг" sap:VirtualizedContainerService.HintSize="244,51">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="month" />
                                <Variable x:TypeArguments="x:String" Default="123456789ABC" Name="monthLetters" />
                                <Variable x:TypeArguments="x:Int32" Name="year" />
                                <Variable x:TypeArguments="x:Int32" Name="day" />
                                <Variable x:TypeArguments="x:String" Name="variable1" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,110</av:PointCollection>
                                  <x:Double x:Key="Height">1050</x:Double>
                                  <x:Double x:Key="Width">761</x:Double>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID57</x:Reference>
                              </Flowchart.StartNode>
                              <FlowStep x:Name="__ReferenceID49">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,640</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,700 440,736.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Добавим год" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddYears(year)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID50" Condition="[CurrentDate &gt; ManufactureDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">405,736.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="FalseConnector">475,780 640,780 640,820</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID51">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">519,820</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">310,440 310,466.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Вычитаем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(-10)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <FlowStep x:Name="__ReferenceID52">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,540</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,600 440,640</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:DateTime">[new DateTime((CurrentDate.Year \ 10) * 10, month, day)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID49</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID50</x:Reference>
                              <x:Reference>__ReferenceID51</x:Reference>
                              <FlowStep x:Name="__ReferenceID57">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">179,110</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">300,170 300,206.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем месяц по букве" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:Int32">[month]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:Int32">[monthLetters.IndexOf(BatchCode(3))+1]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID53" Condition="[month = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">265,206.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">265,250 130,250 130,310</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">335,250 440,250 440,350</av:PointCollection>
                                        <x:String x:Key="TrueLabel">Ошибка определения месяца</x:String>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID56">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">9,310</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Не удалось определить месяц.")]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID54">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">319,350</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">440,410 440,440</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Год" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:Int32">[year]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode(2))]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowStep x:Name="__ReferenceID55">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">319,440</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">440,500 440,540</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign DisplayName="Дня нет - берем 1ое" sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Int32">1</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <x:Reference>__ReferenceID52</x:Reference>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowStep.Next>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID53</x:Reference>
                              <x:Reference>__ReferenceID54</x:Reference>
                              <x:Reference>__ReferenceID55</x:Reference>
                              <x:Reference>__ReferenceID56</x:Reference>
                            </Flowchart>
                          </FlowStep>
                          <FlowStep x:Name="__ReferenceID65">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">178,134.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">300,185.5 300,215.5 337.5,215.5 337.5,276.5</av:PointCollection>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем SN и фабрику" sap:VirtualizedContainerService.HintSize="745,636">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="firstDigit" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">340,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <x:Double x:Key="Width">731</x:Double>
                                  <av:PointCollection x:Key="ConnectorLocation">370,77.5 370,180</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID62</x:Reference>
                              </Flowchart.StartNode>
                              <FlowSwitch x:TypeArguments="x:String" x:Name="__ReferenceID60" Expression="[BatchCode.ToUpper().Substring(0, 2)]" sap:VirtualizedContainerService.HintSize="70,87">
                                <FlowSwitch.Default>
                                  <FlowStep x:Name="__ReferenceID61">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">59,380</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), string.Format("Неизвестная фабрика с кодом '{0}'.", BatchCode.ToUpper().Substring(2)))]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                </FlowSwitch.Default>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">335,276.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="Default">335,320 180,320 180,380</av:PointCollection>
                                    <av:PointCollection x:Key="BVConnector">405,298.25 435,298.25 435,300 489,300</av:PointCollection>
                                    <av:PointCollection x:Key="FVConnector">405,320 435,320 435,370 489,370</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowStep x:Key="BV" x:Name="__ReferenceID59">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">489,270</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">010</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="FV" x:Name="__ReferenceID58">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">489,340</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">011</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowSwitch>
                              <x:Reference>__ReferenceID58</x:Reference>
                              <x:Reference>__ReferenceID59</x:Reference>
                              <FlowStep x:Name="__ReferenceID62">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">249,180</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">370,240 370,276.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем SN" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:String">[SerialNumber]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:String">[BatchCode.Substring(BatchCode.Length-4,4)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID60</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID61</x:Reference>
                            </Flowchart>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID64" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID63}">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">285,276.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">285,320 170,320 170,424.5</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">255,790 380,790 380,859</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                          <x:Reference>__ReferenceID64</x:Reference>
                        </Flowchart>
                      </FlowStep>
                      <FlowStep x:Key="9" x:Name="__ReferenceID174">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">440,364.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart DisplayName="9 символов" sap:VirtualizedContainerService.HintSize="244,51">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,114.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart.StartNode>
                            <x:Reference>__ReferenceID81</x:Reference>
                          </Flowchart.StartNode>
                          <FlowStep x:Name="__ReferenceID79">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">38,324.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем дату изг" sap:VirtualizedContainerService.HintSize="244,51">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="month" />
                                <Variable x:TypeArguments="x:String" Default="ABCDEFGHJKLM" Name="monthLetters" />
                                <Variable x:TypeArguments="x:Int32" Name="year" />
                                <Variable x:TypeArguments="x:Int32" Name="day" />
                                <Variable x:TypeArguments="x:String" Name="variable1" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,110</av:PointCollection>
                                  <x:Double x:Key="Height">1050</x:Double>
                                  <x:Double x:Key="Width">761</x:Double>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID74</x:Reference>
                              </Flowchart.StartNode>
                              <FlowStep x:Name="__ReferenceID66">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,630</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,690 440,736.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Добавим год" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddYears(year)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID67" Condition="[CurrentDate &gt; ManufactureDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">405,736.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="FalseConnector">475,780 640,780 640,820</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID68">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">519,820</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">310,440 310,466.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Вычитаем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(-10)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <FlowStep x:Name="__ReferenceID69">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,540</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,600 440,630</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:DateTime">[new DateTime((CurrentDate.Year \ 10) * 10, month, day)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID66</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID67</x:Reference>
                              <x:Reference>__ReferenceID68</x:Reference>
                              <FlowStep x:Name="__ReferenceID74">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">179,110</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">300,170 300,206.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем месяц по букве" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:Int32">[month]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:Int32">[monthLetters.IndexOf(BatchCode(2))+1]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID70" Condition="[month = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">265,206.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">265,250 130,250 130,340</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">335,250 440,250 440,350</av:PointCollection>
                                        <x:String x:Key="TrueLabel">Ошибка определения месяца</x:String>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID73">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">9,340</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Не удалось определить месяц.")]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID71">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">319,350</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">440,410 440,440</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Год" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:Int32">[year]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode(1))]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowStep x:Name="__ReferenceID72">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">319,440</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">440,500 440,540</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign DisplayName="Дня нет - берем 1ое" sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Int32">1</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <x:Reference>__ReferenceID69</x:Reference>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowStep.Next>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID70</x:Reference>
                              <x:Reference>__ReferenceID71</x:Reference>
                              <x:Reference>__ReferenceID72</x:Reference>
                              <x:Reference>__ReferenceID73</x:Reference>
                            </Flowchart>
                          </FlowStep>
                          <FlowStep x:Name="__ReferenceID81">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">178,114.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">300,165.5 300,196.5</av:PointCollection>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем SN и фабрику" sap:VirtualizedContainerService.HintSize="244,51">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="firstDigit" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">340,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <x:Double x:Key="Width">731</x:Double>
                                  <av:PointCollection x:Key="ConnectorLocation">370,77.5 370,180</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID78</x:Reference>
                              </Flowchart.StartNode>
                              <FlowSwitch x:TypeArguments="x:String" x:Name="__ReferenceID76" Expression="[BatchCode.ToUpper()(0)]" sap:VirtualizedContainerService.HintSize="70,87">
                                <FlowSwitch.Default>
                                  <FlowStep x:Name="__ReferenceID77">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">69,430</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), string.Format("Неизвестная фабрика с кодом '{0}'.", BatchCode(0)))]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                </FlowSwitch.Default>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">335,346.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="Default">335,390 190,390 190,430</av:PointCollection>
                                    <av:PointCollection x:Key="EConnector">405,368.25 435,368.25 435,370 479,370</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowStep x:Key="E" x:Name="__ReferenceID75">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">479,340</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">012</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowSwitch>
                              <x:Reference>__ReferenceID75</x:Reference>
                              <FlowStep x:Name="__ReferenceID78">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">249,180</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">370,240 370,346.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем SN" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:String">[SerialNumber]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:String">[BatchCode.Substring(3,4)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID76</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID77</x:Reference>
                            </Flowchart>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID80" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID79}">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,196.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,240 235,240 235,313.5 295,313.5 295,350 282,350</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">255,790 380,790 380,859</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                          <x:Reference>__ReferenceID80</x:Reference>
                        </Flowchart>
                      </FlowStep>
                      <FlowStep x:Key="10" x:Name="__ReferenceID175">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">440,424.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart DisplayName="10 символов" sap:VirtualizedContainerService.HintSize="244,51">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,124.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart.StartNode>
                            <x:Reference>__ReferenceID97</x:Reference>
                          </Flowchart.StartNode>
                          <FlowStep x:Name="__ReferenceID97">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">178,124.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">300,175.5 300,216.5</av:PointCollection>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем SN и фабрику" sap:VirtualizedContainerService.HintSize="244,51">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="firstDigit" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">340,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <x:Double x:Key="Width">731</x:Double>
                                  <av:PointCollection x:Key="ConnectorLocation">370,77.5 370,180</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID85</x:Reference>
                              </Flowchart.StartNode>
                              <FlowSwitch x:TypeArguments="x:String" x:Name="__ReferenceID83" Expression="[BatchCode.ToUpper()(5)]" sap:VirtualizedContainerService.HintSize="70,87">
                                <FlowSwitch.Default>
                                  <FlowStep x:Name="__ReferenceID84">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">59,420</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), string.Format("Неизвестная фабрика с кодом '{0}'.", BatchCode(5)))]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                </FlowSwitch.Default>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">335,346.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="Default">335,368.25 180,368.25 180,420</av:PointCollection>
                                    <av:PointCollection x:Key="UConnector">405,368.25 435,368.25 435,370 479,370</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowStep x:Key="U" x:Name="__ReferenceID82">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">479,340</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">017</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowSwitch>
                              <x:Reference>__ReferenceID82</x:Reference>
                              <FlowStep x:Name="__ReferenceID85">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">249,180</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">370,240 370,346.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем SN" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:String">[SerialNumber]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:String">[BatchCode.Substring(6,4)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID83</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID84</x:Reference>
                            </Flowchart>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID96" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,216.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,260 235,260 235,333.5 292,333.5 292,360 262,360</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">255,790 380,790 380,859</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowDecision.True>
                                  <FlowStep x:Name="__ReferenceID95">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">18,334.5</av:Point>
                                        <av:Size x:Key="ShapeSize">244,51</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Flowchart DisplayName="Определяем дату изг" sap:VirtualizedContainerService.HintSize="775,1086">
                                      <Flowchart.Variables>
                                        <Variable x:TypeArguments="x:Int32" Name="month" />
                                        <Variable x:TypeArguments="x:String" Default="ABCDEFGHJKLM" Name="monthLetters" />
                                        <Variable x:TypeArguments="x:Int32" Name="year" />
                                        <Variable x:TypeArguments="x:Int32" Name="day" />
                                        <Variable x:TypeArguments="x:String" Name="variable1" />
                                      </Flowchart.Variables>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                          <av:Size x:Key="ShapeSize">60,75</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,110</av:PointCollection>
                                          <x:Double x:Key="Height">1050</x:Double>
                                          <x:Double x:Key="Width">761</x:Double>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Flowchart.StartNode>
                                        <x:Reference>__ReferenceID94</x:Reference>
                                      </Flowchart.StartNode>
                                      <FlowStep x:Name="__ReferenceID86">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">319,630</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">440,690 440,736.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Добавим год" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddYears(year)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowDecision x:Name="__ReferenceID87" Condition="[CurrentDate &gt; ManufactureDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                <av:Point x:Key="ShapeLocation">405,736.5</av:Point>
                                                <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                <av:PointCollection x:Key="FalseConnector">475,780 640,780 640,820</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <FlowDecision.False>
                                              <FlowStep x:Name="__ReferenceID88">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">519,820</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">310,440 310,466.5</av:PointCollection>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign DisplayName="Вычитаем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(-10)]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                              </FlowStep>
                                            </FlowDecision.False>
                                          </FlowDecision>
                                        </FlowStep.Next>
                                      </FlowStep>
                                      <FlowStep x:Name="__ReferenceID89">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">319,540</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">440,600 440,630</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Определяем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:DateTime">[new DateTime((CurrentDate.Year \ 10) * 10, month, day)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <x:Reference>__ReferenceID86</x:Reference>
                                        </FlowStep.Next>
                                      </FlowStep>
                                      <x:Reference>__ReferenceID87</x:Reference>
                                      <x:Reference>__ReferenceID88</x:Reference>
                                      <FlowStep x:Name="__ReferenceID94">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">179,110</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">300,170 300,206.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Определяем месяц по букве" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:Int32">[month]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:Int32">[monthLetters.IndexOf(BatchCode(1))+1]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowDecision x:Name="__ReferenceID90" Condition="[month = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                <av:Point x:Key="ShapeLocation">265,206.5</av:Point>
                                                <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                <av:PointCollection x:Key="TrueConnector">265,250 130,250 130,350</av:PointCollection>
                                                <av:PointCollection x:Key="FalseConnector">335,250 440,250 440,350</av:PointCollection>
                                                <x:String x:Key="TrueLabel">Ошибка определения месяца</x:String>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <FlowDecision.True>
                                              <FlowStep x:Name="__ReferenceID93">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">9,350</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Не удалось определить месяц.")]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                              </FlowStep>
                                            </FlowDecision.True>
                                            <FlowDecision.False>
                                              <FlowStep x:Name="__ReferenceID91">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">319,350</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">440,410 440,440</av:PointCollection>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign DisplayName="Год" sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="x:Int32">[year]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode(0))]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                                <FlowStep.Next>
                                                  <FlowStep x:Name="__ReferenceID92">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">319,440</av:Point>
                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                        <av:PointCollection x:Key="ConnectorLocation">440,500 440,540</av:PointCollection>
                                                      </scg1:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <Assign DisplayName="День" sap:VirtualizedContainerService.HintSize="242,60">
                                                      <Assign.To>
                                                        <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                                      </Assign.To>
                                                      <Assign.Value>
                                                        <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode.Substring(2,2))]</InArgument>
                                                      </Assign.Value>
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg1:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </Assign>
                                                    <FlowStep.Next>
                                                      <x:Reference>__ReferenceID89</x:Reference>
                                                    </FlowStep.Next>
                                                  </FlowStep>
                                                </FlowStep.Next>
                                              </FlowStep>
                                            </FlowDecision.False>
                                          </FlowDecision>
                                        </FlowStep.Next>
                                      </FlowStep>
                                      <x:Reference>__ReferenceID90</x:Reference>
                                      <x:Reference>__ReferenceID91</x:Reference>
                                      <x:Reference>__ReferenceID92</x:Reference>
                                      <x:Reference>__ReferenceID93</x:Reference>
                                    </Flowchart>
                                  </FlowStep>
                                </FlowDecision.True>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                          <x:Reference>__ReferenceID95</x:Reference>
                          <x:Reference>__ReferenceID96</x:Reference>
                        </Flowchart>
                      </FlowStep>
                      <FlowStep x:Key="11" x:Name="__ReferenceID176">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">440,484.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart DisplayName="11 символов" sap:VirtualizedContainerService.HintSize="244,51">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,110</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart.StartNode>
                            <x:Reference>__ReferenceID109</x:Reference>
                          </Flowchart.StartNode>
                          <FlowStep x:Name="__ReferenceID107">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">38,334.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем дату изг" sap:VirtualizedContainerService.HintSize="775,1086">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="month" />
                                <Variable x:TypeArguments="x:String" Default="ABCDEFGHJKLM" Name="monthLetters" />
                                <Variable x:TypeArguments="x:Int32" Name="year" />
                                <Variable x:TypeArguments="x:Int32" Name="day" />
                                <Variable x:TypeArguments="x:String" Name="variable1" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,110</av:PointCollection>
                                  <x:Double x:Key="Height">1050</x:Double>
                                  <x:Double x:Key="Width">761</x:Double>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID106</x:Reference>
                              </Flowchart.StartNode>
                              <FlowStep x:Name="__ReferenceID98">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,630</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,690 440,736.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Добавим год" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddYears(year)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID99" Condition="[CurrentDate &gt; ManufactureDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">405,736.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="FalseConnector">475,780 640,780 640,820</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID100">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">519,820</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">310,440 310,466.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Вычитаем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(-10)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <FlowStep x:Name="__ReferenceID101">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,540</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,600 440,630</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:DateTime">[new DateTime((CurrentDate.Year \ 10) * 10, month, day)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID98</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID99</x:Reference>
                              <x:Reference>__ReferenceID100</x:Reference>
                              <FlowStep x:Name="__ReferenceID106">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">179,110</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">300,170 300,206.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем месяц по букве" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:Int32">[month]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:Int32">[monthLetters.IndexOf(BatchCode(9))+1]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID102" Condition="[month = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">265,206.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">265,250 130,250 130,350</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">335,250 440,250 440,350</av:PointCollection>
                                        <x:String x:Key="TrueLabel">Ошибка определения месяца</x:String>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID105">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">9,350</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Не удалось определить месяц.")]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID103">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">319,350</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">440,410 440,440</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Год" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:Int32">[year]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode(10))]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowStep x:Name="__ReferenceID104">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">319,440</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">440,500 440,540</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign DisplayName="День" sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode.Substring(7,2))]</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <x:Reference>__ReferenceID101</x:Reference>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowStep.Next>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID102</x:Reference>
                              <x:Reference>__ReferenceID103</x:Reference>
                              <x:Reference>__ReferenceID104</x:Reference>
                              <x:Reference>__ReferenceID105</x:Reference>
                            </Flowchart>
                          </FlowStep>
                          <FlowStep x:Name="__ReferenceID109">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">179,110</av:Point>
                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">300,170 300,216.5</av:PointCollection>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Assign DisplayName="Определяем SN" sap:VirtualizedContainerService.HintSize="242,60">
                              <Assign.To>
                                <OutArgument x:TypeArguments="x:String">[SerialNumber]</OutArgument>
                              </Assign.To>
                              <Assign.Value>
                                <InArgument x:TypeArguments="x:String">[BatchCode.Substring(1,5)]</InArgument>
                              </Assign.Value>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                            </Assign>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID108" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID107}">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,216.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,260 235,260 235,333.5 295,333.5 295,360 282,360</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">255,790 380,790 380,859</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                          <x:Reference>__ReferenceID108</x:Reference>
                        </Flowchart>
                      </FlowStep>
                      <FlowStep x:Key="5" x:Name="__ReferenceID170">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">440,124.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart DisplayName="5 символов" sap:VirtualizedContainerService.HintSize="244,51">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,107.5 312,107.5 312,114.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart.StartNode>
                            <x:Reference>__ReferenceID124</x:Reference>
                          </Flowchart.StartNode>
                          <FlowStep x:Name="__ReferenceID124">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">190,114.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">312,165.5 312,195.5 307.5,195.5 307.5,226.5</av:PointCollection>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем фабрику" sap:VirtualizedContainerService.HintSize="665,636">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <x:Double x:Key="Width">651</x:Double>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,126.5</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID113</x:Reference>
                              </Flowchart.StartNode>
                              <FlowSwitch x:TypeArguments="x:String" x:Name="__ReferenceID113" Expression="[BatchCode.ToUpper()(0)]" sap:VirtualizedContainerService.HintSize="70,87">
                                <FlowSwitch.Default>
                                  <FlowStep x:Name="__ReferenceID112">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">9,220</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), string.Format("Неизвестная фабрика с кодом '{0}'.", BatchCode(0)))]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                </FlowSwitch.Default>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,126.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="Default">265,170 130,170 130,220</av:PointCollection>
                                    <av:PointCollection x:Key="SConnector">335,148.25 365,148.25 365,150 409,150</av:PointCollection>
                                    <av:PointCollection x:Key="EConnector">335,170 365,170 365,220 409,220</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowStep x:Key="S" x:Name="__ReferenceID111">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">409,120</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">015</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="E" x:Name="__ReferenceID110">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">409,190</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">016</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowSwitch>
                              <x:Reference>__ReferenceID110</x:Reference>
                              <x:Reference>__ReferenceID111</x:Reference>
                              <x:Reference>__ReferenceID112</x:Reference>
                            </Flowchart>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID123" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">255,226.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">255,270 180,270 180,354.5</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">255,790 380,790 380,859</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowDecision.True>
                                  <FlowStep x:Name="__ReferenceID122">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">58,354.5</av:Point>
                                        <av:Size x:Key="ShapeSize">244,51</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Flowchart DisplayName="Определяем дату изг" sap:VirtualizedContainerService.HintSize="244,51">
                                      <Flowchart.Variables>
                                        <Variable x:TypeArguments="x:Int32" Name="day" />
                                      </Flowchart.Variables>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                          <av:Size x:Key="ShapeSize">60,75</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,130</av:PointCollection>
                                          <x:Double x:Key="Height">830</x:Double>
                                          <x:Double x:Key="Width">621</x:Double>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Flowchart.StartNode>
                                        <x:Reference>__ReferenceID121</x:Reference>
                                      </Flowchart.StartNode>
                                      <FlowStep x:Name="__ReferenceID114">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">179,590</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">300,650 300,676.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Добавим день" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddDays(Int32.Parse(BatchCode.Substring(1, 3))-1)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowDecision x:Name="__ReferenceID115" Condition="[CurrentDate &gt; ManufactureDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                <av:Point x:Key="ShapeLocation">265,676.5</av:Point>
                                                <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                <av:PointCollection x:Key="FalseConnector">335,720 500,720 500,770</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <FlowDecision.False>
                                              <FlowStep x:Name="__ReferenceID116">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">379,770</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">310,440 310,466.5</av:PointCollection>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign DisplayName="Вычитаем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(-10)]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                              </FlowStep>
                                            </FlowDecision.False>
                                          </FlowDecision>
                                        </FlowStep.Next>
                                      </FlowStep>
                                      <FlowStep x:Name="__ReferenceID117">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">179,230</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">300,290 300,340</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Добавим год" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddYears(Int32.Parse(BatchCode(BatchCode.Length-1)))]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowStep x:Name="__ReferenceID118">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">179,340</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">300,400 300,436.5</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode.Substring(1, 3))-1]</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <FlowDecision x:Name="__ReferenceID119" Condition="[day &gt; 365]" sap:VirtualizedContainerService.HintSize="70,87">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    <av:Point x:Key="ShapeLocation">265,436.5</av:Point>
                                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                    <av:PointCollection x:Key="TrueConnector">265,480 130,480 130,520</av:PointCollection>
                                                    <av:PointCollection x:Key="FalseConnector">335,480 360,480 360,560 300,560 300,590</av:PointCollection>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <FlowDecision.True>
                                                  <FlowStep x:Name="__ReferenceID120">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">9,520</av:Point>
                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                      </scg1:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                                      <Assign.To>
                                                        <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                                      </Assign.To>
                                                      <Assign.Value>
                                                        <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Кол-во дней &gt; 365.")]</InArgument>
                                                      </Assign.Value>
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg1:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </Assign>
                                                  </FlowStep>
                                                </FlowDecision.True>
                                                <FlowDecision.False>
                                                  <x:Reference>__ReferenceID114</x:Reference>
                                                </FlowDecision.False>
                                              </FlowDecision>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowStep.Next>
                                      </FlowStep>
                                      <x:Reference>__ReferenceID115</x:Reference>
                                      <x:Reference>__ReferenceID116</x:Reference>
                                      <FlowStep x:Name="__ReferenceID121">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">179,130</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">300,190 300,230</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Начало текущего десятилетия" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:DateTime">[new DateTime((CurrentDate.Year \ 10) * 10, 1, 1)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <x:Reference>__ReferenceID117</x:Reference>
                                        </FlowStep.Next>
                                      </FlowStep>
                                      <x:Reference>__ReferenceID118</x:Reference>
                                      <x:Reference>__ReferenceID119</x:Reference>
                                      <x:Reference>__ReferenceID120</x:Reference>
                                    </Flowchart>
                                  </FlowStep>
                                </FlowDecision.True>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                          <x:Reference>__ReferenceID122</x:Reference>
                          <x:Reference>__ReferenceID123</x:Reference>
                        </Flowchart>
                      </FlowStep>
                      <FlowStep x:Key="6" x:Name="__ReferenceID171">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">440,184.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart DisplayName="6 символов" sap:VirtualizedContainerService.HintSize="244,51">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,144.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart.StartNode>
                            <x:Reference>__ReferenceID146</x:Reference>
                          </Flowchart.StartNode>
                          <FlowStep x:Name="__ReferenceID144">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">78,514.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем дату изг" sap:VirtualizedContainerService.HintSize="863,1146">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="month" />
                                <Variable x:TypeArguments="x:String" Default="ABCDEFGHJKLM" Name="monthLetters" />
                                <Variable x:TypeArguments="x:Int32" Name="firstDigit" />
                                <Variable x:TypeArguments="x:Int32" Name="year" />
                                <Variable x:TypeArguments="x:Int32" Name="day" />
                                <Variable x:TypeArguments="x:String" Name="variable1" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,110</av:PointCollection>
                                  <x:Double x:Key="Height">1110</x:Double>
                                  <x:Double x:Key="Width">849</x:Double>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID137</x:Reference>
                              </Flowchart.StartNode>
                              <FlowStep>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">39,960</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Добавим день" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddDays(day-1)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                              </FlowStep>
                              <FlowStep x:Name="__ReferenceID125">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,810</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,870 440,966.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Добавим год" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddYears(year)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID126" Condition="[CurrentDate &gt; ManufactureDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">405,966.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="FalseConnector">475,1010 640,1010 640,1050</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID127">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">519,1050</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">310,440 310,466.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Вычитаем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(-10)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <FlowStep x:Name="__ReferenceID128">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,710</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,770 440,810</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:DateTime">[new DateTime((CurrentDate.Year \ 10) * 10, month, day)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID125</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID126</x:Reference>
                              <x:Reference>__ReferenceID127</x:Reference>
                              <FlowStep x:Name="__ReferenceID137">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">179,110</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">300,170 300,206.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем месяц по букве" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:Int32">[month]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:Int32">[monthLetters.IndexOf(BatchCode(1))+1]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID129" Condition="[month = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">265,206.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">265,250 140,250 140,330</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">335,250 440,250 440,316.5</av:PointCollection>
                                        <x:String x:Key="TrueLabel">Ошибка определения месяца</x:String>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID135">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">19,330</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Не удалось определить месяц")]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowDecision x:Name="__ReferenceID130" Condition="[Int32.TryParse(BatchCode(0), firstDigit) AND BatchCode.Substring(BatchCode.Length-2, 2) = &quot;NP&quot;]" sap:VirtualizedContainerService.HintSize="70,87">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            <av:Point x:Key="ShapeLocation">405,316.5</av:Point>
                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                            <av:PointCollection x:Key="TrueConnector">405,360 310,360 310,420</av:PointCollection>
                                            <av:PointCollection x:Key="FalseConnector">475,360 580,360 580,510</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <FlowDecision.True>
                                          <FlowStep x:Name="__ReferenceID136">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">189,420</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">310,480 310,510</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Int32">[firstDigit]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Int32">[Ctype(BatchCode(0).ToString, Int32)]</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <FlowStep x:Name="__ReferenceID131">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">189,510</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">310,570 310,600</av:PointCollection>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign DisplayName="Год по формату NP" sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="x:Int32">[year]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="x:Int32">[firstDigit]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                                <FlowStep.Next>
                                                  <FlowStep x:Name="__ReferenceID133">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">189,600</av:Point>
                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                        <av:PointCollection x:Key="ConnectorLocation">310,660 310,690 440,690 440,710</av:PointCollection>
                                                      </scg1:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <Assign DisplayName="Вычисляем день" sap:VirtualizedContainerService.HintSize="242,60">
                                                      <Assign.To>
                                                        <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                                      </Assign.To>
                                                      <Assign.Value>
                                                        <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode.Substring(2,2))]</InArgument>
                                                      </Assign.Value>
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg1:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </Assign>
                                                    <FlowStep.Next>
                                                      <x:Reference>__ReferenceID128</x:Reference>
                                                    </FlowStep.Next>
                                                  </FlowStep>
                                                </FlowStep.Next>
                                              </FlowStep>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowDecision.True>
                                        <FlowDecision.False>
                                          <FlowStep x:Name="__ReferenceID132">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">459,510</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">580,570 580,600</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign DisplayName="Год по стандартному формату" sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Int32">[year]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode(2))]</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <FlowStep x:Name="__ReferenceID134">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">459,600</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">580,660 580,690 440,690 440,710</av:PointCollection>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign DisplayName="Дня нет - берем 1ое" sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="x:Int32">1</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg1:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                                <FlowStep.Next>
                                                  <x:Reference>__ReferenceID128</x:Reference>
                                                </FlowStep.Next>
                                              </FlowStep>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowDecision.False>
                                      </FlowDecision>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID129</x:Reference>
                              <x:Reference>__ReferenceID130</x:Reference>
                              <x:Reference>__ReferenceID131</x:Reference>
                              <x:Reference>__ReferenceID132</x:Reference>
                              <x:Reference>__ReferenceID133</x:Reference>
                              <x:Reference>__ReferenceID134</x:Reference>
                              <x:Reference>__ReferenceID135</x:Reference>
                              <x:Reference>__ReferenceID136</x:Reference>
                            </Flowchart>
                          </FlowStep>
                          <FlowStep x:Name="__ReferenceID146">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">178,144.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">300,195.5 300,296.5</av:PointCollection>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем SN и фабрику" sap:VirtualizedContainerService.HintSize="244,51">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="firstDigit" />
                                <Variable x:TypeArguments="st:StringBuilder" Default="[new System.Text.StringBuilder()]" Name="sbError" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">340,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <x:Double x:Key="Width">731</x:Double>
                                  <av:PointCollection x:Key="ConnectorLocation">370,77.5 370,116.5</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID143</x:Reference>
                              </Flowchart.StartNode>
                              <FlowSwitch x:TypeArguments="x:String" x:Name="__ReferenceID139" Expression="[BatchCode.ToUpper()(0)]" sap:VirtualizedContainerService.HintSize="70,87">
                                <FlowSwitch.Default>
                                  <FlowStep x:Name="__ReferenceID142">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">69,430</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), string.Format("Неизвестная фабрика с кодом '{0}'.", BatchCode(0)))]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                </FlowSwitch.Default>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">335,346.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="Default">335,390 190,390 190,430</av:PointCollection>
                                    <av:PointCollection x:Key="WConnector">405,368.25 435,368.25 435,370 479,370</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowStep x:Key="W" x:Name="__ReferenceID138">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">479,340</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">018</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowSwitch>
                              <x:Reference>__ReferenceID138</x:Reference>
                              <FlowDecision x:Name="__ReferenceID143" Condition="[Int32.TryParse(BatchCode(0), firstDigit) AND BatchCode.Substring(BatchCode.Length-2, 2) = &quot;NP&quot;]" sap:VirtualizedContainerService.HintSize="70,87">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">335,116.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">335,160 251,160</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">405,160 520,160 520,230</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowDecision.True>
                                  <FlowStep x:Name="__ReferenceID140">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">9,130</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="Отдельная проверка для NP" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">012</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                </FlowDecision.True>
                                <FlowDecision.False>
                                  <FlowStep x:Name="__ReferenceID141">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">399,230</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                        <av:PointCollection x:Key="ConnectorLocation">520,290 520,320 370,320 370,346.5</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="Определяем SN" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[SerialNumber]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">[BatchCode.Substring(BatchCode.Length-2,2)]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                    <FlowStep.Next>
                                      <x:Reference>__ReferenceID139</x:Reference>
                                    </FlowStep.Next>
                                  </FlowStep>
                                </FlowDecision.False>
                              </FlowDecision>
                              <x:Reference>__ReferenceID140</x:Reference>
                              <x:Reference>__ReferenceID141</x:Reference>
                              <x:Reference>__ReferenceID142</x:Reference>
                            </Flowchart>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID145" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID144}">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,296.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,340 200,340 200,514.5</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">255,790 380,790 380,859</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                          <x:Reference>__ReferenceID145</x:Reference>
                        </Flowchart>
                      </FlowStep>
                      <FlowStep x:Key="7" x:Name="__ReferenceID172">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">440,244.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart DisplayName="7 символов" sap:VirtualizedContainerService.HintSize="244,51">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,114.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart.StartNode>
                            <x:Reference>__ReferenceID169</x:Reference>
                          </Flowchart.StartNode>
                          <FlowStep x:Name="__ReferenceID167">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">18,344.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем дату изг" sap:VirtualizedContainerService.HintSize="775,1086">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="month" />
                                <Variable x:TypeArguments="x:String" Default="123456789ABC" Name="monthLetters" />
                                <Variable x:TypeArguments="x:Int32" Name="year" />
                                <Variable x:TypeArguments="x:Int32" Name="day" />
                                <Variable x:TypeArguments="x:String" Name="variable1" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,110</av:PointCollection>
                                  <x:Double x:Key="Height">1050</x:Double>
                                  <x:Double x:Key="Width">761</x:Double>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID155</x:Reference>
                              </Flowchart.StartNode>
                              <FlowStep x:Name="__ReferenceID147">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,630</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,690 440,736.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Добавим год" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate.Value.AddYears(year)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID148" Condition="[CurrentDate &gt; ManufactureDate.Value]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">405,736.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="FalseConnector">475,780 640,780 640,820</av:PointCollection>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID149">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">519,820</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">310,440 310,466.5</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Вычитаем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="s:DateTime">[ManufactureDate.Value.AddYears(-10)]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <FlowStep x:Name="__ReferenceID150">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">319,540</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">440,600 440,630</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем десятилетие" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="s:Nullable(s:DateTime)">[ManufactureDate]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="s:DateTime">[new DateTime((CurrentDate.Year \ 10) * 10, month, day)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID147</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID148</x:Reference>
                              <x:Reference>__ReferenceID149</x:Reference>
                              <FlowStep x:Name="__ReferenceID155">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">179,110</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">300,170 300,206.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем месяц по букве" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:Int32">[month]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:Int32">[monthLetters.IndexOf(BatchCode(2))+1]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID151" Condition="[month = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">265,206.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">265,250 130,250 130,330</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">335,250 440,250 440,350</av:PointCollection>
                                        <x:String x:Key="TrueLabel">Ошибка определения месяца</x:String>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID154">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">9,330</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), "Не удалось определить месяц.")]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID152">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">319,350</av:Point>
                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">440,410 440,440</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Assign DisplayName="Год" sap:VirtualizedContainerService.HintSize="242,60">
                                          <Assign.To>
                                            <OutArgument x:TypeArguments="x:Int32">[year]</OutArgument>
                                          </Assign.To>
                                          <Assign.Value>
                                            <InArgument x:TypeArguments="x:Int32">[Int32.Parse(BatchCode(1))]</InArgument>
                                          </Assign.Value>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Assign>
                                        <FlowStep.Next>
                                          <FlowStep x:Name="__ReferenceID153">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">319,440</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">440,500 440,540</av:PointCollection>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign DisplayName="Дня нет - берем 1ое" sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Int32">[day]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Int32">1</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <x:Reference>__ReferenceID150</x:Reference>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowStep.Next>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID151</x:Reference>
                              <x:Reference>__ReferenceID152</x:Reference>
                              <x:Reference>__ReferenceID153</x:Reference>
                              <x:Reference>__ReferenceID154</x:Reference>
                            </Flowchart>
                          </FlowStep>
                          <FlowStep x:Name="__ReferenceID169">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">178,114.5</av:Point>
                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">300,165.5 300,216.5</av:PointCollection>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart DisplayName="Определяем SN и фабрику" sap:VirtualizedContainerService.HintSize="244,51">
                              <Flowchart.Variables>
                                <Variable x:TypeArguments="x:Int32" Name="firstDigit" />
                              </Flowchart.Variables>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">340,2.5</av:Point>
                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                  <x:Double x:Key="Width">761</x:Double>
                                  <av:PointCollection x:Key="ConnectorLocation">370,77.5 370,150</av:PointCollection>
                                  <x:Double x:Key="Height">770</x:Double>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Flowchart.StartNode>
                                <x:Reference>__ReferenceID166</x:Reference>
                              </Flowchart.StartNode>
                              <FlowSwitch x:TypeArguments="x:String" x:Name="__ReferenceID158" Expression="[BatchCode.ToUpper()(0)]" sap:VirtualizedContainerService.HintSize="70,87">
                                <FlowSwitch.Default>
                                  <FlowStep x:Name="__ReferenceID165">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">59,420</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign DisplayName="" sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">[ErrorMessage]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", ErrorMessage, iif(string.IsNullOrEmpty(ErrorMessage),string.Empty, Environment.NewLine), string.Format("Неизвестная фабрика с кодом '{0}'.", BatchCode(0)))]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                  </FlowStep>
                                </FlowSwitch.Default>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">335,346.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="Default">335,390 180,390 180,420</av:PointCollection>
                                    <av:PointCollection x:Key="MConnector">405,368.25 435,368.25 435,310 499,310</av:PointCollection>
                                    <av:PointCollection x:Key="GConnector">387.5,346.5 387.5,250 499,250</av:PointCollection>
                                    <av:PointCollection x:Key="BConnector">405,390 435,390 435,370 499,370</av:PointCollection>
                                    <av:PointCollection x:Key="JConnector">405,390 435,390 435,430 499,430</av:PointCollection>
                                    <av:PointCollection x:Key="SConnector">405,411.75 435,411.75 435,490 499,490</av:PointCollection>
                                    <av:PointCollection x:Key="UConnector">405,411.75 424,411.75 424,550 499,550</av:PointCollection>
                                    <av:PointCollection x:Key="NConnector">387.5,433.5 387.5,610 499,610</av:PointCollection>
                                    <av:PointCollection x:Key="EConnector">370,433.5 370,670 499,670</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <FlowStep x:Key="M" x:Name="__ReferenceID160">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,280</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">004</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="E" x:Name="__ReferenceID164">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,640</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">012</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="N" x:Name="__ReferenceID163">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,580</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">009</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="G" x:Name="__ReferenceID156">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,220</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">003</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="B" x:Name="__ReferenceID159">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,340</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">005</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="J" x:Name="__ReferenceID157">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,400</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">006</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="S" x:Name="__ReferenceID161">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,460</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">007</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                                <FlowStep x:Key="U" x:Name="__ReferenceID162">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">499,520</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:String">[FactoryCode]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:String">008</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowSwitch>
                              <x:Reference>__ReferenceID156</x:Reference>
                              <x:Reference>__ReferenceID157</x:Reference>
                              <FlowStep x:Name="__ReferenceID166">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">249,150</av:Point>
                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">370,210 370,346.5</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Assign DisplayName="Определяем SN" sap:VirtualizedContainerService.HintSize="242,60">
                                  <Assign.To>
                                    <OutArgument x:TypeArguments="x:String">[SerialNumber]</OutArgument>
                                  </Assign.To>
                                  <Assign.Value>
                                    <InArgument x:TypeArguments="x:String">[BatchCode.Substring(BatchCode.Length-4,4)]</InArgument>
                                  </Assign.Value>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </Assign>
                                <FlowStep.Next>
                                  <x:Reference>__ReferenceID158</x:Reference>
                                </FlowStep.Next>
                              </FlowStep>
                              <x:Reference>__ReferenceID159</x:Reference>
                              <x:Reference>__ReferenceID160</x:Reference>
                              <x:Reference>__ReferenceID161</x:Reference>
                              <x:Reference>__ReferenceID162</x:Reference>
                              <x:Reference>__ReferenceID163</x:Reference>
                              <x:Reference>__ReferenceID164</x:Reference>
                              <x:Reference>__ReferenceID165</x:Reference>
                            </Flowchart>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID168" Condition="[ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID167}">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">265,216.5</av:Point>
                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                    <av:PointCollection x:Key="TrueConnector">265,260 235,260 235,333.5 292,333.5 292,370 262,370</av:PointCollection>
                                    <av:PointCollection x:Key="FalseConnector">255,790 380,790 380,859</av:PointCollection>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                          <x:Reference>__ReferenceID168</x:Reference>
                        </Flowchart>
                      </FlowStep>
                    </FlowSwitch>
                    <x:Reference>__ReferenceID170</x:Reference>
                    <x:Reference>__ReferenceID171</x:Reference>
                    <x:Reference>__ReferenceID172</x:Reference>
                    <x:Reference>__ReferenceID173</x:Reference>
                    <x:Reference>__ReferenceID174</x:Reference>
                    <x:Reference>__ReferenceID175</x:Reference>
                    <x:Reference>__ReferenceID176</x:Reference>
                    <x:Reference>__ReferenceID177</x:Reference>
                  </Flowchart>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID179</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID206">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">269,451</av:Point>
                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">391,502 391,631</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Flowchart DisplayName="Начальные значения" sap:VirtualizedContainerService.HintSize="244,51">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,204.5</av:PointCollection>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <Flowchart.StartNode>
                      <x:Reference>__ReferenceID196</x:Reference>
                    </Flowchart.StartNode>
                    <FlowStep x:Name="__ReferenceID196">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">178,204.5</av:Point>
                          <av:Size x:Key="ShapeSize">244,51</av:Size>
                        </scg1:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Flowchart DisplayName="Получаем значения из Target" sap:VirtualizedContainerService.HintSize="614,1171">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                            <av:Size x:Key="ShapeSize">60,75</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,166.5</av:PointCollection>
                            <x:Double x:Key="Height">1135</x:Double>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart.StartNode>
                          <x:Reference>__ReferenceID195</x:Reference>
                        </Flowchart.StartNode>
                        <FlowStep x:Name="__ReferenceID183">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">48,364.5</av:Point>
                              <av:Size x:Key="ShapeSize">244,51</av:Size>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Flowchart DisplayName="Свойства IWBPosInput" sap:VirtualizedContainerService.HintSize="244,51">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                <av:Size x:Key="ShapeSize">60,75</av:Size>
                                <x:Double x:Key="Width">688</x:Double>
                                <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,320</av:PointCollection>
                                <x:Double x:Key="Height">830</x:Double>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Flowchart.StartNode>
                              <x:Reference>__ReferenceID182</x:Reference>
                            </Flowchart.StartNode>
                            <FlowDecision x:Name="__ReferenceID181" Condition="[OnlyParse]" sap:VirtualizedContainerService.HintSize="70,87">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">265,536.5</av:Point>
                                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                                  <av:PointCollection x:Key="FalseConnector">335,580 430,580 430,740</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <FlowDecision.False>
                                <FlowStep x:Name="__ReferenceID180">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">309,740</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:Boolean">[Ctype(Target, IWBPosInput).IsBpBatchcodeCompleted]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:Boolean">False</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowDecision.False>
                            </FlowDecision>
                            <x:Reference>__ReferenceID180</x:Reference>
                            <FlowStep x:Name="__ReferenceID182">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">179,320</av:Point>
                                  <av:Size x:Key="ShapeSize">242,60</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,380 300,536.5</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                <Assign.To>
                                  <OutArgument x:TypeArguments="x:String">[ArtCode]</OutArgument>
                                </Assign.To>
                                <Assign.Value>
                                  <InArgument x:TypeArguments="x:String">[Target.Get(Of String)("ARTCODE")]</InArgument>
                                </Assign.Value>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </Assign>
                              <FlowStep.Next>
                                <x:Reference>__ReferenceID181</x:Reference>
                              </FlowStep.Next>
                            </FlowStep>
                          </Flowchart>
                        </FlowStep>
                        <FlowDecision x:Name="__ReferenceID195" Condition="[TypeOf Target is IWBPosInput]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID183}">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              <av:Point x:Key="ShapeLocation">265,166.5</av:Point>
                              <av:Size x:Key="ShapeSize">70,87</av:Size>
                              <av:PointCollection x:Key="TrueConnector">265,210 170,210 170,364.5</av:PointCollection>
                              <av:PointCollection x:Key="FalseConnector">335,210 350,210 350,446.5</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <FlowDecision.False>
                            <FlowDecision x:Name="__ReferenceID190" Condition="[TypeOf Target is IWBPos]" sap:VirtualizedContainerService.HintSize="70,87">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">315,446.5</av:Point>
                                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                                  <av:PointCollection x:Key="TrueConnector">315,490 200,490 200,614.5</av:PointCollection>
                                  <av:PointCollection x:Key="FalseConnector">385,490 427,490 427,757</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <FlowDecision.True>
                                <FlowStep x:Name="__ReferenceID191">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">78,614.5</av:Point>
                                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Flowchart DisplayName="Свойства IWBPos" sap:VirtualizedContainerService.HintSize="244,51">
                                    <Flowchart.Variables>
                                      <Variable x:TypeArguments="s:Nullable(x:Decimal)" Name="SKUID" />
                                      <Variable x:TypeArguments="wbo:SKU" Name="Sku" />
                                    </Flowchart.Variables>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                                        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,107.5 301,107.5 301,176</av:PointCollection>
                                        <x:Double x:Key="Height">750</x:Double>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Flowchart.StartNode>
                                      <x:Reference>__ReferenceID188</x:Reference>
                                    </Flowchart.StartNode>
                                    <FlowStep x:Name="__ReferenceID184">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">189,670</av:Point>
                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">311,376 311,532.5</av:PointCollection>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="x:String">[ArtCode]</OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="x:String">[Sku.Get(Of String)("ARTCODE_R")]</InArgument>
                                        </Assign.Value>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Assign>
                                    </FlowStep>
                                    <FlowStep x:Name="__ReferenceID188">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">180,176</av:Point>
                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">301,236 301,266 300,266 300,306.5</av:PointCollection>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[SKUID]</OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[Target.Get(of Decimal?)("SKUID_R")]</InArgument>
                                        </Assign.Value>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Assign>
                                      <FlowStep.Next>
                                        <FlowDecision x:Name="__ReferenceID187" Condition="[SKUID.HasValue = false]" sap:VirtualizedContainerService.HintSize="70,87">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              <av:Point x:Key="ShapeLocation">265,306.5</av:Point>
                                              <av:Size x:Key="ShapeSize">70,87</av:Size>
                                              <av:PointCollection x:Key="FalseConnector">335,350 365,350 365,549 310,549 310,579</av:PointCollection>
                                              <av:PointCollection x:Key="TrueConnector">265,350 195,350 195,471.5</av:PointCollection>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <FlowDecision.True>
                                            <FlowStep x:Name="__ReferenceID186">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">95,471.5</av:Point>
                                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <Throw Exception="[new DeveloperException(&quot;Не указано SKU.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                              </Throw>
                                            </FlowStep>
                                          </FlowDecision.True>
                                          <FlowDecision.False>
                                            <FlowStep x:Name="__ReferenceID185">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">210,579</av:Point>
                                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">310,601 310,670</av:PointCollection>
                                                </scg1:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <wag:GetByKeyActivity x:TypeArguments="wbo:SKU" DisplayName="Получим SKU" sap:VirtualizedContainerService.HintSize="200,22" Key="[SKUID.Value]" Mode="Partial" Result="[Sku]">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg1:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                              </wag:GetByKeyActivity>
                                              <FlowStep.Next>
                                                <x:Reference>__ReferenceID184</x:Reference>
                                              </FlowStep.Next>
                                            </FlowStep>
                                          </FlowDecision.False>
                                        </FlowDecision>
                                      </FlowStep.Next>
                                    </FlowStep>
                                    <x:Reference>__ReferenceID185</x:Reference>
                                    <x:Reference>__ReferenceID186</x:Reference>
                                    <x:Reference>__ReferenceID187</x:Reference>
                                  </Flowchart>
                                </FlowStep>
                              </FlowDecision.True>
                              <FlowDecision.False>
                                <FlowDecision x:Name="__ReferenceID193" Condition="[TypeOf Target is Product]" sap:VirtualizedContainerService.HintSize="70,87">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      <av:Point x:Key="ShapeLocation">392,757</av:Point>
                                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                                      <av:PointCollection x:Key="TrueConnector">392,800.5 277,800.5 277,925</av:PointCollection>
                                      <av:PointCollection x:Key="FalseConnector">462,800.5 473,800.5 473,1083 323,1083 323,1113</av:PointCollection>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <FlowDecision.True>
                                    <FlowStep x:Name="__ReferenceID192">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">155,925</av:Point>
                                          <av:Size x:Key="ShapeSize">244,51</av:Size>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Flowchart DisplayName="Свойства Product" sap:VirtualizedContainerService.HintSize="244,51">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                            <av:Size x:Key="ShapeSize">60,75</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,180</av:PointCollection>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Flowchart.StartNode>
                                          <x:Reference>__ReferenceID189</x:Reference>
                                        </Flowchart.StartNode>
                                        <FlowStep x:Name="__ReferenceID189">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                              <av:Point x:Key="ShapeLocation">179,180</av:Point>
                                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                                              <av:PointCollection x:Key="ConnectorLocation">332,260 332,416.5</av:PointCollection>
                                            </scg1:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                            <Assign.To>
                                              <OutArgument x:TypeArguments="x:String">[ArtCode]</OutArgument>
                                            </Assign.To>
                                            <Assign.Value>
                                              <InArgument x:TypeArguments="x:String">[Target.Get(Of String)("ARTCODE_R")]</InArgument>
                                            </Assign.Value>
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              </scg1:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                          </Assign>
                                        </FlowStep>
                                      </Flowchart>
                                    </FlowStep>
                                  </FlowDecision.True>
                                  <FlowDecision.False>
                                    <FlowStep x:Name="__ReferenceID194">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">223,1113</av:Point>
                                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                                        </scg1:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Throw Exception="[new DeveloperException(&quot;Для типа '{0}' не определены свойства, заполняемые при распозновании Batch-кода.&quot;, Target.GetType)]" sap:VirtualizedContainerService.HintSize="200,22">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg1:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Throw>
                                    </FlowStep>
                                  </FlowDecision.False>
                                </FlowDecision>
                              </FlowDecision.False>
                            </FlowDecision>
                          </FlowDecision.False>
                        </FlowDecision>
                        <x:Reference>__ReferenceID190</x:Reference>
                        <x:Reference>__ReferenceID191</x:Reference>
                        <x:Reference>__ReferenceID192</x:Reference>
                        <x:Reference>__ReferenceID193</x:Reference>
                        <x:Reference>__ReferenceID194</x:Reference>
                      </Flowchart>
                    </FlowStep>
                  </Flowchart>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID197</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
                <FlowStep x:Name="__ReferenceID207">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">269,271</av:Point>
                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">391,322 391,451</av:PointCollection>
                    </scg1:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Flowchart DisplayName="Проверка входных парметров" sap:VirtualizedContainerService.HintSize="244,51">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,254.5</av:PointCollection>
                        <x:Double x:Key="Height">801</x:Double>
                      </scg1:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <Flowchart.StartNode>
                      <x:Reference>__ReferenceID205</x:Reference>
                    </Flowchart.StartNode>
                    <FlowDecision x:Name="__ReferenceID198" Condition="[OnlyParse = False AND Target is Nothing AND ErrorMessage is Nothing]" sap:VirtualizedContainerService.HintSize="70,87">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">265,676.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="FalseConnector">485,510 570,510 570,584.5</av:PointCollection>
                          <av:PointCollection x:Key="TrueConnector">265,720 120,720 120,779</av:PointCollection>
                        </scg1:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <FlowDecision.True>
                        <FlowStep x:Name="__ReferenceID200">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">20,779</av:Point>
                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Throw Exception="[new PassThroughException(&quot;Не передан обязательный для заполнения параметр Target.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Throw>
                        </FlowStep>
                      </FlowDecision.True>
                    </FlowDecision>
                    <FlowDecision x:Name="__ReferenceID204" Condition="[string.IsNullOrEmpty(BatchCode)]" sap:VirtualizedContainerService.HintSize="70,87">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">265,426.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="FalseConnector">335,470 360,470 360,646.5 300,646.5 300,676.5</av:PointCollection>
                          <av:PointCollection x:Key="TrueConnector">265,470 140,470 140,589</av:PointCollection>
                        </scg1:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <FlowDecision.True>
                        <FlowStep x:Name="__ReferenceID199">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">40,589</av:Point>
                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Throw Exception="[new PassThroughException(&quot;BatchCode не указан.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Throw>
                        </FlowStep>
                      </FlowDecision.True>
                      <FlowDecision.False>
                        <x:Reference>__ReferenceID198</x:Reference>
                      </FlowDecision.False>
                    </FlowDecision>
                    <x:Reference>__ReferenceID199</x:Reference>
                    <x:Reference>__ReferenceID200</x:Reference>
                    <FlowStep x:Name="__ReferenceID205">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">178,254.5</av:Point>
                          <av:Size x:Key="ShapeSize">244,51</av:Size>
                          <av:PointCollection x:Key="ConnectorLocation">300,305.5 300,426.5</av:PointCollection>
                        </scg1:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Flowchart DisplayName="Разбираем BpContext" sap:VirtualizedContainerService.HintSize="614,636">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                            <av:Size x:Key="ShapeSize">60,75</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,200</av:PointCollection>
                          </scg1:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <Flowchart.StartNode>
                          <x:Reference>__ReferenceID203</x:Reference>
                        </Flowchart.StartNode>
                        <FlowStep x:Name="__ReferenceID203">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">179,200</av:Point>
                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">300,260 300,350</av:PointCollection>
                            </scg1:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                            <Assign.To>
                              <OutArgument x:TypeArguments="x:String">[BatchCode]</OutArgument>
                            </Assign.To>
                            <Assign.Value>
                              <InArgument x:TypeArguments="x:String">[BpContext.Get(Of String)("BatchCode")]</InArgument>
                            </Assign.Value>
                            <sap:WorkflowViewStateService.ViewState>
                              <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg1:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                          </Assign>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID201">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                  <av:Point x:Key="ShapeLocation">179,350</av:Point>
                                  <av:Size x:Key="ShapeSize">242,60</av:Size>
                                  <av:PointCollection x:Key="ConnectorLocation">300,410 300,500</av:PointCollection>
                                </scg1:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                <Assign.To>
                                  <OutArgument x:TypeArguments="wbo:WMSBusinessObject">[Target]</OutArgument>
                                </Assign.To>
                                <Assign.Value>
                                  <InArgument x:TypeArguments="wbo:WMSBusinessObject">[BpContext.Get(Of WMSBusinessObject)("Target")]</InArgument>
                                </Assign.Value>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  </scg1:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                              </Assign>
                              <FlowStep.Next>
                                <FlowStep x:Name="__ReferenceID202">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">179,500</av:Point>
                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                    </scg1:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                    <Assign.To>
                                      <OutArgument x:TypeArguments="x:Boolean">[OnlyParse]</OutArgument>
                                    </Assign.To>
                                    <Assign.Value>
                                      <InArgument x:TypeArguments="x:Boolean">[BpContext.Get(Of Boolean)("OnlyParse")]</InArgument>
                                    </Assign.Value>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg1:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </Assign>
                                </FlowStep>
                              </FlowStep.Next>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                        <x:Reference>__ReferenceID201</x:Reference>
                        <x:Reference>__ReferenceID202</x:Reference>
                      </Flowchart>
                      <FlowStep.Next>
                        <x:Reference>__ReferenceID204</x:Reference>
                      </FlowStep.Next>
                    </FlowStep>
                  </Flowchart>
                  <FlowStep.Next>
                    <x:Reference>__ReferenceID206</x:Reference>
                  </FlowStep.Next>
                </FlowStep>
              </Flowchart>
            </TryCatch.Try>
            <TryCatch.Catches>
              <Catch x:TypeArguments="s:Exception" sap:VirtualizedContainerService.HintSize="404,21">
                <sap:WorkflowViewStateService.ViewState>
                  <scg1:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                    <x:Boolean x:Key="IsPinned">False</x:Boolean>
                  </scg1:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <ActivityAction x:TypeArguments="s:Exception">
                  <ActivityAction.Argument>
                    <DelegateInArgument x:TypeArguments="s:Exception" Name="exMain" />
                  </ActivityAction.Argument>
                  <wada:ErrorHandlerActivity DisplayName="Обработчик ошибок" Error="[exMain]" ForceError="False" sap:VirtualizedContainerService.HintSize="200,22" IsActivitiesStackIncluded="True" IsSendMail="False" Message="[Nothing]" Rethrow="True" ShowErorDialog="False" Title="[Nothing]" />
                </ActivityAction>
              </Catch>
            </TryCatch.Catches>
          </TryCatch>
        </FlowStep>
      </FlowStep.Next>
    </FlowStep>
    <x:Reference>__ReferenceID208</x:Reference>
  </Flowchart>
</Activity>