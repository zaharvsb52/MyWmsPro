<Activity mc:Ignorable="sads sap" x:Class="{x:Null}"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:b="clr-namespace:BLToolkit;assembly=BLToolkit.4"
 xmlns:bm="clr-namespace:BLToolkit.Mapping;assembly=BLToolkit.4"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=Microsoft.VisualBasic"
 xmlns:mv1="clr-namespace:Microsoft.VisualBasic;assembly=System"
 xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities"
 xmlns:mvc="clr-namespace:Microsoft.VisualBasic.CompilerServices;assembly=Microsoft.VisualBasic"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:s1="clr-namespace:System;assembly=System"
 xmlns:s2="clr-namespace:System;assembly=System.Core"
 xmlns:s3="clr-namespace:System;assembly=Microsoft.CompilerServices.AsyncTargetingPack.Net4"
 xmlns:s4="clr-namespace:System;assembly=System.ServiceModel"
 xmlns:s5="clr-namespace:System;assembly=System.ComponentModel.Composition"
 xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System"
 xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core"
 xmlns:scg4="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel"
 xmlns:sl="clr-namespace:System.Linq;assembly=System.Core"
 xmlns:sle="clr-namespace:System.Linq.Expressions;assembly=System.Core"
 xmlns:sx="clr-namespace:System.Xaml;assembly=System.Xaml"
 xmlns:sx1="clr-namespace:System.Xml;assembly=System.Xml"
 xmlns:sx2="clr-namespace:System.Xml;assembly=System.Data"
 xmlns:sx3="clr-namespace:System.Xml;assembly=System.Runtime.Serialization"
 xmlns:sxs="clr-namespace:System.Xml.Serialization;assembly=System.Xml"
 xmlns:sxx="clr-namespace:System.Xml.XPath;assembly=System.Xml"
 xmlns:sxx1="clr-namespace:System.Xml.XPath;assembly=System.Xml.Linq"
 xmlns:wag="clr-namespace:wmsMLC.Activities.General;assembly=wmsMLC.Activities.General"
 xmlns:wbmp="clr-namespace:wmsMLC.Business.Managers.Processes;assembly=wmsMLC.Business.Managers"
 xmlns:wbo="clr-namespace:wmsMLC.Business.Objects;assembly=wmsMLC.Business.Objects"
 xmlns:wg="clr-namespace:wmsMLC.General;assembly=wmsMLC.General"
 xmlns:wgb="clr-namespace:wmsMLC.General.BL;assembly=wmsMLC.General.BL"
 xmlns:wgbv="clr-namespace:wmsMLC.General.BL.Validation;assembly=wmsMLC.General.BL"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="BpContext" Type="InOutArgument(wgb:BpContext)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>654,917</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces for internal implementation</mva:VisualBasic.Settings>
  <Flowchart sap:VirtualizedContainerService.HintSize="614,877">
    <Flowchart.Variables>
      <Variable x:TypeArguments="x:String" Name="WMSIMPORT" />
      <Variable x:TypeArguments="scg:IDictionary(x:String, x:Object)[]" Name="ItemTag" />
      <Variable x:TypeArguments="scg:IDictionary(x:String, x:Object)[]" Name="OwbXmlList" />
      <Variable x:TypeArguments="x:String" Default="Импорт расходных накладных" Name="BpName" />
    </Flowchart.Variables>
    <sap:WorkflowViewStateService.ViewState>
      <scg:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">False</x:Boolean>
        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
        <av:Size x:Key="ShapeSize">60,75</av:Size>
        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,119</av:PointCollection>
        <x:Double x:Key="Height">841</x:Double>
      </scg:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <Flowchart.StartNode>
      <x:Reference>__ReferenceID55</x:Reference>
    </Flowchart.StartNode>
    <FlowStep x:Name="__ReferenceID50">
      <sap:WorkflowViewStateService.ViewState>
        <scg:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">200,449</av:Point>
          <av:Size x:Key="ShapeSize">200,22</av:Size>
          <av:PointCollection x:Key="ConnectorLocation">300,471 300,594.5</av:PointCollection>
        </scg:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <wag:GetDynamicDictionaryFromXmlActivity Descendant="TENTOWB" DisplayName="Получение списка Owb" sap:VirtualizedContainerService.HintSize="200,22" InputXml="[ItemTag(0)(&quot;INNERXML&quot;).ToString]" Result="[OwbXmlList]">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </wag:GetDynamicDictionaryFromXmlActivity>
      <FlowStep.Next>
        <FlowStep x:Name="__ReferenceID54">
          <sap:WorkflowViewStateService.ViewState>
            <scg:Dictionary x:TypeArguments="x:String, x:Object">
              <av:Point x:Key="ShapeLocation">178,594.5</av:Point>
              <av:Size x:Key="ShapeSize">244,51</av:Size>
              <av:PointCollection x:Key="ConnectorLocation">300,645.5 300,819</av:PointCollection>
            </scg:Dictionary>
          </sap:WorkflowViewStateService.ViewState>
          <Flowchart DisplayName="Обработка телеграммы" sap:VirtualizedContainerService.HintSize="244,51">
            <sap:WorkflowViewStateService.ViewState>
              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                <av:Size x:Key="ShapeSize">60,75</av:Size>
                <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,164.5</av:PointCollection>
              </scg:Dictionary>
            </sap:WorkflowViewStateService.ViewState>
            <Flowchart.StartNode>
              <x:Reference>__ReferenceID49</x:Reference>
            </Flowchart.StartNode>
            <FlowStep x:Name="__ReferenceID49">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">178,164.5</av:Point>
                  <av:Size x:Key="ShapeSize">244,51</av:Size>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <TryCatch sap:VirtualizedContainerService.HintSize="418,486">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
                <TryCatch.Try>
                  <Sequence sap:VirtualizedContainerService.HintSize="266,299">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <wag:BeginTransactionActivity sap:VirtualizedContainerService.HintSize="244,22" />
                    <Flowchart DisplayName="Обработка Owb" sap:VirtualizedContainerService.HintSize="614,636">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                          <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                          <av:Size x:Key="ShapeSize">60,75</av:Size>
                          <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,164.5</av:PointCollection>
                        </scg:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Flowchart.StartNode>
                        <x:Reference>__ReferenceID48</x:Reference>
                      </Flowchart.StartNode>
                      <FlowStep x:Name="__ReferenceID48">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">178,164.5</av:Point>
                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <ForEach x:TypeArguments="scg:IDictionary(x:String, x:Object)" DisplayName="ForEach&lt;IDictionary&lt;String,Object&gt;&gt;" sap:VirtualizedContainerService.HintSize="448,395" Values="[OwbXmlList]">
                          <ActivityAction x:TypeArguments="scg:IDictionary(x:String, x:Object)">
                            <ActivityAction.Argument>
                              <DelegateInArgument x:TypeArguments="scg:IDictionary(x:String, x:Object)" Name="item" />
                            </ActivityAction.Argument>
                            <TryCatch sap:VirtualizedContainerService.HintSize="418,287">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                </scg:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <TryCatch.Try>
                                <Flowchart DisplayName="Обработка Owb" sap:VirtualizedContainerService.HintSize="734,1482">
                                  <Flowchart.Variables>
                                    <Variable x:TypeArguments="wbo:OWB" Name="Owb" />
                                    <Variable x:TypeArguments="sx1:XmlDocument" Name="xmlDoc" />
                                    <Variable x:TypeArguments="scg:List(wbo:OWBPos)" Name="OwbPosList" />
                                    <Variable x:TypeArguments="wbo:OWB" Name="OwbNew" />
                                  </Flowchart.Variables>
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                                      <av:Point x:Key="ShapeLocation">260,2.5</av:Point>
                                      <av:Size x:Key="ShapeSize">60,75</av:Size>
                                      <x:Double x:Key="Width">720</x:Double>
                                      <av:PointCollection x:Key="ConnectorLocation">290,77.5 290,170</av:PointCollection>
                                      <x:Double x:Key="Height">1445.5</x:Double>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Flowchart.StartNode>
                                    <x:Reference>__ReferenceID47</x:Reference>
                                  </Flowchart.StartNode>
                                  <FlowDecision x:Name="__ReferenceID37" Condition="[Owb Is Nothing]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">258,572.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <av:PointCollection x:Key="TrueConnector">258,616 140,616 140,649</av:PointCollection>
                                        <av:PointCollection x:Key="FalseConnector">328,616 410,616 410,724.5</av:PointCollection>
                                      </scg:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowStep x:Name="__ReferenceID38">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">40,649</av:Point>
                                            <av:Size x:Key="ShapeSize">200,22</av:Size>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Throw Exception="[New PassThroughException(&quot;Неожиданная ошибка. Owb после конвертации из xml равен null.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                        </Throw>
                                      </FlowStep>
                                    </FlowDecision.True>
                                    <FlowDecision.False>
                                      <FlowStep x:Name="__ReferenceID46">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">288,724.5</av:Point>
                                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">410,775.5 410,805.5 470,805.5 470,896.5</av:PointCollection>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <Flowchart DisplayName="Owb" sap:VirtualizedContainerService.HintSize="614,636">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,184.5</av:PointCollection>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <Flowchart.StartNode>
                                            <x:Reference>__ReferenceID9</x:Reference>
                                          </Flowchart.StartNode>
                                          <FlowStep x:Name="__ReferenceID9">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">178,184.5</av:Point>
                                                <av:Size x:Key="ShapeSize">244,51</av:Size>
                                              </scg:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Flowchart DisplayName="Получатель" sap:VirtualizedContainerService.HintSize="714,1076">
                                              <Flowchart.Variables>
                                                <Variable x:TypeArguments="x:String" Name="RecipientCode" />
                                                <Variable x:TypeArguments="scg:List(wbo:Partner)" Name="PartnerList" />
                                              </Flowchart.Variables>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,186.5</av:PointCollection>
                                                  <x:Double x:Key="Width">700</x:Double>
                                                  <x:Double x:Key="Height">1040</x:Double>
                                                </scg:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <Flowchart.StartNode>
                                                <x:Reference>__ReferenceID8</x:Reference>
                                              </Flowchart.StartNode>
                                              <FlowDecision x:Name="__ReferenceID8" Condition="[Owb.Get(Of Decimal?)(&quot;OWBRECIPIENT&quot;).HasValue]" sap:VirtualizedContainerService.HintSize="70,87">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    <av:Point x:Key="ShapeLocation">265,186.5</av:Point>
                                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                    <av:PointCollection x:Key="FalseConnector">335,230 365,230 365,330 300.895,330</av:PointCollection>
                                                  </scg:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <FlowDecision.False>
                                                  <FlowStep x:Name="__ReferenceID1">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">58.895,300</av:Point>
                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                        <av:PointCollection x:Key="ConnectorLocation">179.895,360 179.895,390 270,390 270,406.5</av:PointCollection>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                      <Assign.To>
                                                        <OutArgument x:TypeArguments="x:String">[RecipientCode]</OutArgument>
                                                      </Assign.To>
                                                      <Assign.Value>
                                                        <InArgument x:TypeArguments="x:String">[Owb.Get(Of String)("OWBRECIPIENT_CODE")]</InArgument>
                                                      </Assign.Value>
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </Assign>
                                                    <FlowStep.Next>
                                                      <FlowDecision x:Name="__ReferenceID0" Condition="[string.IsnullOrEmpty(RecipientCode)]" sap:VirtualizedContainerService.HintSize="70,87">
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                            <av:Point x:Key="ShapeLocation">235,406.5</av:Point>
                                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                            <av:PointCollection x:Key="FalseConnector">305,450 450,450 450,519</av:PointCollection>
                                                          </scg:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                        <FlowDecision.False>
                                                          <FlowStep x:Name="__ReferenceID2">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <av:Point x:Key="ShapeLocation">350,519</av:Point>
                                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                <av:PointCollection x:Key="ConnectorLocation">450,541 450,571 320,571 320,636.5</av:PointCollection>
                                                              </scg:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                            <wag:GetByFilterActivity x:TypeArguments="wbo:Partner" AttrEntity="{x:Null}" DisplayName="Получаем список получателей" Filter="[string.Format(&quot;PARTNERCODE = '{0}'&quot;, RecipientCode)]" sap:VirtualizedContainerService.HintSize="200,22" Mode="Full" Result="[PartnerList]">
                                                              <sap:WorkflowViewStateService.ViewState>
                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                </scg:Dictionary>
                                                              </sap:WorkflowViewStateService.ViewState>
                                                            </wag:GetByFilterActivity>
                                                            <FlowStep.Next>
                                                              <FlowDecision x:Name="__ReferenceID5" Condition="[PartnerList.Count = 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                <sap:WorkflowViewStateService.ViewState>
                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                    <av:Point x:Key="ShapeLocation">285,636.5</av:Point>
                                                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                    <av:PointCollection x:Key="FalseConnector">355,680 380,680 380,766.5 320,766.5 320,796.5</av:PointCollection>
                                                                    <av:PointCollection x:Key="TrueConnector">285,680 120,680 120,749</av:PointCollection>
                                                                  </scg:Dictionary>
                                                                </sap:WorkflowViewStateService.ViewState>
                                                                <FlowDecision.True>
                                                                  <FlowStep x:Name="__ReferenceID6">
                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                        <av:Point x:Key="ShapeLocation">20,749</av:Point>
                                                                        <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                      </scg:Dictionary>
                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                    <Throw Exception="[new PassThroughException(&quot;Не найден получатель по коду '{0}'.&quot;, RecipientCode)]" sap:VirtualizedContainerService.HintSize="200,22">
                                                                      <sap:WorkflowViewStateService.ViewState>
                                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                        </scg:Dictionary>
                                                                      </sap:WorkflowViewStateService.ViewState>
                                                                    </Throw>
                                                                  </FlowStep>
                                                                </FlowDecision.True>
                                                                <FlowDecision.False>
                                                                  <FlowDecision x:Name="__ReferenceID3" Condition="[PartnerList.Count = 1]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                        <av:Point x:Key="ShapeLocation">285,796.5</av:Point>
                                                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                        <av:PointCollection x:Key="TrueConnector">285,840 130,840 130,961.5</av:PointCollection>
                                                                        <av:PointCollection x:Key="FalseConnector">355,840 500,840 500,969</av:PointCollection>
                                                                      </scg:Dictionary>
                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                    <FlowDecision.True>
                                                                      <FlowStep x:Name="__ReferenceID7">
                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                            <av:Point x:Key="ShapeLocation">30,961.5</av:Point>
                                                                            <av:Size x:Key="ShapeSize">200,57</av:Size>
                                                                          </scg:Dictionary>
                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                        <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:OWB" sap:VirtualizedContainerService.HintSize="200,57" Object="[Owb]">
                                                                          <wag:MultipleDynamicAssignActivity.Properties>
                                                                            <InArgument x:TypeArguments="s:Nullable(x:Decimal)" x:Key="[OWBRECIPIENT]">[PartnerList(0).GetKey(Of Decimal)]</InArgument>
                                                                          </wag:MultipleDynamicAssignActivity.Properties>
                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                            </scg:Dictionary>
                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                        </wag:MultipleDynamicAssignActivity>
                                                                      </FlowStep>
                                                                    </FlowDecision.True>
                                                                    <FlowDecision.False>
                                                                      <FlowStep x:Name="__ReferenceID4">
                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                            <av:Point x:Key="ShapeLocation">400,969</av:Point>
                                                                            <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                          </scg:Dictionary>
                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                        <Throw Exception="[new PassThroughException(&quot;Неоднозначное определение получателя для кода '{0}'.&quot;, RecipientCode)]" sap:VirtualizedContainerService.HintSize="200,22">
                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                            </scg:Dictionary>
                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                        </Throw>
                                                                      </FlowStep>
                                                                    </FlowDecision.False>
                                                                  </FlowDecision>
                                                                </FlowDecision.False>
                                                              </FlowDecision>
                                                            </FlowStep.Next>
                                                          </FlowStep>
                                                        </FlowDecision.False>
                                                      </FlowDecision>
                                                    </FlowStep.Next>
                                                  </FlowStep>
                                                </FlowDecision.False>
                                              </FlowDecision>
                                              <x:Reference>__ReferenceID0</x:Reference>
                                              <x:Reference>__ReferenceID1</x:Reference>
                                              <x:Reference>__ReferenceID2</x:Reference>
                                              <x:Reference>__ReferenceID3</x:Reference>
                                              <x:Reference>__ReferenceID4</x:Reference>
                                              <x:Reference>__ReferenceID5</x:Reference>
                                              <x:Reference>__ReferenceID6</x:Reference>
                                              <x:Reference>__ReferenceID7</x:Reference>
                                            </Flowchart>
                                          </FlowStep>
                                        </Flowchart>
                                        <FlowStep.Next>
                                          <FlowDecision x:Name="__ReferenceID43" Condition="[Owb.OWBPosL isnot Nothing]" sap:VirtualizedContainerService.HintSize="70,87">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                <av:Point x:Key="ShapeLocation">435,896.5</av:Point>
                                                <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                <av:PointCollection x:Key="TrueConnector">435,940 160,940 160,960</av:PointCollection>
                                                <av:PointCollection x:Key="FalseConnector">505,940 520,940 520,1150 340,1150 340,1180</av:PointCollection>
                                              </scg:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <FlowDecision.True>
                                              <FlowStep x:Name="__ReferenceID42">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">39,960</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">160,1020 160,1070</av:PointCollection>
                                                  </scg:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="scg:List(wbo:OWBPos)">[OwbPosList]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="scg:List(wbo:OWBPos)">[new List(Of OWBPos)(Owb.OWBPosL)]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                                <FlowStep.Next>
                                                  <FlowStep x:Name="__ReferenceID44">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">39,1070</av:Point>
                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                        <av:PointCollection x:Key="ConnectorLocation">160,1130 160,1160 340,1160 340,1180</av:PointCollection>
                                                      </scg:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                      <Assign.To>
                                                        <OutArgument x:TypeArguments="wbo:WMSBusinessCollection(wbo:OWBPos)">[Owb.OWBPosL]</OutArgument>
                                                      </Assign.To>
                                                      <Assign.Value>
                                                        <InArgument x:TypeArguments="wbo:WMSBusinessCollection(wbo:OWBPos)">[Nothing]</InArgument>
                                                      </Assign.Value>
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </Assign>
                                                    <FlowStep.Next>
                                                      <FlowStep x:Name="__ReferenceID36">
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <av:Point x:Key="ShapeLocation">219,1180</av:Point>
                                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                            <av:PointCollection x:Key="ConnectorLocation">340,1240 340,1289</av:PointCollection>
                                                          </scg:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                        <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                          <Assign.To>
                                                            <OutArgument x:TypeArguments="wbo:OWB">[OwbNew]</OutArgument>
                                                          </Assign.To>
                                                          <Assign.Value>
                                                            <InArgument x:TypeArguments="wbo:OWB">[Ctype(Owb.Clone(), OWB)]</InArgument>
                                                          </Assign.Value>
                                                          <sap:WorkflowViewStateService.ViewState>
                                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                            </scg:Dictionary>
                                                          </sap:WorkflowViewStateService.ViewState>
                                                        </Assign>
                                                        <FlowStep.Next>
                                                          <FlowStep x:Name="__ReferenceID39">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <av:Point x:Key="ShapeLocation">240,1289</av:Point>
                                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                <av:PointCollection x:Key="ConnectorLocation">340,1311 340,1394.5</av:PointCollection>
                                                              </scg:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                            <wag:UpdateActivity x:TypeArguments="wbo:OWB" DisplayName="Пишем в БД Owb без позизий" sap:VirtualizedContainerService.HintSize="200,22" IsNew="True" Key="[OwbNew]">
                                                              <sap:WorkflowViewStateService.ViewState>
                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                </scg:Dictionary>
                                                              </sap:WorkflowViewStateService.ViewState>
                                                            </wag:UpdateActivity>
                                                            <FlowStep.Next>
                                                              <FlowStep x:Name="__ReferenceID45">
                                                                <sap:WorkflowViewStateService.ViewState>
                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                    <av:Point x:Key="ShapeLocation">218,1394.5</av:Point>
                                                                    <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                                  </scg:Dictionary>
                                                                </sap:WorkflowViewStateService.ViewState>
                                                                <Flowchart DisplayName="Позиции" sap:VirtualizedContainerService.HintSize="244,51">
                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                      <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                                      <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                                      <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,154.5</av:PointCollection>
                                                                    </scg:Dictionary>
                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                  <Flowchart.StartNode>
                                                                    <x:Reference>__ReferenceID35</x:Reference>
                                                                  </Flowchart.StartNode>
                                                                  <FlowStep x:Name="__ReferenceID35">
                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                        <av:Point x:Key="ShapeLocation">178,154.5</av:Point>
                                                                        <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                                      </scg:Dictionary>
                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                    <ForEach x:TypeArguments="wbo:OWBPos" DisplayName="ForEach&lt;OWBPos&gt;" sap:VirtualizedContainerService.HintSize="448,395" Values="[OwbPosList]">
                                                                      <ActivityAction x:TypeArguments="wbo:OWBPos">
                                                                        <ActivityAction.Argument>
                                                                          <DelegateInArgument x:TypeArguments="wbo:OWBPos" Name="owbpos" />
                                                                        </ActivityAction.Argument>
                                                                        <TryCatch sap:VirtualizedContainerService.HintSize="418,287">
                                                                          <TryCatch.Try>
                                                                            <Flowchart DisplayName="Позиция" sap:VirtualizedContainerService.HintSize="645,636">
                                                                              <Flowchart.Variables>
                                                                                <Variable x:TypeArguments="wbo:OWBPos" Name="owbposnew" />
                                                                              </Flowchart.Variables>
                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                  <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                                                                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,151.5</av:PointCollection>
                                                                                  <x:Double x:Key="Width">631</x:Double>
                                                                                </scg:Dictionary>
                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                              <Flowchart.StartNode>
                                                                                <x:Reference>__ReferenceID34</x:Reference>
                                                                              </Flowchart.StartNode>
                                                                              <FlowStep x:Name="__ReferenceID10">
                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                    <av:Point x:Key="ShapeLocation">200,559</av:Point>
                                                                                    <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                                  </scg:Dictionary>
                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                <wag:UpdateActivity x:TypeArguments="wbo:OWBPos" DisplayName="Пишем в БД" sap:VirtualizedContainerService.HintSize="200,22" IsNew="True" Key="[owbposnew]" />
                                                                              </FlowStep>
                                                                              <FlowStep x:Name="__ReferenceID32">
                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                    <av:Point x:Key="ShapeLocation">179,440</av:Point>
                                                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                    <av:PointCollection x:Key="ConnectorLocation">300,500 300,559</av:PointCollection>
                                                                                  </scg:Dictionary>
                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                                  <Assign.To>
                                                                                    <OutArgument x:TypeArguments="wbo:OWBPos">[owbposnew]</OutArgument>
                                                                                  </Assign.To>
                                                                                  <Assign.Value>
                                                                                    <InArgument x:TypeArguments="wbo:OWBPos">[CType(owbpos.Clone(), OWBPos)]</InArgument>
                                                                                  </Assign.Value>
                                                                                </Assign>
                                                                                <FlowStep.Next>
                                                                                  <x:Reference>__ReferenceID10</x:Reference>
                                                                                </FlowStep.Next>
                                                                              </FlowStep>
                                                                              <FlowStep x:Name="__ReferenceID34">
                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                    <av:Point x:Key="ShapeLocation">200,151.5</av:Point>
                                                                                    <av:Size x:Key="ShapeSize">200,57</av:Size>
                                                                                    <av:PointCollection x:Key="ConnectorLocation">300,208.5 300,294.5</av:PointCollection>
                                                                                  </scg:Dictionary>
                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:OWBPos" DisplayName="Ид накладной" sap:VirtualizedContainerService.HintSize="200,57" Object="[owbpos]">
                                                                                  <wag:MultipleDynamicAssignActivity.Properties>
                                                                                    <InArgument x:TypeArguments="s:Nullable(x:Decimal)" x:Key="[OWBID_R]">[OwbNew.GetKey(Of Decimal)]</InArgument>
                                                                                  </wag:MultipleDynamicAssignActivity.Properties>
                                                                                </wag:MultipleDynamicAssignActivity>
                                                                                <FlowStep.Next>
                                                                                  <FlowStep x:Name="__ReferenceID33">
                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                        <av:Point x:Key="ShapeLocation">178,294.5</av:Point>
                                                                                        <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                                                        <av:PointCollection x:Key="ConnectorLocation">300,345.5 300,440</av:PointCollection>
                                                                                      </scg:Dictionary>
                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                    <Flowchart DisplayName="Sku" sap:VirtualizedContainerService.HintSize="244,51">
                                                                                      <Flowchart.Variables>
                                                                                        <Variable x:TypeArguments="x:String" Name="ArtName" />
                                                                                        <Variable x:TypeArguments="x:String" Name="FilterArt" />
                                                                                        <Variable x:TypeArguments="s:Nullable(x:Decimal)" Name="FactoryId" />
                                                                                        <Variable x:TypeArguments="scg:List(wbo:Art)" Name="ArtL" />
                                                                                      </Flowchart.Variables>
                                                                                      <sap:WorkflowViewStateService.ViewState>
                                                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                          <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                                                          <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                                                          <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,176.5</av:PointCollection>
                                                                                          <x:Double x:Key="Height">1475.5</x:Double>
                                                                                        </scg:Dictionary>
                                                                                      </sap:WorkflowViewStateService.ViewState>
                                                                                      <Flowchart.StartNode>
                                                                                        <x:Reference>__ReferenceID31</x:Reference>
                                                                                      </Flowchart.StartNode>
                                                                                      <FlowDecision x:Name="__ReferenceID31" Condition="[owbpos.Get(Of Decimal?)(&quot;SKUID_R&quot;).HasValue]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                            <av:Point x:Key="ShapeLocation">265,176.5</av:Point>
                                                                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                                            <av:PointCollection x:Key="FalseConnector">335,220 350,220 350,320 290,320 290,350</av:PointCollection>
                                                                                          </scg:Dictionary>
                                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                                        <FlowDecision.False>
                                                                                          <FlowStep x:Name="__ReferenceID22">
                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                <av:Point x:Key="ShapeLocation">169,350</av:Point>
                                                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                <av:PointCollection x:Key="ConnectorLocation">290,410 290,476.5</av:PointCollection>
                                                                                              </scg:Dictionary>
                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                            <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                                              <Assign.To>
                                                                                                <OutArgument x:TypeArguments="x:String">[ArtName]</OutArgument>
                                                                                              </Assign.To>
                                                                                              <Assign.Value>
                                                                                                <InArgument x:TypeArguments="x:String">[owbpos.Get(Of String)("OWBPOSARTNAME")]</InArgument>
                                                                                              </Assign.Value>
                                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                </scg:Dictionary>
                                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                                            </Assign>
                                                                                            <FlowStep.Next>
                                                                                              <FlowDecision x:Name="__ReferenceID23" Condition="[string.IsnullOrEmpty(ArtName)]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                    <av:Point x:Key="ShapeLocation">255,476.5</av:Point>
                                                                                                    <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                                                    <av:PointCollection x:Key="TrueConnector">255,520 120,520 120,579</av:PointCollection>
                                                                                                    <av:PointCollection x:Key="FalseConnector">325,520 355,520 355,660 300,660 300,690</av:PointCollection>
                                                                                                  </scg:Dictionary>
                                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                                <FlowDecision.True>
                                                                                                  <FlowStep x:Name="__ReferenceID24">
                                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                        <av:Point x:Key="ShapeLocation">20,579</av:Point>
                                                                                                        <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                                                      </scg:Dictionary>
                                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                                    <Throw Exception="[new PassThroughException(&quot;Наименование артикула (OWBPOSARTNAME) не определно.&quot;)]" sap:VirtualizedContainerService.HintSize="200,22">
                                                                                                      <sap:WorkflowViewStateService.ViewState>
                                                                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                        </scg:Dictionary>
                                                                                                      </sap:WorkflowViewStateService.ViewState>
                                                                                                    </Throw>
                                                                                                  </FlowStep>
                                                                                                </FlowDecision.True>
                                                                                                <FlowDecision.False>
                                                                                                  <FlowStep x:Name="__ReferenceID26">
                                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                        <av:Point x:Key="ShapeLocation">179,690</av:Point>
                                                                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                        <av:PointCollection x:Key="ConnectorLocation">300,750 300,836.5</av:PointCollection>
                                                                                                      </scg:Dictionary>
                                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                      <Assign.To>
                                                                                                        <OutArgument x:TypeArguments="s:Nullable(x:Decimal)">[FactoryId]</OutArgument>
                                                                                                      </Assign.To>
                                                                                                      <Assign.Value>
                                                                                                        <InArgument x:TypeArguments="s:Nullable(x:Decimal)">[owbpos.Get(Of Decimal?)("FACTORYID_R")]</InArgument>
                                                                                                      </Assign.Value>
                                                                                                      <sap:WorkflowViewStateService.ViewState>
                                                                                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                        </scg:Dictionary>
                                                                                                      </sap:WorkflowViewStateService.ViewState>
                                                                                                    </Assign>
                                                                                                    <FlowStep.Next>
                                                                                                      <FlowDecision x:Name="__ReferenceID25" Condition="[FactoryId.HasValue]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                            <av:Point x:Key="ShapeLocation">265,836.5</av:Point>
                                                                                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                                                            <av:PointCollection x:Key="FalseConnector">335,880 450,880 450,1050</av:PointCollection>
                                                                                                            <av:PointCollection x:Key="TrueConnector">265,880 130,880 130,1040</av:PointCollection>
                                                                                                          </scg:Dictionary>
                                                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                                                        <FlowDecision.True>
                                                                                                          <FlowStep x:Name="__ReferenceID28">
                                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                <av:Point x:Key="ShapeLocation">9,1040</av:Point>
                                                                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                                <av:PointCollection x:Key="ConnectorLocation">130,1100 130,1130 290,1130 290,1189</av:PointCollection>
                                                                                                              </scg:Dictionary>
                                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                                            <Assign DisplayName="Заполним фильтр для Art" sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                              <Assign.To>
                                                                                                                <OutArgument x:TypeArguments="x:String">[FilterArt]</OutArgument>
                                                                                                              </Assign.To>
                                                                                                              <Assign.Value>
                                                                                                                <InArgument x:TypeArguments="x:String">[String.Format("ARTNAME='{0}' AND MANDANTID={1} AND FACTORYID_R ={2}", ArtName, Owb.Get(Of Object)("MANDANTID"), FactoryId)]</InArgument>
                                                                                                              </Assign.Value>
                                                                                                            </Assign>
                                                                                                            <FlowStep.Next>
                                                                                                              <FlowStep x:Name="__ReferenceID21">
                                                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                    <av:Point x:Key="ShapeLocation">190,1189</av:Point>
                                                                                                                    <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                                                                    <av:PointCollection x:Key="ConnectorLocation">290,1211 290,1264.5</av:PointCollection>
                                                                                                                  </scg:Dictionary>
                                                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                                                <wag:GetByFilterActivity x:TypeArguments="wbo:Art" AttrEntity="{x:Null}" DisplayName="Получение Art" Filter="[FilterArt]" sap:VirtualizedContainerService.HintSize="200,22" Mode="Full" Result="[ArtL]" />
                                                                                                                <FlowStep.Next>
                                                                                                                  <FlowStep x:Name="__ReferenceID29">
                                                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                        <av:Point x:Key="ShapeLocation">168,1264.5</av:Point>
                                                                                                                        <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                                                                                        <av:PointCollection x:Key="ConnectorLocation">290,1315.5 290,1404.5</av:PointCollection>
                                                                                                                      </scg:Dictionary>
                                                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                                                    <If Condition="[ArtL.Count &lt;&gt; 1]" DisplayName="Должен быть один Art" sap:VirtualizedContainerService.HintSize="244,51">
                                                                                                                      <If.Then>
                                                                                                                        <Throw Exception="[new PassThroughException(&quot;Неверное количество соответствий для ART = '{0}'.&quot;, ArtName)]" sap:VirtualizedContainerService.HintSize="200,22" />
                                                                                                                      </If.Then>
                                                                                                                    </If>
                                                                                                                    <FlowStep.Next>
                                                                                                                      <FlowStep x:Name="__ReferenceID30">
                                                                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                            <av:Point x:Key="ShapeLocation">168,1404.5</av:Point>
                                                                                                                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                                                                                          </scg:Dictionary>
                                                                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                                                                        <Flowchart DisplayName="Вычисление SKU" sap:VirtualizedContainerService.HintSize="660,988">
                                                                                                                          <Flowchart.Variables>
                                                                                                                            <Variable x:TypeArguments="x:String" Name="MeasureInfo" />
                                                                                                                            <Variable x:TypeArguments="x:String" Name="FilterSKU" />
                                                                                                                            <Variable x:TypeArguments="x:String" Name="MeasureCode" />
                                                                                                                            <Variable x:TypeArguments="scg:List(wbo:SKU)" Name="SKUS" />
                                                                                                                          </Flowchart.Variables>
                                                                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                                                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                                              <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                                                                                              <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                                                                                              <x:Double x:Key="Width">645.5</x:Double>
                                                                                                                              <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,150</av:PointCollection>
                                                                                                                              <x:Double x:Key="Height">952</x:Double>
                                                                                                                              <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                                                                                                            </scg:Dictionary>
                                                                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                                                                          <Flowchart.StartNode>
                                                                                                                            <x:Reference>__ReferenceID20</x:Reference>
                                                                                                                          </Flowchart.StartNode>
                                                                                                                          <FlowStep x:Name="__ReferenceID12">
                                                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                <av:Point x:Key="ShapeLocation">349,420</av:Point>
                                                                                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                                                <av:PointCollection x:Key="ConnectorLocation">470,480 470,550</av:PointCollection>
                                                                                                                              </scg:Dictionary>
                                                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                                                            <Assign DisplayName="Фильтр: все SKU с учетом ЕИ" sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                                              <Assign.To>
                                                                                                                                <OutArgument x:TypeArguments="x:String">[FilterSKU]</OutArgument>
                                                                                                                              </Assign.To>
                                                                                                                              <Assign.Value>
                                                                                                                                <InArgument x:TypeArguments="x:String">[String.Format("ARTCODE_R = '{0}' AND MEASURECODE_R='{1}'", ArtL(0).GetKey(), MeasureCode)]</InArgument>
                                                                                                                              </Assign.Value>
                                                                                                                            </Assign>
                                                                                                                            <FlowStep.Next>
                                                                                                                              <FlowStep x:Name="__ReferenceID16">
                                                                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                    <av:Point x:Key="ShapeLocation">349,550</av:Point>
                                                                                                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                                                    <av:PointCollection x:Key="ConnectorLocation">470,610 470,640 300,640 300,659</av:PointCollection>
                                                                                                                                  </scg:Dictionary>
                                                                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                                                                <Assign DisplayName="Фильтр: все SKU с учетом ЕИ" sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                                                  <Assign.To>
                                                                                                                                    <OutArgument x:TypeArguments="x:String">[MeasureInfo]</OutArgument>
                                                                                                                                  </Assign.To>
                                                                                                                                  <Assign.Value>
                                                                                                                                    <InArgument x:TypeArguments="x:String">[String.Format(" (Указана ЕИ с кодом '{0}')", MeasureCode)]</InArgument>
                                                                                                                                  </Assign.Value>
                                                                                                                                </Assign>
                                                                                                                                <FlowStep.Next>
                                                                                                                                  <FlowStep x:Name="__ReferenceID11">
                                                                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                        <av:Point x:Key="ShapeLocation">200,659</av:Point>
                                                                                                                                        <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                                                                                        <av:PointCollection x:Key="ConnectorLocation">300,681 300,716.5</av:PointCollection>
                                                                                                                                      </scg:Dictionary>
                                                                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                                                                    <wag:GetByFilterActivity x:TypeArguments="wbo:SKU" AttrEntity="{x:Null}" DisplayName="Получение SKU" Filter="[FilterSKU]" sap:VirtualizedContainerService.HintSize="200,22" Mode="Full" Result="[SKUS]" />
                                                                                                                                    <FlowStep.Next>
                                                                                                                                      <FlowDecision x:Name="__ReferenceID14" Condition="[SKUS.Count = 1]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                                                                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                                                            <av:Point x:Key="ShapeLocation">265,716.5</av:Point>
                                                                                                                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                                                                                            <x:String x:Key="FalseLabel">Не один</x:String>
                                                                                                                                            <x:String x:Key="TrueLabel">Всего один</x:String>
                                                                                                                                            <av:PointCollection x:Key="FalseConnector">335,760 490,760 490,919</av:PointCollection>
                                                                                                                                            <av:PointCollection x:Key="TrueConnector">265,760 160,760 160,871.5</av:PointCollection>
                                                                                                                                          </scg:Dictionary>
                                                                                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                                                                                        <FlowDecision.True>
                                                                                                                                          <FlowStep x:Name="__ReferenceID19">
                                                                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                                <av:Point x:Key="ShapeLocation">60,871.5</av:Point>
                                                                                                                                                <av:Size x:Key="ShapeSize">200,57</av:Size>
                                                                                                                                                <av:PointCollection x:Key="ConnectorLocation">145,869 145,985</av:PointCollection>
                                                                                                                                              </scg:Dictionary>
                                                                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                                                                            <wag:MultipleDynamicAssignActivity x:TypeArguments="wbo:OWBPos" DisplayName="Присваиваем значение SKU" sap:VirtualizedContainerService.HintSize="200,57" Object="[owbpos]">
                                                                                                                                              <wag:MultipleDynamicAssignActivity.Properties>
                                                                                                                                                <InArgument x:TypeArguments="s:Nullable(x:Decimal)" x:Key="[SKUID_R]">[SKUS(0).GetKey(Of Decimal)]</InArgument>
                                                                                                                                              </wag:MultipleDynamicAssignActivity.Properties>
                                                                                                                                            </wag:MultipleDynamicAssignActivity>
                                                                                                                                          </FlowStep>
                                                                                                                                        </FlowDecision.True>
                                                                                                                                        <FlowDecision.False>
                                                                                                                                          <FlowStep x:Name="__ReferenceID15">
                                                                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                                <av:Point x:Key="ShapeLocation">390,919</av:Point>
                                                                                                                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                                                                                              </scg:Dictionary>
                                                                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                                                                            <Throw Exception="[new PassThroughException(&quot;Неверное количество соответствий для SKU. Найдено {0} SKU для артикула '{1}'{2}.&quot;, SKUS.Count, ArtL(0).GetKey(), MeasureInfo)]" sap:VirtualizedContainerService.HintSize="200,22" />
                                                                                                                                          </FlowStep>
                                                                                                                                        </FlowDecision.False>
                                                                                                                                      </FlowDecision>
                                                                                                                                    </FlowStep.Next>
                                                                                                                                  </FlowStep>
                                                                                                                                </FlowStep.Next>
                                                                                                                              </FlowStep>
                                                                                                                            </FlowStep.Next>
                                                                                                                          </FlowStep>
                                                                                                                          <FlowDecision x:Name="__ReferenceID18" Condition="[string.IsNullOrEmpty(MeasureCode)]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                                                <av:Point x:Key="ShapeLocation">265,276.5</av:Point>
                                                                                                                                <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                                                                                <x:String x:Key="FalseLabel">ИЕ задали</x:String>
                                                                                                                                <x:String x:Key="TrueLabel">ЕИ не задали</x:String>
                                                                                                                                <av:PointCollection x:Key="FalseConnector">335,320 470,320 470,420</av:PointCollection>
                                                                                                                                <av:PointCollection x:Key="TrueConnector">265,320 130,320 130,420</av:PointCollection>
                                                                                                                              </scg:Dictionary>
                                                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                                                            <FlowDecision.True>
                                                                                                                              <FlowStep x:Name="__ReferenceID13">
                                                                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                                                                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                    <av:Point x:Key="ShapeLocation">9,420</av:Point>
                                                                                                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                                                    <av:PointCollection x:Key="ConnectorLocation">130,480 130,550</av:PointCollection>
                                                                                                                                  </scg:Dictionary>
                                                                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                                                                <Assign DisplayName="Фильтр: все SKU для данного артикула" sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                                                  <Assign.To>
                                                                                                                                    <OutArgument x:TypeArguments="x:String">[FilterSKU]</OutArgument>
                                                                                                                                  </Assign.To>
                                                                                                                                  <Assign.Value>
                                                                                                                                    <InArgument x:TypeArguments="x:String">[String.Format("(ARTCODE_R='{0}')", ArtL(0).GetKey())]</InArgument>
                                                                                                                                  </Assign.Value>
                                                                                                                                </Assign>
                                                                                                                                <FlowStep.Next>
                                                                                                                                  <FlowStep x:Name="__ReferenceID17">
                                                                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                                                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                        <av:Point x:Key="ShapeLocation">9,550</av:Point>
                                                                                                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                                                        <av:PointCollection x:Key="ConnectorLocation">130,610 130,640 300,640 300,659</av:PointCollection>
                                                                                                                                      </scg:Dictionary>
                                                                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                                                                    <Assign DisplayName="Фильтр: все SKU для данного артикула" sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                                                      <Assign.To>
                                                                                                                                        <OutArgument x:TypeArguments="x:String">[MeasureInfo]</OutArgument>
                                                                                                                                      </Assign.To>
                                                                                                                                      <Assign.Value>
                                                                                                                                        <InArgument x:TypeArguments="x:String">[String.Format(" (ЕИ не указана)")]</InArgument>
                                                                                                                                      </Assign.Value>
                                                                                                                                    </Assign>
                                                                                                                                    <FlowStep.Next>
                                                                                                                                      <x:Reference>__ReferenceID11</x:Reference>
                                                                                                                                    </FlowStep.Next>
                                                                                                                                  </FlowStep>
                                                                                                                                </FlowStep.Next>
                                                                                                                              </FlowStep>
                                                                                                                            </FlowDecision.True>
                                                                                                                            <FlowDecision.False>
                                                                                                                              <x:Reference>__ReferenceID12</x:Reference>
                                                                                                                            </FlowDecision.False>
                                                                                                                          </FlowDecision>
                                                                                                                          <x:Reference>__ReferenceID13</x:Reference>
                                                                                                                          <x:Reference>__ReferenceID11</x:Reference>
                                                                                                                          <x:Reference>__ReferenceID14</x:Reference>
                                                                                                                          <x:Reference>__ReferenceID15</x:Reference>
                                                                                                                          <x:Reference>__ReferenceID16</x:Reference>
                                                                                                                          <x:Reference>__ReferenceID17</x:Reference>
                                                                                                                          <FlowStep x:Name="__ReferenceID20">
                                                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                <av:Point x:Key="ShapeLocation">179,150</av:Point>
                                                                                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                                                <av:PointCollection x:Key="ConnectorLocation">300,210 300,276.5</av:PointCollection>
                                                                                                                              </scg:Dictionary>
                                                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                                                            <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                                              <Assign.To>
                                                                                                                                <OutArgument x:TypeArguments="x:String">[MeasureCode]</OutArgument>
                                                                                                                              </Assign.To>
                                                                                                                              <Assign.Value>
                                                                                                                                <InArgument x:TypeArguments="x:String">[owbpos.Get(Of String)("OWBPOSMEASURECODE")]</InArgument>
                                                                                                                              </Assign.Value>
                                                                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                                                                </scg:Dictionary>
                                                                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                                                                            </Assign>
                                                                                                                            <FlowStep.Next>
                                                                                                                              <x:Reference>__ReferenceID18</x:Reference>
                                                                                                                            </FlowStep.Next>
                                                                                                                          </FlowStep>
                                                                                                                          <x:Reference>__ReferenceID19</x:Reference>
                                                                                                                        </Flowchart>
                                                                                                                      </FlowStep>
                                                                                                                    </FlowStep.Next>
                                                                                                                  </FlowStep>
                                                                                                                </FlowStep.Next>
                                                                                                              </FlowStep>
                                                                                                            </FlowStep.Next>
                                                                                                          </FlowStep>
                                                                                                        </FlowDecision.True>
                                                                                                        <FlowDecision.False>
                                                                                                          <FlowStep x:Name="__ReferenceID27">
                                                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                                                              <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                                                <av:Point x:Key="ShapeLocation">329,1050</av:Point>
                                                                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                                                <av:PointCollection x:Key="ConnectorLocation">450,1110 450,1140 290,1140 290,1189</av:PointCollection>
                                                                                                              </scg:Dictionary>
                                                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                                                            <Assign DisplayName="Заполним фильтр для Art" sap:VirtualizedContainerService.HintSize="242,60">
                                                                                                              <Assign.To>
                                                                                                                <OutArgument x:TypeArguments="x:String">[FilterArt]</OutArgument>
                                                                                                              </Assign.To>
                                                                                                              <Assign.Value>
                                                                                                                <InArgument x:TypeArguments="x:String">[String.Format("ARTNAME='{0}' AND MANDANTID={1} AND FACTORYID_R IS NULL", ArtName, Owb.Get(Of Object)("MANDANTID"))]</InArgument>
                                                                                                              </Assign.Value>
                                                                                                            </Assign>
                                                                                                            <FlowStep.Next>
                                                                                                              <x:Reference>__ReferenceID21</x:Reference>
                                                                                                            </FlowStep.Next>
                                                                                                          </FlowStep>
                                                                                                        </FlowDecision.False>
                                                                                                      </FlowDecision>
                                                                                                    </FlowStep.Next>
                                                                                                  </FlowStep>
                                                                                                </FlowDecision.False>
                                                                                              </FlowDecision>
                                                                                            </FlowStep.Next>
                                                                                          </FlowStep>
                                                                                        </FlowDecision.False>
                                                                                      </FlowDecision>
                                                                                      <x:Reference>__ReferenceID22</x:Reference>
                                                                                      <x:Reference>__ReferenceID23</x:Reference>
                                                                                      <x:Reference>__ReferenceID24</x:Reference>
                                                                                      <x:Reference>__ReferenceID25</x:Reference>
                                                                                      <x:Reference>__ReferenceID26</x:Reference>
                                                                                      <x:Reference>__ReferenceID27</x:Reference>
                                                                                      <x:Reference>__ReferenceID28</x:Reference>
                                                                                      <x:Reference>__ReferenceID21</x:Reference>
                                                                                      <x:Reference>__ReferenceID29</x:Reference>
                                                                                      <x:Reference>__ReferenceID30</x:Reference>
                                                                                    </Flowchart>
                                                                                    <FlowStep.Next>
                                                                                      <x:Reference>__ReferenceID32</x:Reference>
                                                                                    </FlowStep.Next>
                                                                                  </FlowStep>
                                                                                </FlowStep.Next>
                                                                              </FlowStep>
                                                                              <x:Reference>__ReferenceID33</x:Reference>
                                                                            </Flowchart>
                                                                          </TryCatch.Try>
                                                                          <TryCatch.Catches>
                                                                            <Catch x:TypeArguments="s:Exception" sap:VirtualizedContainerService.HintSize="404,21">
                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                  <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                                                                                  <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                                                                </scg:Dictionary>
                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                              <ActivityAction x:TypeArguments="s:Exception">
                                                                                <ActivityAction.Argument>
                                                                                  <DelegateInArgument x:TypeArguments="s:Exception" Name="exception" />
                                                                                </ActivityAction.Argument>
                                                                                <Throw Exception="[new PassThroughException(string.Format(&quot;При загрузке позиций OWBPOSNUMBER = '{0}' (OWBNAME = '{1}') произошла ошибка: {2}&quot;, _&#xA;owbpos.Get(Of Object)(&quot;OWBPOSNUMBER&quot;), Owb.Get(Of Object)(&quot;OWBNAME&quot;), exception), exception)]" sap:VirtualizedContainerService.HintSize="200,22" />
                                                                              </ActivityAction>
                                                                            </Catch>
                                                                          </TryCatch.Catches>
                                                                        </TryCatch>
                                                                      </ActivityAction>
                                                                    </ForEach>
                                                                  </FlowStep>
                                                                </Flowchart>
                                                              </FlowStep>
                                                            </FlowStep.Next>
                                                          </FlowStep>
                                                        </FlowStep.Next>
                                                      </FlowStep>
                                                    </FlowStep.Next>
                                                  </FlowStep>
                                                </FlowStep.Next>
                                              </FlowStep>
                                            </FlowDecision.True>
                                            <FlowDecision.False>
                                              <x:Reference>__ReferenceID36</x:Reference>
                                            </FlowDecision.False>
                                          </FlowDecision>
                                        </FlowStep.Next>
                                      </FlowStep>
                                    </FlowDecision.False>
                                  </FlowDecision>
                                  <FlowStep x:Name="__ReferenceID40">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">172,466</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                        <av:PointCollection x:Key="ConnectorLocation">293,526 293,572.5</av:PointCollection>
                                      </scg:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="wbo:OWB">[Owb]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="wbo:OWB">[Ctype(XmlDocumentConverter.ConvertTo(GetType(OWB), xmlDoc), OWB)]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                    <FlowStep.Next>
                                      <x:Reference>__ReferenceID37</x:Reference>
                                    </FlowStep.Next>
                                  </FlowStep>
                                  <x:Reference>__ReferenceID38</x:Reference>
                                  <x:Reference>__ReferenceID39</x:Reference>
                                  <FlowStep x:Name="__ReferenceID47">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                        <av:Point x:Key="ShapeLocation">169,170</av:Point>
                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                        <av:PointCollection x:Key="ConnectorLocation">290,230 290,274</av:PointCollection>
                                      </scg:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="sx1:XmlDocument">[xmlDoc]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="sx1:XmlDocument">[new XmlDocument]</InArgument>
                                      </Assign.Value>
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </Assign>
                                    <FlowStep.Next>
                                      <FlowStep x:Name="__ReferenceID41">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                            <av:Point x:Key="ShapeLocation">181,274</av:Point>
                                            <av:Size x:Key="ShapeSize">218,132</av:Size>
                                            <av:PointCollection x:Key="ConnectorLocation">290,406 290,436 293,436 293,466</av:PointCollection>
                                          </scg:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <InvokeMethod sap:VirtualizedContainerService.HintSize="218,132" MethodName="LoadXml">
                                          <InvokeMethod.TargetObject>
                                            <InArgument x:TypeArguments="sx1:XmlDocument">[xmlDoc]</InArgument>
                                          </InvokeMethod.TargetObject>
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            </scg:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <InArgument x:TypeArguments="x:String">[item("INNERXML").ToString]</InArgument>
                                        </InvokeMethod>
                                        <FlowStep.Next>
                                          <x:Reference>__ReferenceID40</x:Reference>
                                        </FlowStep.Next>
                                      </FlowStep>
                                    </FlowStep.Next>
                                  </FlowStep>
                                  <x:Reference>__ReferenceID41</x:Reference>
                                  <x:Reference>__ReferenceID42</x:Reference>
                                  <x:Reference>__ReferenceID43</x:Reference>
                                  <x:Reference>__ReferenceID44</x:Reference>
                                  <x:Reference>__ReferenceID45</x:Reference>
                                  <x:Reference>__ReferenceID36</x:Reference>
                                  <x:Reference>__ReferenceID46</x:Reference>
                                </Flowchart>
                              </TryCatch.Try>
                              <TryCatch.Catches>
                                <Catch x:TypeArguments="s:Exception" sap:VirtualizedContainerService.HintSize="404,21">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                                      <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                    </scg:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <ActivityAction x:TypeArguments="s:Exception">
                                    <ActivityAction.Argument>
                                      <DelegateInArgument x:TypeArguments="s:Exception" Name="exception" />
                                    </ActivityAction.Argument>
                                    <Sequence sap:VirtualizedContainerService.HintSize="222,146">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        </scg:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Throw Exception="[new PassThroughException(string.Format(&quot;При загрузке данных Owb для данных с OWBNAME = '{0}' произошла ошибка: {1}&quot;, _&#xA;iif(item.ContainsKey(&quot;OWBNAME&quot;), item(&quot;OWBNAME&quot;), &quot;&quot;), exception), exception)]" sap:VirtualizedContainerService.HintSize="200,22" />
                                    </Sequence>
                                  </ActivityAction>
                                </Catch>
                              </TryCatch.Catches>
                            </TryCatch>
                          </ActivityAction>
                        </ForEach>
                      </FlowStep>
                    </Flowchart>
                    <wag:CommitTransactionActivity sap:VirtualizedContainerService.HintSize="244,22" />
                  </Sequence>
                </TryCatch.Try>
                <TryCatch.Catches>
                  <Catch x:TypeArguments="s:Exception" sap:VirtualizedContainerService.HintSize="404,21">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                        <x:Boolean x:Key="IsPinned">False</x:Boolean>
                      </scg:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                    <ActivityAction x:TypeArguments="s:Exception">
                      <ActivityAction.Argument>
                        <DelegateInArgument x:TypeArguments="s:Exception" Name="exception" />
                      </ActivityAction.Argument>
                      <Sequence sap:VirtualizedContainerService.HintSize="222,208">
                        <sap:WorkflowViewStateService.ViewState>
                          <scg:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <wag:RollbackTransactionActivity sap:VirtualizedContainerService.HintSize="200,22" />
                        <Rethrow sap:VirtualizedContainerService.HintSize="200,22" />
                      </Sequence>
                    </ActivityAction>
                  </Catch>
                </TryCatch.Catches>
              </TryCatch>
            </FlowStep>
          </Flowchart>
          <FlowStep.Next>
            <FlowStep x:Name="__ReferenceID52">
              <sap:WorkflowViewStateService.ViewState>
                <scg:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">200,819</av:Point>
                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                </scg:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <wag:WriteLog4NetActivity DisplayName="Процесс завершен" Error="[string.Format(&quot;БП &quot;&quot;{0}&quot;&quot; завершен&quot;, BpName)]" sap:VirtualizedContainerService.HintSize="200,22" Level="Debug">
                <sap:WorkflowViewStateService.ViewState>
                  <scg:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  </scg:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
              </wag:WriteLog4NetActivity>
            </FlowStep>
          </FlowStep.Next>
        </FlowStep>
      </FlowStep.Next>
    </FlowStep>
    <FlowStep x:Name="__ReferenceID51">
      <sap:WorkflowViewStateService.ViewState>
        <scg:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">200,329</av:Point>
          <av:Size x:Key="ShapeSize">200,22</av:Size>
          <av:PointCollection x:Key="ConnectorLocation">300,351 300,449</av:PointCollection>
        </scg:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <wag:GetDynamicDictionaryFromXmlActivity Descendant="ITEMS" DisplayName="Получение списка объектов" sap:VirtualizedContainerService.HintSize="200,22" InputXml="[WMSIMPORT]" Result="[ItemTag]">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </wag:GetDynamicDictionaryFromXmlActivity>
      <FlowStep.Next>
        <x:Reference>__ReferenceID50</x:Reference>
      </FlowStep.Next>
    </FlowStep>
    <FlowStep x:Name="__ReferenceID53">
      <sap:WorkflowViewStateService.ViewState>
        <scg:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">179,180</av:Point>
          <av:Size x:Key="ShapeSize">242,60</av:Size>
          <av:PointCollection x:Key="ConnectorLocation">300,240 300,329</av:PointCollection>
        </scg:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <Assign sap:VirtualizedContainerService.HintSize="242,60">
        <Assign.To>
          <OutArgument x:TypeArguments="x:String">[WMSIMPORT]</OutArgument>
        </Assign.To>
        <Assign.Value>
          <InArgument x:TypeArguments="x:String">[BpContext.Get(Of string)("WMSTELEGRAM")]</InArgument>
        </Assign.Value>
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </Assign>
      <FlowStep.Next>
        <x:Reference>__ReferenceID51</x:Reference>
      </FlowStep.Next>
    </FlowStep>
    <x:Reference>__ReferenceID52</x:Reference>
    <FlowStep x:Name="__ReferenceID55">
      <sap:WorkflowViewStateService.ViewState>
        <scg:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">200,119</av:Point>
          <av:Size x:Key="ShapeSize">200,22</av:Size>
          <av:PointCollection x:Key="ConnectorLocation">300,141 300,180</av:PointCollection>
        </scg:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <wag:WriteLog4NetActivity DisplayName="Log4Net" Error="[string.format(&quot;Начало БП &quot;&quot;{0}&quot;&quot;&quot;, BpName)]" sap:VirtualizedContainerService.HintSize="200,22" Level="Debug">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </wag:WriteLog4NetActivity>
      <FlowStep.Next>
        <x:Reference>__ReferenceID53</x:Reference>
      </FlowStep.Next>
    </FlowStep>
    <x:Reference>__ReferenceID54</x:Reference>
  </Flowchart>
</Activity>