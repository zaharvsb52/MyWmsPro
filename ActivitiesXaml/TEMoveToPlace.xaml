<Activity mc:Ignorable="sads sap" x:Class="{x:Null}"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:bm="clr-namespace:BLToolkit.Mapping;assembly=BLToolkit.4"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=Microsoft.VisualBasic"
 xmlns:mv1="clr-namespace:Microsoft.VisualBasic;assembly=System"
 xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities"
 xmlns:mvc="clr-namespace:Microsoft.VisualBasic.CompilerServices;assembly=Microsoft.VisualBasic"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:s1="clr-namespace:System;assembly=System"
 xmlns:s2="clr-namespace:System;assembly=System.Core"
 xmlns:s3="clr-namespace:System;assembly=Microsoft.CompilerServices.AsyncTargetingPack.Net4"
 xmlns:s4="clr-namespace:System;assembly=System.ServiceModel"
 xmlns:s5="clr-namespace:System;assembly=System.ComponentModel.Composition"
 xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System.Core"
 xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System"
 xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel"
 xmlns:sco="clr-namespace:System.Collections.ObjectModel;assembly=System"
 xmlns:sco1="clr-namespace:System.Collections.ObjectModel;assembly=mscorlib"
 xmlns:sl="clr-namespace:System.Linq;assembly=System.Core"
 xmlns:sw="clr-namespace:System.Windows;assembly=PresentationCore"
 xmlns:sw1="clr-namespace:System.Windows;assembly=WindowsBase"
 xmlns:sw2="clr-namespace:System.Windows;assembly=PresentationFramework"
 xmlns:sx="clr-namespace:System.Xml;assembly=System.Data"
 xmlns:sx1="clr-namespace:System.Xml;assembly=System.Xml"
 xmlns:sx2="clr-namespace:System.Xml;assembly=System.Runtime.Serialization"
 xmlns:sxs="clr-namespace:System.Xml.Serialization;assembly=System.Xml"
 xmlns:wab="clr-namespace:wmsMLC.Activities.Business;assembly=wmsMLC.Activities.Business"
 xmlns:wada="clr-namespace:wmsMLC.Activities.Dialogs.Activities;assembly=wmsMLC.Activities.Dialogs"
 xmlns:wag="clr-namespace:wmsMLC.Activities.General;assembly=wmsMLC.Activities.General"
 xmlns:wav="clr-namespace:wmsMLC.Activities.ViewInteraction;assembly=wmsMLC.Activities.ViewInteraction"
 xmlns:wbmp="clr-namespace:wmsMLC.Business.Managers.Processes;assembly=wmsMLC.Business.Managers"
 xmlns:wbo="clr-namespace:wmsMLC.Business.Objects;assembly=wmsMLC.Business.Objects"
 xmlns:wdg="clr-namespace:wmsMLC.DCL.General;assembly=wmsMLC.DCL.General"
 xmlns:wdgh="clr-namespace:wmsMLC.DCL.General.Helpers;assembly=wmsMLC.DCL.General"
 xmlns:wdgv="clr-namespace:wmsMLC.DCL.General.ViewModels;assembly=wmsMLC.DCL.General"
 xmlns:wg="clr-namespace:wmsMLC.General;assembly=wmsMLC.General"
 xmlns:wgb="clr-namespace:wmsMLC.General.BL;assembly=wmsMLC.General.BL"
 xmlns:wgbv="clr-namespace:wmsMLC.General.BL.Validation;assembly=wmsMLC.General.BL"
 xmlns:wgd="clr-namespace:wmsMLC.General.DAL;assembly=wmsMLC.General.DAL"
 xmlns:wgpm="clr-namespace:wmsMLC.General.PL.Model;assembly=wmsMLC.General.PL"
 xmlns:wgpw="clr-namespace:wmsMLC.General.PL.WPF;assembly=wmsMLC.General.PL.WPF"
 xmlns:wgpwg="clr-namespace:wmsMLC.General.PL.WPF.General;assembly=wmsMLC.General.PL.WPF"
 xmlns:wgpwv="clr-namespace:wmsMLC.General.PL.WPF.ViewModels;assembly=wmsMLC.General.PL.WPF"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="BpContext" Type="InArgument(wgb:BpContext)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>654,676</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces for internal implementation</mva:VisualBasic.Settings>
  <Flowchart DisplayName="Создание транспортного задания DCL" sap:VirtualizedContainerService.HintSize="614,636">
    <Flowchart.Variables>
      <Variable x:TypeArguments="scg2:List(wbo:Place)" Name="PlacesToMove" />
      <Variable x:TypeArguments="av:MessageBoxResult" Name="MyDialogResult" />
      <Variable x:TypeArguments="x:Object" Name="TECurrentPlace" />
      <Variable x:TypeArguments="x:String" Name="ErrorMessage" />
      <Variable x:TypeArguments="x:Object" Name="transportTaskID" />
      <Variable x:TypeArguments="x:Boolean" Name="APIResult" />
      <Variable x:TypeArguments="s:Exception" Name="exception" />
      <Variable x:TypeArguments="sco1:Collection(s:Exception)" Name="exceptionList" />
      <Variable x:TypeArguments="wbo:Place[]" Name="PlaceToMove" />
      <Variable x:TypeArguments="wdgv:ExpandoObjectViewModelBase" Name="strategyModel" />
      <Variable x:TypeArguments="x:Boolean" Name="strategyModelResult" />
      <Variable x:TypeArguments="wbo:TE[]" Name="Items" />
      <Variable x:TypeArguments="wbo:Place[]" Name="allPlaces" />
      <Variable x:TypeArguments="x:Boolean" Name="firstRound" />
      <Variable x:TypeArguments="x:Boolean" Default="False" Name="back" />
      <Variable x:TypeArguments="x:String" Name="resultMessage" />
      <Variable x:TypeArguments="x:Boolean" Name="DialogResult" />
    </Flowchart.Variables>
    <sap:WorkflowViewStateService.ViewState>
      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">False</x:Boolean>
        <av:Point x:Key="ShapeLocation">230,2.5</av:Point>
        <av:Size x:Key="ShapeSize">60,75</av:Size>
        <av:PointCollection x:Key="ConnectorLocation">260,77.5 260,204.5</av:PointCollection>
      </scg2:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <Flowchart.StartNode>
      <x:Reference>__ReferenceID64</x:Reference>
    </Flowchart.StartNode>
    <FlowStep x:Name="__ReferenceID64">
      <sap:WorkflowViewStateService.ViewState>
        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
          <av:Point x:Key="ShapeLocation">138,204.5</av:Point>
          <av:Size x:Key="ShapeSize">244,51</av:Size>
        </scg2:Dictionary>
      </sap:WorkflowViewStateService.ViewState>
      <TryCatch DisplayName="Безопасный блок" sap:VirtualizedContainerService.HintSize="1152,2904">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
        <TryCatch.Try>
          <Flowchart DisplayName="Перемещение ТЕ" sap:VirtualizedContainerService.HintSize="1134,2717">
            <Flowchart.Variables>
              <Variable x:TypeArguments="x:String" Name="Layout" />
              <Variable x:TypeArguments="scg2:List(wbo:TransportTask)" Name="ttaskList" />
              <Variable x:TypeArguments="s:Nullable(x:Boolean)" Name="mesResult" />
            </Flowchart.Variables>
            <sap:WorkflowViewStateService.ViewState>
              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                <av:Point x:Key="ShapeLocation">180,2.5</av:Point>
                <av:Size x:Key="ShapeSize">60,75</av:Size>
                <x:Double x:Key="Width">1120</x:Double>
                <x:Double x:Key="Height">2681</x:Double>
                <av:PointCollection x:Key="ConnectorLocation">210,77.5 210,139</av:PointCollection>
                <x:Boolean x:Key="IsPinned">False</x:Boolean>
              </scg2:Dictionary>
            </sap:WorkflowViewStateService.ViewState>
            <Flowchart.StartNode>
              <x:Reference>__ReferenceID63</x:Reference>
            </Flowchart.StartNode>
            <FlowDecision x:Name="__ReferenceID8" Condition="[MyDialogResult = MessageBoxResult.Cancel orElse PlaceToMove.Length &lt; 1]" sap:VirtualizedContainerService.HintSize="70,87">
              <sap:WorkflowViewStateService.ViewState>
                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  <av:Point x:Key="ShapeLocation">745,2046.5</av:Point>
                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                  <x:String x:Key="FalseLabel">Место было выбрано</x:String>
                  <x:String x:Key="TrueLabel">Пользователь не выбрал место</x:String>
                  <av:PointCollection x:Key="TrueConnector">745,2090 620,2090 620,2149</av:PointCollection>
                  <av:PointCollection x:Key="FalseConnector">815,2090 1021,2090 1021,2210 991,2210</av:PointCollection>
                </scg2:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <FlowDecision.True>
                <FlowStep x:Name="__ReferenceID58">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">520,2149</av:Point>
                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">520,2160 477.5,2160 477.5,2236.5</av:PointCollection>
                    </scg2:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <wav:ShowMessageBoxActivityResult Buttons="YesNo" DefaultResult="None" DialogResult="[mesResult]" DisplayName="Отмена процесса" sap:VirtualizedContainerService.HintSize="200,22" Image="Question" Message="Место не было выбрано пользователем. Вернуться в окно выбора стратегии?" Title="Отмена процесса">
                    <sap:WorkflowViewStateService.ViewState>
                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg2:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </wav:ShowMessageBoxActivityResult>
                  <FlowStep.Next>
                    <FlowSwitch x:TypeArguments="s:Nullable(x:Boolean)" x:Name="__ReferenceID0" Expression="[mesResult]" sap:VirtualizedContainerService.HintSize="70,87">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          <av:Point x:Key="ShapeLocation">425,2236.5</av:Point>
                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                          <av:PointCollection x:Key="TrueConnector">425,2258.25 80,2258.25 80,267.5 110,267.5</av:PointCollection>
                          <av:PointCollection x:Key="FalseConnector">245,780 370,780 370,816.5</av:PointCollection>
                        </scg2:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <FlowStep x:Name="__ReferenceID39">
                        <x:Key>
                          <x:Boolean>True</x:Boolean>
                        </x:Key>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                            <av:Point x:Key="ShapeLocation">110,239</av:Point>
                            <av:Size x:Key="ShapeSize">200,57</av:Size>
                            <av:PointCollection x:Key="ConnectorLocation">210,296 210,326 209.895,326 209.895,370</av:PointCollection>
                          </scg2:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                        <wada:CreateExpandoObjectViewModelActivity LayoutValue="{x:Null}" DisplayName="Создать модель стратегии" sap:VirtualizedContainerService.HintSize="200,57" Layout="[Layout]" LayoutSettingsFileSuffix="1826950c-8ca6-42d8-979f-22ad92183168" Result="[strategyModel]" ShowCustomizeMenu="True">
                          <wada:CreateExpandoObjectViewModelActivity.Fields>
                            <wgpm:ValueDataField BackGroundColor="{x:Null}" BindingPath="{x:Null}" DependentFields="{x:Null}" Description="{x:Null}" DisplayFormat="{x:Null}" EnableCreate="{x:Null}" EnableEdit="{x:Null}" EventName="{x:Null}" FieldName="{x:Null}" ImageName="{x:Null}" KeyLink="{x:Null}" LabelPosition="{x:Null}" LookupVarFilterExt="{x:Null}" MaxLength="{x:Null}" SourceName="{x:Null}" AllowAddNewValue="False" Caption="Стратегия перемещения" CloseDialog="False" FieldType="x:String" IsChangeLookupCode="False" IsEnabled="True" IsLabelFontWeightBold="False" IsMemoView="False" IsOnPropertyChange="False" IsRequired="False" LookupButtonEnabled="True" LookupCode="ENUM_MANAGERMMUSE" LookupFilterExt="ENUMVALUE not like 'PLACE_PART_LOAD%'" Name="strategy" Order="0" SetFocus="False" Value="PLACE_FIX" Visible="True" />
                          </wada:CreateExpandoObjectViewModelActivity.Fields>
                          <sap:WorkflowViewStateService.ViewState>
                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                            </scg2:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                        </wada:CreateExpandoObjectViewModelActivity>
                        <FlowStep.Next>
                          <FlowStep x:Name="__ReferenceID61">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                <av:Point x:Key="ShapeLocation">88.895,370</av:Point>
                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                <av:PointCollection x:Key="ConnectorLocation">209.895,430 209.895,460 210,460 210,519</av:PointCollection>
                              </scg2:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <Assign DisplayName="Прячем кнопку &quot;...&quot;" sap:VirtualizedContainerService.HintSize="242,60">
                              <Assign.To>
                                <OutArgument x:TypeArguments="x:Boolean">[strategyModel.Fields(0).LookupButtonEnabled]</OutArgument>
                              </Assign.To>
                              <Assign.Value>
                                <InArgument x:TypeArguments="x:Boolean">False</InArgument>
                              </Assign.Value>
                              <sap:WorkflowViewStateService.ViewState>
                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                </scg2:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                            </Assign>
                            <FlowStep.Next>
                              <FlowStep x:Name="__ReferenceID47">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                    <av:Point x:Key="ShapeLocation">110,519</av:Point>
                                    <av:Size x:Key="ShapeSize">200,22</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">210,541 210,646.5</av:PointCollection>
                                  </scg2:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <wav:ShowCustomObjectViewModelActivity x:TypeArguments="wdgv:ExpandoObjectViewModelBase" DialogHeight="[Nothing]" DialogResult="[strategyModelResult]" DialogWidth="30%" DisplayName="Показать модель стратегии" DoNotLoadSettings="False" sap:VirtualizedContainerService.HintSize="200,22" InsertFromAvailableItems="False" Layout="[Layout]" Model="[strategyModel]" Title="Укажите стратегию перемещения">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    </scg2:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                </wav:ShowCustomObjectViewModelActivity>
                                <FlowStep.Next>
                                  <FlowDecision x:Name="__ReferenceID43" Condition="[strategyModelResult=true]" sap:VirtualizedContainerService.HintSize="70,87">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">175,646.5</av:Point>
                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                        <x:String x:Key="FalseLabel">Пользователь отменил выбор стратегии</x:String>
                                        <x:String x:Key="TrueLabel">Выбрана стратегия</x:String>
                                        <av:PointCollection x:Key="TrueConnector">175,690 150,690 150,806.5 210,806.5 210,836.5</av:PointCollection>
                                      </scg2:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <FlowDecision.True>
                                      <FlowDecision x:Name="__ReferenceID44" Condition="[strategyModel(&quot;strategy&quot;) is Nothing orElse strategyModel(&quot;strategy&quot;).ToString = &quot;&quot;]" sap:VirtualizedContainerService.HintSize="70,87">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                            <av:Point x:Key="ShapeLocation">175,836.5</av:Point>
                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                            <x:String x:Key="TrueLabel">Не выбрали стратегию</x:String>
                                            <x:String x:Key="FalseLabel">Стратегию выбрали</x:String>
                                            <av:PointCollection x:Key="FalseConnector">245,880 549.895,880 549.895,1010</av:PointCollection>
                                            <av:PointCollection x:Key="TrueConnector">175,880 100,880 100,1060 130,1060</av:PointCollection>
                                          </scg2:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                        <FlowDecision.True>
                                          <FlowStep x:Name="__ReferenceID59">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">130,1049</av:Point>
                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">130,1060 112.5,1060 112.5,2206.5 442.5,2206.5 442.5,2236.5</av:PointCollection>
                                              </scg2:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <wav:ShowMessageBoxActivityResult Buttons="OKCancel" DefaultResult="None" DialogResult="[mesResult]" DisplayName="Стратегия не выбрана" sap:VirtualizedContainerService.HintSize="200,22" Image="Warning" Message="Стратегия перемещения не выбрана. Вернуться в окно выбора стратегии?" Title="Внимание">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg2:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </wav:ShowMessageBoxActivityResult>
                                            <FlowStep.Next>
                                              <x:Reference>__ReferenceID0</x:Reference>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowDecision.True>
                                        <FlowDecision.False>
                                          <FlowStep x:Name="__ReferenceID50">
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                <av:Point x:Key="ShapeLocation">428.895,1010</av:Point>
                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">549.895,1070 549.895,1100 550,1100 550,1110</av:PointCollection>
                                              </scg2:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Assign DisplayName="начало сборки общего списка" sap:VirtualizedContainerService.HintSize="242,60">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="x:Boolean">[firstRound]</OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="x:Boolean">True</InArgument>
                                              </Assign.Value>
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                </scg2:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                            </Assign>
                                            <FlowStep.Next>
                                              <FlowStep x:Name="__ReferenceID52">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <av:Point x:Key="ShapeLocation">429,1110</av:Point>
                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                    <av:PointCollection x:Key="ConnectorLocation">550,1170 550,1210</av:PointCollection>
                                                  </scg2:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                                <Assign DisplayName="начало сборки общего списка" sap:VirtualizedContainerService.HintSize="242,60">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="wbo:Place[]">[allPlaces]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="wbo:Place[]">[new Place(){}]</InArgument>
                                                  </Assign.Value>
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                    </scg2:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                </Assign>
                                                <FlowStep.Next>
                                                  <FlowStep x:Name="__ReferenceID62">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <av:Point x:Key="ShapeLocation">429,1210</av:Point>
                                                        <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                        <av:PointCollection x:Key="ConnectorLocation">550,1270 550,1300 552,1300 552,1314.02</av:PointCollection>
                                                      </scg2:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                      <Assign.To>
                                                        <OutArgument x:TypeArguments="sco1:Collection(s:Exception)">[exceptionList]</OutArgument>
                                                      </Assign.To>
                                                      <Assign.Value>
                                                        <InArgument x:TypeArguments="sco1:Collection(s:Exception)">[new Collection(Of Exception)]</InArgument>
                                                      </Assign.Value>
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                        </scg2:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                    </Assign>
                                                    <FlowStep.Next>
                                                      <FlowStep x:Name="__ReferenceID49">
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <av:Point x:Key="ShapeLocation">430,1314.02</av:Point>
                                                            <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                            <av:PointCollection x:Key="ConnectorLocation">552,1365.02 552,1395.02 550,1395.02 550,1396.5</av:PointCollection>
                                                          </scg2:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                        <ForEach x:TypeArguments="wbo:TE" DisplayName="список доступных мест" sap:VirtualizedContainerService.HintSize="244,51" Values="[Items]">
                                                          <ActivityAction x:TypeArguments="wbo:TE">
                                                            <ActivityAction.Argument>
                                                              <DelegateInArgument x:TypeArguments="wbo:TE" Name="item" />
                                                            </ActivityAction.Argument>
                                                            <Flowchart sap:VirtualizedContainerService.HintSize="735,696">
                                                              <Flowchart.Variables>
                                                                <Variable x:TypeArguments="x:String" Name="PlaceErrorMessage" />
                                                              </Flowchart.Variables>
                                                              <sap:WorkflowViewStateService.ViewState>
                                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                  <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                                                  <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                                  <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                                  <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,107.5 301.5,107.5 301.5,111</av:PointCollection>
                                                                  <x:Double x:Key="Width">720.895</x:Double>
                                                                  <x:Double x:Key="Height">660</x:Double>
                                                                </scg2:Dictionary>
                                                              </sap:WorkflowViewStateService.ViewState>
                                                              <Flowchart.StartNode>
                                                                <x:Reference>__ReferenceID7</x:Reference>
                                                              </Flowchart.StartNode>
                                                              <FlowStep x:Name="__ReferenceID7">
                                                                <sap:WorkflowViewStateService.ViewState>
                                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                    <av:Point x:Key="ShapeLocation">194.5,111</av:Point>
                                                                    <av:Size x:Key="ShapeSize">214,57</av:Size>
                                                                    <av:PointCollection x:Key="ConnectorLocation">301.5,168 301.5,198 300,198 300,216.5</av:PointCollection>
                                                                  </scg2:Dictionary>
                                                                </sap:WorkflowViewStateService.ViewState>
                                                                <wab:ExecuteProcedureActivity DisplayName="Запуск API процедуры" Exception="[exception]" sap:VirtualizedContainerService.HintSize="214,57" Result="[APIResult]" TimeOut="[Nothing]" Value="[&quot;GetPlaceLstByStrategy&quot;]">
                                                                  <wab:ExecuteProcedureActivity.Parameters>
                                                                    <InArgument x:TypeArguments="x:String" x:Key="strategy">[strategyModel("strategy").ToString]</InArgument>
                                                                    <InArgument x:TypeArguments="x:String" x:Key="sourceTECode">[item.GetKey.ToString]</InArgument>
                                                                    <OutArgument x:TypeArguments="scg2:List(wbo:Place)" x:Key="result">[PlacesToMove]</OutArgument>
                                                                  </wab:ExecuteProcedureActivity.Parameters>
                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                    </scg2:Dictionary>
                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                </wab:ExecuteProcedureActivity>
                                                                <FlowStep.Next>
                                                                  <FlowDecision x:Name="__ReferenceID4" Condition="[APIResult]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                        <av:Point x:Key="ShapeLocation">265,216.5</av:Point>
                                                                        <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                        <av:PointCollection x:Key="TrueConnector">265,260 149,260 149,400 179,400</av:PointCollection>
                                                                        <av:PointCollection x:Key="FalseConnector">335,260 599.895,260 599.895,310</av:PointCollection>
                                                                      </scg2:Dictionary>
                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                    <FlowDecision.True>
                                                                      <FlowStep x:Name="__ReferenceID1">
                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                            <av:Point x:Key="ShapeLocation">179,370</av:Point>
                                                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                            <av:PointCollection x:Key="ConnectorLocation">300,430 300,480</av:PointCollection>
                                                                          </scg2:Dictionary>
                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                        <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                          <Assign.To>
                                                                            <OutArgument x:TypeArguments="wbo:Place[]">[PlaceToMove]</OutArgument>
                                                                          </Assign.To>
                                                                          <Assign.Value>
                                                                            <InArgument x:TypeArguments="wbo:Place[]">[PlacesToMove.toArray]</InArgument>
                                                                          </Assign.Value>
                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                            </scg2:Dictionary>
                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                        </Assign>
                                                                        <FlowStep.Next>
                                                                          <FlowStep x:Name="__ReferenceID2">
                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                <av:Point x:Key="ShapeLocation">179,480</av:Point>
                                                                                <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                <av:PointCollection x:Key="ConnectorLocation">300,540 300,570 299.895,570 299.895,600</av:PointCollection>
                                                                              </scg2:Dictionary>
                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                            <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                              <Assign.To>
                                                                                <OutArgument x:TypeArguments="wbo:Place[]">[allPlaces]</OutArgument>
                                                                              </Assign.To>
                                                                              <Assign.Value>
                                                                                <InArgument x:TypeArguments="wbo:Place[]">[CType(iif(not(firstRound), allPlaces.Intersect(PlaceToMove).toArray, PlaceToMove), Place())]</InArgument>
                                                                              </Assign.Value>
                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                </scg2:Dictionary>
                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                            </Assign>
                                                                            <FlowStep.Next>
                                                                              <FlowStep x:Name="__ReferenceID3">
                                                                                <sap:WorkflowViewStateService.ViewState>
                                                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                    <av:Point x:Key="ShapeLocation">178.895,600</av:Point>
                                                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                  </scg2:Dictionary>
                                                                                </sap:WorkflowViewStateService.ViewState>
                                                                                <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                                  <Assign.To>
                                                                                    <OutArgument x:TypeArguments="x:Boolean">[firstRound]</OutArgument>
                                                                                  </Assign.To>
                                                                                  <Assign.Value>
                                                                                    <InArgument x:TypeArguments="x:Boolean">False</InArgument>
                                                                                  </Assign.Value>
                                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                    </scg2:Dictionary>
                                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                                </Assign>
                                                                              </FlowStep>
                                                                            </FlowStep.Next>
                                                                          </FlowStep>
                                                                        </FlowStep.Next>
                                                                      </FlowStep>
                                                                    </FlowDecision.True>
                                                                    <FlowDecision.False>
                                                                      <FlowStep x:Name="__ReferenceID6">
                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                            <av:Point x:Key="ShapeLocation">478.895,310</av:Point>
                                                                            <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                            <av:PointCollection x:Key="ConnectorLocation">599.895,370 599.895,400 600,400 600,429</av:PointCollection>
                                                                          </scg2:Dictionary>
                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                        <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                          <Assign.To>
                                                                            <OutArgument x:TypeArguments="x:String">[PlaceErrorMessage]</OutArgument>
                                                                          </Assign.To>
                                                                          <Assign.Value>
                                                                            <InArgument x:TypeArguments="x:String">[string.Format("Не удалось получить места для ТЕ '{0}' по стратегии '{1}':{3}{2}", item.GetKey, strategyModel("strategy").ToString, BPH.GetInnerException(exception), System.Environment.NewLine)]</InArgument>
                                                                          </Assign.Value>
                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                            </scg2:Dictionary>
                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                        </Assign>
                                                                        <FlowStep.Next>
                                                                          <FlowStep x:Name="__ReferenceID5">
                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                <av:Point x:Key="ShapeLocation">500,429</av:Point>
                                                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                              </scg2:Dictionary>
                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                            <AddToCollection x:TypeArguments="s:Exception" Collection="[exceptionList]" DisplayName="Добавим в ошибки" sap:VirtualizedContainerService.HintSize="200,22" Item="[new DALCustomException(PlaceErrorMessage)]" />
                                                                          </FlowStep>
                                                                        </FlowStep.Next>
                                                                      </FlowStep>
                                                                    </FlowDecision.False>
                                                                  </FlowDecision>
                                                                </FlowStep.Next>
                                                              </FlowStep>
                                                              <x:Reference>__ReferenceID1</x:Reference>
                                                              <x:Reference>__ReferenceID2</x:Reference>
                                                              <x:Reference>__ReferenceID3</x:Reference>
                                                              <x:Reference>__ReferenceID4</x:Reference>
                                                              <x:Reference>__ReferenceID5</x:Reference>
                                                              <x:Reference>__ReferenceID6</x:Reference>
                                                            </Flowchart>
                                                          </ActivityAction>
                                                        </ForEach>
                                                        <FlowStep.Next>
                                                          <FlowDecision x:Name="__ReferenceID40" Condition="[exceptionList.Count &gt; 0]" sap:VirtualizedContainerService.HintSize="70,87">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                <av:Point x:Key="ShapeLocation">515,1396.5</av:Point>
                                                                <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                <x:String x:Key="TrueLabel">Ошибка при работе с API</x:String>
                                                                <x:String x:Key="FalseLabel">Получили список</x:String>
                                                                <av:PointCollection x:Key="TrueConnector">515,1440 290,1440 290,1469</av:PointCollection>
                                                                <av:PointCollection x:Key="FalseConnector">585,1440 640,1440 640,1540</av:PointCollection>
                                                              </scg2:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                            <FlowDecision.True>
                                                              <FlowStep x:Name="__ReferenceID42">
                                                                <sap:WorkflowViewStateService.ViewState>
                                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                    <av:Point x:Key="ShapeLocation">190,1469</av:Point>
                                                                    <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                  </scg2:Dictionary>
                                                                </sap:WorkflowViewStateService.ViewState>
                                                                <wav:ShowExceptionMessageActivity Buttons="OK" DefaultResult="OK" DisplayName="Вывод сообщения об ошибке" Error="[Nothing]" ErrorList="[exceptionList]" ForceError="False" sap:VirtualizedContainerService.HintSize="200,22" Image="Warning" Message="Произошла одна или несколько ошибок:" Title="Ошибка">
                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                    </scg2:Dictionary>
                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                </wav:ShowExceptionMessageActivity>
                                                              </FlowStep>
                                                            </FlowDecision.True>
                                                            <FlowDecision.False>
                                                              <FlowStep x:Name="__ReferenceID60">
                                                                <sap:WorkflowViewStateService.ViewState>
                                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                    <av:Point x:Key="ShapeLocation">519,1540</av:Point>
                                                                    <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                    <av:PointCollection x:Key="ConnectorLocation">640,1600 640,1644.5</av:PointCollection>
                                                                  </scg2:Dictionary>
                                                                </sap:WorkflowViewStateService.ViewState>
                                                                <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                  <Assign.To>
                                                                    <OutArgument x:TypeArguments="scg2:List(wbo:Place)">[PlacesToMove]</OutArgument>
                                                                  </Assign.To>
                                                                  <Assign.Value>
                                                                    <InArgument x:TypeArguments="scg2:List(wbo:Place)">[new List(Of Place)()]</InArgument>
                                                                  </Assign.Value>
                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                    </scg2:Dictionary>
                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                </Assign>
                                                                <FlowStep.Next>
                                                                  <FlowStep x:Name="__ReferenceID51">
                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                        <av:Point x:Key="ShapeLocation">518,1644.5</av:Point>
                                                                        <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                                        <av:PointCollection x:Key="ConnectorLocation">640,1695.5 640,1746.5</av:PointCollection>
                                                                      </scg2:Dictionary>
                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                    <ForEach x:TypeArguments="wbo:Place" DisplayName="окончательный список" sap:VirtualizedContainerService.HintSize="244,51" Values="[allPlaces]">
                                                                      <ActivityAction x:TypeArguments="wbo:Place">
                                                                        <ActivityAction.Argument>
                                                                          <DelegateInArgument x:TypeArguments="wbo:Place" Name="item" />
                                                                        </ActivityAction.Argument>
                                                                        <AddToCollection x:TypeArguments="wbo:Place" Collection="[PlacesToMove]" DisplayName="AddToCollection&lt;Place&gt;" sap:VirtualizedContainerService.HintSize="200,22" Item="[item]" />
                                                                      </ActivityAction>
                                                                    </ForEach>
                                                                    <FlowStep.Next>
                                                                      <FlowDecision x:Name="__ReferenceID45" Condition="[PlacesToMove.Count &lt; 1]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                            <av:Point x:Key="ShapeLocation">605,1746.5</av:Point>
                                                                            <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                            <x:String x:Key="TrueLabel">Нет мест для перемещения</x:String>
                                                                            <x:String x:Key="FalseLabel">Места есть</x:String>
                                                                            <av:PointCollection x:Key="FalseConnector">675,1790 780,1790 780,1889</av:PointCollection>
                                                                            <av:PointCollection x:Key="TrueConnector">605,1790 460,1790 460,1939</av:PointCollection>
                                                                          </scg2:Dictionary>
                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                        <FlowDecision.True>
                                                                          <FlowStep x:Name="__ReferenceID57">
                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                <av:Point x:Key="ShapeLocation">360,1939</av:Point>
                                                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                                <av:PointCollection x:Key="ConnectorLocation">460,1961 460,2236.5</av:PointCollection>
                                                                              </scg2:Dictionary>
                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                            <wav:ShowMessageBoxActivityResult Buttons="OKCancel" DefaultResult="None" DialogResult="[mesResult]" DisplayName="Нет доступных мест для перемещения" sap:VirtualizedContainerService.HintSize="200,22" Image="Warning" Message="Нет доступных мест для перемещения. Вернуться в окно выбора стратегии?" Title="Внимание">
                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                </scg2:Dictionary>
                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                            </wav:ShowMessageBoxActivityResult>
                                                                            <FlowStep.Next>
                                                                              <x:Reference>__ReferenceID0</x:Reference>
                                                                            </FlowStep.Next>
                                                                          </FlowStep>
                                                                        </FlowDecision.True>
                                                                        <FlowDecision.False>
                                                                          <FlowStep x:Name="__ReferenceID46">
                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                <av:Point x:Key="ShapeLocation">680,1889</av:Point>
                                                                                <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                                <av:PointCollection x:Key="ConnectorLocation">780,1911 780,2046.5</av:PointCollection>
                                                                              </scg2:Dictionary>
                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                            <wav:ShowObjectListViewActivity x:TypeArguments="wbo:Place" Filter="{x:Null}" Buttons="OKCancel" DefaultResult="OK" DialogHeight="60%" DialogResult="[MyDialogResult]" DialogWidth="60%" DisplayName="Выбор места перемещения" sap:VirtualizedContainerService.HintSize="200,22" Image="Question" IsCloseDoubleClick="True" IsSelectedFirstItem="True" LayoutSettingsFileSuffix="3E3D3744-00B5-427C-A332-A550246629B2" Result="[PlaceToMove]" ShowCustomizeMenu="True" Source="[PlacesToMove]" Title="Выберите место для перемещения ТЕ">
                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                </scg2:Dictionary>
                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                            </wav:ShowObjectListViewActivity>
                                                                            <FlowStep.Next>
                                                                              <x:Reference>__ReferenceID8</x:Reference>
                                                                            </FlowStep.Next>
                                                                          </FlowStep>
                                                                        </FlowDecision.False>
                                                                      </FlowDecision>
                                                                    </FlowStep.Next>
                                                                  </FlowStep>
                                                                </FlowStep.Next>
                                                              </FlowStep>
                                                            </FlowDecision.False>
                                                          </FlowDecision>
                                                        </FlowStep.Next>
                                                      </FlowStep>
                                                    </FlowStep.Next>
                                                  </FlowStep>
                                                </FlowStep.Next>
                                              </FlowStep>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowDecision.False>
                                      </FlowDecision>
                                    </FlowDecision.True>
                                  </FlowDecision>
                                </FlowStep.Next>
                              </FlowStep>
                            </FlowStep.Next>
                          </FlowStep>
                        </FlowStep.Next>
                      </FlowStep>
                    </FlowSwitch>
                  </FlowStep.Next>
                </FlowStep>
              </FlowDecision.True>
              <FlowDecision.False>
                <FlowStep x:Name="__ReferenceID56">
                  <sap:WorkflowViewStateService.ViewState>
                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                      <av:Point x:Key="ShapeLocation">749,2180</av:Point>
                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                      <av:PointCollection x:Key="ConnectorLocation">870,2240 870,2290</av:PointCollection>
                    </scg2:Dictionary>
                  </sap:WorkflowViewStateService.ViewState>
                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                    <Assign.To>
                      <OutArgument x:TypeArguments="x:Boolean">[back]</OutArgument>
                    </Assign.To>
                    <Assign.Value>
                      <InArgument x:TypeArguments="x:Boolean">False</InArgument>
                    </Assign.Value>
                    <sap:WorkflowViewStateService.ViewState>
                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                      </scg2:Dictionary>
                    </sap:WorkflowViewStateService.ViewState>
                  </Assign>
                  <FlowStep.Next>
                    <FlowStep x:Name="__ReferenceID55">
                      <sap:WorkflowViewStateService.ViewState>
                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                          <av:Point x:Key="ShapeLocation">749,2290</av:Point>
                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                          <av:PointCollection x:Key="ConnectorLocation">870,2350 870,2414.5</av:PointCollection>
                        </scg2:Dictionary>
                      </sap:WorkflowViewStateService.ViewState>
                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                        <Assign.To>
                          <OutArgument x:TypeArguments="x:String">[resultMessage]</OutArgument>
                        </Assign.To>
                        <Assign.Value>
                          <InArgument x:TypeArguments="x:String">[string.Empty]</InArgument>
                        </Assign.Value>
                        <sap:WorkflowViewStateService.ViewState>
                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                          </scg2:Dictionary>
                        </sap:WorkflowViewStateService.ViewState>
                      </Assign>
                      <FlowStep.Next>
                        <FlowStep x:Name="__ReferenceID54">
                          <sap:WorkflowViewStateService.ViewState>
                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                              <av:Point x:Key="ShapeLocation">748,2414.5</av:Point>
                              <av:Size x:Key="ShapeSize">244,51</av:Size>
                              <av:PointCollection x:Key="ConnectorLocation">870,2465.5 870,2546.5</av:PointCollection>
                            </scg2:Dictionary>
                          </sap:WorkflowViewStateService.ViewState>
                          <TryCatch DisplayName="Действие в транзакции" sap:VirtualizedContainerService.HintSize="813,1883">
                            <sap:WorkflowViewStateService.ViewState>
                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                              </scg2:Dictionary>
                            </sap:WorkflowViewStateService.ViewState>
                            <TryCatch.Try>
                              <Flowchart sap:VirtualizedContainerService.HintSize="795,1696">
                                <Flowchart.Variables>
                                  <Variable x:TypeArguments="scg2:List(wbo:TransportTask)" Name="result" />
                                  <Variable x:TypeArguments="wgd:DALCustomException" Name="DALException" />
                                  <Variable x:TypeArguments="x:Object" Name="destPlaceName" />
                                  <Variable x:TypeArguments="scg2:List(wbo:SysEnum)" Name="enums" />
                                  <Variable x:TypeArguments="x:Object" Name="strategyName" />
                                  <Variable x:TypeArguments="scg2:List(wbo:TE)" Name="itemsList" />
                                </Flowchart.Variables>
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                    <av:Point x:Key="ShapeLocation">340,2.5</av:Point>
                                    <av:Size x:Key="ShapeSize">60,75</av:Size>
                                    <av:PointCollection x:Key="ConnectorLocation">370,77.5 370,107.5 369.091666666667,107.5 369.091666666667,124.02</av:PointCollection>
                                    <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                    <x:Double x:Key="Height">1660</x:Double>
                                    <x:Double x:Key="Width">780.895</x:Double>
                                  </scg2:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <Flowchart.StartNode>
                                  <x:Reference>__ReferenceID38</x:Reference>
                                </Flowchart.StartNode>
                                <FlowStep x:Name="__ReferenceID19">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">270,419</av:Point>
                                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                                      <av:PointCollection x:Key="ConnectorLocation">370,441 370,471 369,471 369,501.5</av:PointCollection>
                                    </scg2:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <wag:BeginTransactionActivity sap:VirtualizedContainerService.HintSize="200,22">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg2:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </wag:BeginTransactionActivity>
                                  <FlowStep.Next>
                                    <FlowStep x:Name="__ReferenceID15">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">259.5,501.5</av:Point>
                                          <av:Size x:Key="ShapeSize">221,57</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">369,558.5 369,588.5 370,588.5 370,596.5</av:PointCollection>
                                        </scg2:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <wab:ExecuteProcedureActivity DisplayName="Запуск метода" Exception="[exception]" sap:VirtualizedContainerService.HintSize="221,57" Result="[APIResult]" TimeOut="[Nothing]" Value="[&quot;MoveManyTE2Place&quot;]">
                                        <wab:ExecuteProcedureActivity.Parameters>
                                          <InArgument x:TypeArguments="x:Object" x:Key="teList">[itemsList.ToArray]</InArgument>
                                          <InArgument x:TypeArguments="x:String" x:Key="destPlaceCode">[PlaceToMove(0).GetKey(Of String)]</InArgument>
                                          <InArgument x:TypeArguments="x:String" x:Key="strategy">[strategyModel.Get(of String)("strategy")]</InArgument>
                                          <InArgument x:TypeArguments="x:String" x:Key="destTECode">[Nothing]</InArgument>
                                          <InArgument x:TypeArguments="x:Object" x:Key="productList">[Nothing]</InArgument>
                                          <OutArgument x:TypeArguments="scg2:List(wbo:TransportTask)" x:Key="result">[ttaskList]</OutArgument>
                                          <InArgument x:TypeArguments="x:Int32" x:Key="isManual">0</InArgument>
                                        </wab:ExecuteProcedureActivity.Parameters>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg2:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </wab:ExecuteProcedureActivity>
                                      <FlowStep.Next>
                                        <FlowDecision x:Name="__ReferenceID14" Condition="[APIResult]" sap:VirtualizedContainerService.HintSize="70,87">
                                          <sap:WorkflowViewStateService.ViewState>
                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                              <av:Point x:Key="ShapeLocation">335,596.5</av:Point>
                                              <av:Size x:Key="ShapeSize">70,87</av:Size>
                                              <av:PointCollection x:Key="FalseConnector">405,640 550,640 550,689</av:PointCollection>
                                              <av:PointCollection x:Key="TrueConnector">335,640 210,640 210,719</av:PointCollection>
                                            </scg2:Dictionary>
                                          </sap:WorkflowViewStateService.ViewState>
                                          <FlowDecision.True>
                                            <FlowStep x:Name="__ReferenceID11">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">110,719</av:Point>
                                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">210,741 210,774.5</av:PointCollection>
                                                </scg2:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <wag:CommitTransactionActivity sap:VirtualizedContainerService.HintSize="200,22">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg2:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                              </wag:CommitTransactionActivity>
                                              <FlowStep.Next>
                                                <FlowStep x:Name="__ReferenceID17">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <av:Point x:Key="ShapeLocation">88,774.5</av:Point>
                                                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                      <av:PointCollection x:Key="ConnectorLocation">210,825.5 210,849</av:PointCollection>
                                                    </scg2:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <If Condition="[itemsList.Count = 1]" sap:VirtualizedContainerService.HintSize="244,51">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      </scg2:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                    <If.Then>
                                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                        <Assign.To>
                                                          <OutArgument x:TypeArguments="x:String">[resultMessage]</OutArgument>
                                                        </Assign.To>
                                                        <Assign.Value>
                                                          <InArgument x:TypeArguments="x:String">Создано транспортное задание:</InArgument>
                                                        </Assign.Value>
                                                      </Assign>
                                                    </If.Then>
                                                    <If.Else>
                                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                        <Assign.To>
                                                          <OutArgument x:TypeArguments="x:String">[resultMessage]</OutArgument>
                                                        </Assign.To>
                                                        <Assign.Value>
                                                          <InArgument x:TypeArguments="x:String">Созданы транспортные задания:</InArgument>
                                                        </Assign.Value>
                                                      </Assign>
                                                    </If.Else>
                                                  </If>
                                                  <FlowStep.Next>
                                                    <FlowStep x:Name="__ReferenceID20">
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <av:Point x:Key="ShapeLocation">110,849</av:Point>
                                                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                          <av:PointCollection x:Key="ConnectorLocation">210,871 210,904.5</av:PointCollection>
                                                        </scg2:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                      <wag:GetByFilterActivity x:TypeArguments="wbo:SysEnum" AttrEntity="{x:Null}" DisplayName="Получаем стратегии" Filter="[string.Format(&quot;ENUMGROUP='MANAGER_MM' and ENUMVALUE='{0}'&quot;, strategyModel.Get(of String)(&quot;strategy&quot;))]" sap:VirtualizedContainerService.HintSize="200,22" Mode="Full" Result="[enums]">
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                          </scg2:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                      </wag:GetByFilterActivity>
                                                      <FlowStep.Next>
                                                        <FlowStep x:Name="__ReferenceID22">
                                                          <sap:WorkflowViewStateService.ViewState>
                                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                              <av:Point x:Key="ShapeLocation">88,904.5</av:Point>
                                                              <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                              <av:PointCollection x:Key="ConnectorLocation">210,955.5 210,999</av:PointCollection>
                                                            </scg2:Dictionary>
                                                          </sap:WorkflowViewStateService.ViewState>
                                                          <If Condition="[enums is Nothing OR enums.Count = 0]" sap:VirtualizedContainerService.HintSize="244,51">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                              </scg2:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                            <If.Then>
                                                              <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                <Assign.To>
                                                                  <OutArgument x:TypeArguments="x:Object">[strategyName]</OutArgument>
                                                                </Assign.To>
                                                                <Assign.Value>
                                                                  <InArgument x:TypeArguments="x:Object">[strategyModel.Get(of String)("strategy")]</InArgument>
                                                                </Assign.Value>
                                                              </Assign>
                                                            </If.Then>
                                                            <If.Else>
                                                              <wag:GetValueActivity x:TypeArguments="wbo:SysEnum" DisplayName="получении имени стратегии" sap:VirtualizedContainerService.HintSize="200,22" PropertyName="ENUMNAME" Result="[strategyName]" Source="[enums(0)]" />
                                                            </If.Else>
                                                          </If>
                                                          <FlowStep.Next>
                                                            <FlowStep x:Name="__ReferenceID21">
                                                              <sap:WorkflowViewStateService.ViewState>
                                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                  <av:Point x:Key="ShapeLocation">110,999</av:Point>
                                                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                  <av:PointCollection x:Key="ConnectorLocation">210,1021 210,1064.5</av:PointCollection>
                                                                </scg2:Dictionary>
                                                              </sap:WorkflowViewStateService.ViewState>
                                                              <wag:GetValueActivity x:TypeArguments="wbo:Place" DisplayName="Получим имя места" sap:VirtualizedContainerService.HintSize="200,22" PropertyName="PLACENAME" Result="[destPlaceName]" Source="[PlaceToMove(0)]">
                                                                <sap:WorkflowViewStateService.ViewState>
                                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                  </scg2:Dictionary>
                                                                </sap:WorkflowViewStateService.ViewState>
                                                              </wag:GetValueActivity>
                                                              <FlowStep.Next>
                                                                <FlowStep x:Name="__ReferenceID18">
                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                      <av:Point x:Key="ShapeLocation">88,1064.5</av:Point>
                                                                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                                                                      <av:PointCollection x:Key="ConnectorLocation">210,1115.5 210,1170</av:PointCollection>
                                                                    </scg2:Dictionary>
                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                  <ForEach x:TypeArguments="wbo:TE" DisplayName="Сформируем сообщение" sap:VirtualizedContainerService.HintSize="244,51" Values="[itemsList]">
                                                                    <ActivityAction x:TypeArguments="wbo:TE">
                                                                      <ActivityAction.Argument>
                                                                        <DelegateInArgument x:TypeArguments="wbo:TE" Name="te" />
                                                                      </ActivityAction.Argument>
                                                                      <Flowchart sap:VirtualizedContainerService.HintSize="614,636">
                                                                        <Flowchart.Variables>
                                                                          <Variable x:TypeArguments="x:Object" Name="TECurrentPlace" />
                                                                          <Variable x:TypeArguments="x:Object" Name="PlaceName" />
                                                                        </Flowchart.Variables>
                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                                            <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                                            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,139</av:PointCollection>
                                                                            <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                                                          </scg2:Dictionary>
                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                        <Flowchart.StartNode>
                                                                          <x:Reference>__ReferenceID10</x:Reference>
                                                                        </Flowchart.StartNode>
                                                                        <FlowStep x:Name="__ReferenceID9">
                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                              <av:Point x:Key="ShapeLocation">179,210</av:Point>
                                                                              <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                            </scg2:Dictionary>
                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                          <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                            <Assign.To>
                                                                              <OutArgument x:TypeArguments="x:String">[resultMessage]</OutArgument>
                                                                            </Assign.To>
                                                                            <Assign.Value>
                                                                              <InArgument x:TypeArguments="x:String">[string.Format("{0}{5}Для ТЕ '{1}' с места '{2}' на место '{3}' по стратегии '{4}'", resultMessage, te.TECode,PlaceName, destPlaceName, strategyName, System.Environment.NewLine)]</InArgument>
                                                                            </Assign.Value>
                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                              </scg2:Dictionary>
                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                          </Assign>
                                                                        </FlowStep>
                                                                        <FlowStep x:Name="__ReferenceID10">
                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                              <av:Point x:Key="ShapeLocation">200,139</av:Point>
                                                                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                                              <av:PointCollection x:Key="ConnectorLocation">300,161 300,210</av:PointCollection>
                                                                            </scg2:Dictionary>
                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                          <wag:GetValueActivity x:TypeArguments="wbo:TE" DisplayName="Получим текущее место ТЕ" sap:VirtualizedContainerService.HintSize="200,22" PropertyName="TECURRENTPLACE_NAME" Result="[PlaceName]" Source="[te]">
                                                                            <sap:WorkflowViewStateService.ViewState>
                                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                              </scg2:Dictionary>
                                                                            </sap:WorkflowViewStateService.ViewState>
                                                                          </wag:GetValueActivity>
                                                                          <FlowStep.Next>
                                                                            <x:Reference>__ReferenceID9</x:Reference>
                                                                          </FlowStep.Next>
                                                                        </FlowStep>
                                                                      </Flowchart>
                                                                    </ActivityAction>
                                                                  </ForEach>
                                                                  <FlowStep.Next>
                                                                    <FlowStep x:Name="__ReferenceID37">
                                                                      <sap:WorkflowViewStateService.ViewState>
                                                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                          <av:Point x:Key="ShapeLocation">89,1170</av:Point>
                                                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                          <av:PointCollection x:Key="ConnectorLocation">210,1230 210,1356.5</av:PointCollection>
                                                                        </scg2:Dictionary>
                                                                      </sap:WorkflowViewStateService.ViewState>
                                                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                        <Assign.To>
                                                                          <OutArgument x:TypeArguments="x:String">[resultMessage]</OutArgument>
                                                                        </Assign.To>
                                                                        <Assign.Value>
                                                                          <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}", resultMessage, System.Environment.NewLine)]</InArgument>
                                                                        </Assign.Value>
                                                                        <sap:WorkflowViewStateService.ViewState>
                                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                          </scg2:Dictionary>
                                                                        </sap:WorkflowViewStateService.ViewState>
                                                                      </Assign>
                                                                      <FlowStep.Next>
                                                                        <FlowDecision x:Name="__ReferenceID31" Condition="[string.IsNullOrEmpty(errorMessage)]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                          <sap:WorkflowViewStateService.ViewState>
                                                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                              <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                              <av:Point x:Key="ShapeLocation">175,1356.5</av:Point>
                                                                              <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                              <av:PointCollection x:Key="FalseConnector">245,1400 370,1400 370,1466.5</av:PointCollection>
                                                                            </scg2:Dictionary>
                                                                          </sap:WorkflowViewStateService.ViewState>
                                                                          <FlowDecision.False>
                                                                            <FlowDecision x:Name="__ReferenceID36" Condition="[string.IsNullOrEmpty(resultMessage)]" sap:VirtualizedContainerService.HintSize="70,87">
                                                                              <sap:WorkflowViewStateService.ViewState>
                                                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                  <av:Point x:Key="ShapeLocation">335,1466.5</av:Point>
                                                                                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                                                  <av:PointCollection x:Key="FalseConnector">405,1510 549.895,1510 549.895,1600</av:PointCollection>
                                                                                  <av:PointCollection x:Key="TrueConnector">335,1510 209.895,1510 209.895,1600</av:PointCollection>
                                                                                </scg2:Dictionary>
                                                                              </sap:WorkflowViewStateService.ViewState>
                                                                              <FlowDecision.True>
                                                                                <FlowStep x:Name="__ReferenceID34">
                                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                      <av:Point x:Key="ShapeLocation">88.895,1600</av:Point>
                                                                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                    </scg2:Dictionary>
                                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                                    <Assign.To>
                                                                                      <OutArgument x:TypeArguments="x:String">[resultMessage]</OutArgument>
                                                                                    </Assign.To>
                                                                                    <Assign.Value>
                                                                                      <InArgument x:TypeArguments="x:String">[string.Format("При перемещении были следующие ошибки:{0}{1}", System.Environment.NewLine, errorMessage)]</InArgument>
                                                                                    </Assign.Value>
                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                      </scg2:Dictionary>
                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                  </Assign>
                                                                                </FlowStep>
                                                                              </FlowDecision.True>
                                                                              <FlowDecision.False>
                                                                                <FlowStep x:Name="__ReferenceID35">
                                                                                  <sap:WorkflowViewStateService.ViewState>
                                                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                      <av:Point x:Key="ShapeLocation">428.895,1600</av:Point>
                                                                                      <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                                                    </scg2:Dictionary>
                                                                                  </sap:WorkflowViewStateService.ViewState>
                                                                                  <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                                                    <Assign.To>
                                                                                      <OutArgument x:TypeArguments="x:String">[resultMessage]</OutArgument>
                                                                                    </Assign.To>
                                                                                    <Assign.Value>
                                                                                      <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}При перемещении были следующие ошибки:{1}{2}", resultMessage, System.Environment.NewLine, errorMessage)]</InArgument>
                                                                                    </Assign.Value>
                                                                                    <sap:WorkflowViewStateService.ViewState>
                                                                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                                                      </scg2:Dictionary>
                                                                                    </sap:WorkflowViewStateService.ViewState>
                                                                                  </Assign>
                                                                                </FlowStep>
                                                                              </FlowDecision.False>
                                                                            </FlowDecision>
                                                                          </FlowDecision.False>
                                                                        </FlowDecision>
                                                                      </FlowStep.Next>
                                                                    </FlowStep>
                                                                  </FlowStep.Next>
                                                                </FlowStep>
                                                              </FlowStep.Next>
                                                            </FlowStep>
                                                          </FlowStep.Next>
                                                        </FlowStep>
                                                      </FlowStep.Next>
                                                    </FlowStep>
                                                  </FlowStep.Next>
                                                </FlowStep>
                                              </FlowStep.Next>
                                            </FlowStep>
                                          </FlowDecision.True>
                                          <FlowDecision.False>
                                            <FlowStep x:Name="__ReferenceID23">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">450,689</av:Point>
                                                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">550,711 550,779</av:PointCollection>
                                                </scg2:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <wag:RollbackTransactionActivity sap:VirtualizedContainerService.HintSize="200,22">
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg2:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                              </wag:RollbackTransactionActivity>
                                              <FlowStep.Next>
                                                <FlowStep x:Name="__ReferenceID13">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <av:Point x:Key="ShapeLocation">450,779</av:Point>
                                                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                      <av:PointCollection x:Key="ConnectorLocation">550,801 550,860</av:PointCollection>
                                                    </scg2:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <wab:FormatExceptionMessage Error="[exception]" ErrorList="[Nothing]" FormattedMessage="[ErrorMessage]" sap:VirtualizedContainerService.HintSize="200,22" Message="[ErrorMessage]">
                                                    <sap:WorkflowViewStateService.ViewState>
                                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      </scg2:Dictionary>
                                                    </sap:WorkflowViewStateService.ViewState>
                                                  </wab:FormatExceptionMessage>
                                                  <FlowStep.Next>
                                                    <FlowStep x:Name="__ReferenceID16">
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <av:Point x:Key="ShapeLocation">429,860</av:Point>
                                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                          <av:PointCollection x:Key="ConnectorLocation">550,920 550,969</av:PointCollection>
                                                        </scg2:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                        <Assign.To>
                                                          <OutArgument x:TypeArguments="wgd:DALCustomException">[DALException]</OutArgument>
                                                        </Assign.To>
                                                        <Assign.Value>
                                                          <InArgument x:TypeArguments="wgd:DALCustomException">[new DALCustomException(ErrorMessage)]</InArgument>
                                                        </Assign.Value>
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                          </scg2:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                      </Assign>
                                                      <FlowStep.Next>
                                                        <FlowStep x:Name="__ReferenceID12">
                                                          <sap:WorkflowViewStateService.ViewState>
                                                            <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                              <av:Point x:Key="ShapeLocation">450,969</av:Point>
                                                              <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                            </scg2:Dictionary>
                                                          </sap:WorkflowViewStateService.ViewState>
                                                          <Throw Exception="[DALException]" sap:VirtualizedContainerService.HintSize="200,22">
                                                            <sap:WorkflowViewStateService.ViewState>
                                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                              </scg2:Dictionary>
                                                            </sap:WorkflowViewStateService.ViewState>
                                                          </Throw>
                                                        </FlowStep>
                                                      </FlowStep.Next>
                                                    </FlowStep>
                                                  </FlowStep.Next>
                                                </FlowStep>
                                              </FlowStep.Next>
                                            </FlowStep>
                                          </FlowDecision.False>
                                        </FlowDecision>
                                      </FlowStep.Next>
                                    </FlowStep>
                                  </FlowStep.Next>
                                </FlowStep>
                                <x:Reference>__ReferenceID11</x:Reference>
                                <x:Reference>__ReferenceID12</x:Reference>
                                <x:Reference>__ReferenceID13</x:Reference>
                                <x:Reference>__ReferenceID14</x:Reference>
                                <x:Reference>__ReferenceID15</x:Reference>
                                <x:Reference>__ReferenceID16</x:Reference>
                                <x:Reference>__ReferenceID17</x:Reference>
                                <x:Reference>__ReferenceID18</x:Reference>
                                <FlowStep x:Name="__ReferenceID32">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">270,329</av:Point>
                                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                                      <av:PointCollection x:Key="ConnectorLocation">370,351 370,419</av:PointCollection>
                                    </scg2:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <wag:GetValueActivity x:TypeArguments="wbo:Place" DisplayName="Получим имя места" sap:VirtualizedContainerService.HintSize="200,22" PropertyName="PLACENAME" Result="[destPlaceName]" Source="[PlaceToMove(0)]">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg2:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </wag:GetValueActivity>
                                  <FlowStep.Next>
                                    <x:Reference>__ReferenceID19</x:Reference>
                                  </FlowStep.Next>
                                </FlowStep>
                                <x:Reference>__ReferenceID20</x:Reference>
                                <x:Reference>__ReferenceID21</x:Reference>
                                <x:Reference>__ReferenceID22</x:Reference>
                                <x:Reference>__ReferenceID23</x:Reference>
                                <FlowStep x:Name="__ReferenceID38">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">247.091666666667,124.02</av:Point>
                                      <av:Size x:Key="ShapeSize">244,51</av:Size>
                                      <av:PointCollection x:Key="ConnectorLocation">369.091666666667,175.02 369.091666666667,205.02 370,205.02 370,206.5</av:PointCollection>
                                    </scg2:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <Flowchart DisplayName="Проверка ТЕ" sap:VirtualizedContainerService.HintSize="614,636">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                        <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                        <av:Size x:Key="ShapeSize">60,75</av:Size>
                                        <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,130</av:PointCollection>
                                      </scg2:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <Flowchart.StartNode>
                                      <x:Reference>__ReferenceID30</x:Reference>
                                    </Flowchart.StartNode>
                                    <FlowStep x:Name="__ReferenceID28">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">179,360</av:Point>
                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                        </scg2:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="x:Boolean">[DialogResult]</OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="x:Boolean">[itemsList.Count &gt; 0]</InArgument>
                                        </Assign.Value>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg2:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Assign>
                                    </FlowStep>
                                    <FlowStep x:Name="__ReferenceID29">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">178,244.5</av:Point>
                                          <av:Size x:Key="ShapeSize">244,51</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">300,295.5 300,360</av:PointCollection>
                                        </scg2:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <ForEach x:TypeArguments="wbo:TE" DisplayName="Проверим каждую ТЕ" sap:VirtualizedContainerService.HintSize="644,744" Values="[items]">
                                        <ActivityAction x:TypeArguments="wbo:TE">
                                          <ActivityAction.Argument>
                                            <DelegateInArgument x:TypeArguments="wbo:TE" Name="item" />
                                          </ActivityAction.Argument>
                                          <Flowchart sap:VirtualizedContainerService.HintSize="614,636">
                                            <Flowchart.Variables>
                                              <Variable x:TypeArguments="x:Decimal" Name="TeBlock" />
                                            </Flowchart.Variables>
                                            <sap:WorkflowViewStateService.ViewState>
                                              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                                <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
                                                <av:Size x:Key="ShapeSize">60,75</av:Size>
                                                <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,141.5</av:PointCollection>
                                              </scg2:Dictionary>
                                            </sap:WorkflowViewStateService.ViewState>
                                            <Flowchart.StartNode>
                                              <x:Reference>__ReferenceID27</x:Reference>
                                            </Flowchart.StartNode>
                                            <FlowStep x:Name="__ReferenceID27">
                                              <sap:WorkflowViewStateService.ViewState>
                                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                  <av:Point x:Key="ShapeLocation">147.5,141.5</av:Point>
                                                  <av:Size x:Key="ShapeSize">307,57</av:Size>
                                                  <av:PointCollection x:Key="ConnectorLocation">300,198.5 300,246.5</av:PointCollection>
                                                </scg2:Dictionary>
                                              </sap:WorkflowViewStateService.ViewState>
                                              <wab:ExecuteProcedureActivity DisplayName="Запуск метода" Exception="[exception]" sap:VirtualizedContainerService.HintSize="307,57" Result="[APIResult]" TimeOut="[Nothing]" Value="[&quot;CheckTE2Move&quot;]">
                                                <wab:ExecuteProcedureActivity.Parameters>
                                                  <InArgument x:TypeArguments="x:String" x:Key="teCode">[item.GetKey(Of String)]</InArgument>
                                                  <InArgument x:TypeArguments="x:Decimal" x:Key="raiseError">[1]</InArgument>
                                                  <OutArgument x:TypeArguments="x:Decimal" x:Key="result">[TeBlock]</OutArgument>
                                                  <InArgument x:TypeArguments="s:Nullable(x:Decimal)" x:Key="productID" />
                                                </wab:ExecuteProcedureActivity.Parameters>
                                                <sap:WorkflowViewStateService.ViewState>
                                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                  </scg2:Dictionary>
                                                </sap:WorkflowViewStateService.ViewState>
                                              </wab:ExecuteProcedureActivity>
                                              <FlowStep.Next>
                                                <FlowDecision x:Name="__ReferenceID24" Condition="[APIResult]" sap:VirtualizedContainerService.HintSize="70,87">
                                                  <sap:WorkflowViewStateService.ViewState>
                                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                      <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                      <av:Point x:Key="ShapeLocation">265,246.5</av:Point>
                                                      <av:Size x:Key="ShapeSize">70,87</av:Size>
                                                      <av:PointCollection x:Key="TrueConnector">265,290 130,290 130,389</av:PointCollection>
                                                      <av:PointCollection x:Key="FalseConnector">335,290 460,290 460,370</av:PointCollection>
                                                    </scg2:Dictionary>
                                                  </sap:WorkflowViewStateService.ViewState>
                                                  <FlowDecision.True>
                                                    <FlowStep x:Name="__ReferenceID25">
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <av:Point x:Key="ShapeLocation">30,389</av:Point>
                                                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                                                        </scg2:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                      <AddToCollection x:TypeArguments="wbo:TE" Collection="[itemsList]" DisplayName="Список ТЕ для перемещения" sap:VirtualizedContainerService.HintSize="200,22" Item="[item]" />
                                                    </FlowStep>
                                                  </FlowDecision.True>
                                                  <FlowDecision.False>
                                                    <FlowStep x:Name="__ReferenceID26">
                                                      <sap:WorkflowViewStateService.ViewState>
                                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                          <av:Point x:Key="ShapeLocation">339,370</av:Point>
                                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                                        </scg2:Dictionary>
                                                      </sap:WorkflowViewStateService.ViewState>
                                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                                        <Assign.To>
                                                          <OutArgument x:TypeArguments="x:String">[errorMessage]</OutArgument>
                                                        </Assign.To>
                                                        <Assign.Value>
                                                          <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{2}", errorMessage, BPH.GetInnerException(exception), System.Environment.NewLine)]</InArgument>
                                                        </Assign.Value>
                                                        <sap:WorkflowViewStateService.ViewState>
                                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                                          </scg2:Dictionary>
                                                        </sap:WorkflowViewStateService.ViewState>
                                                      </Assign>
                                                    </FlowStep>
                                                  </FlowDecision.False>
                                                </FlowDecision>
                                              </FlowStep.Next>
                                            </FlowStep>
                                            <x:Reference>__ReferenceID24</x:Reference>
                                            <x:Reference>__ReferenceID25</x:Reference>
                                            <x:Reference>__ReferenceID26</x:Reference>
                                          </Flowchart>
                                        </ActivityAction>
                                      </ForEach>
                                      <FlowStep.Next>
                                        <x:Reference>__ReferenceID28</x:Reference>
                                      </FlowStep.Next>
                                    </FlowStep>
                                    <FlowStep x:Name="__ReferenceID30">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">179,130</av:Point>
                                          <av:Size x:Key="ShapeSize">242,60</av:Size>
                                          <av:PointCollection x:Key="ConnectorLocation">300,190 300,244.5</av:PointCollection>
                                        </scg2:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="scg2:List(wbo:TE)">[itemsList]</OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="scg2:List(wbo:TE)">[new List(Of TE)]</InArgument>
                                        </Assign.Value>
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg2:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </Assign>
                                      <FlowStep.Next>
                                        <x:Reference>__ReferenceID29</x:Reference>
                                      </FlowStep.Next>
                                    </FlowStep>
                                  </Flowchart>
                                  <FlowStep.Next>
                                    <FlowDecision x:Name="__ReferenceID33" Condition="[DialogResult = False]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID31}" False="{x:Reference __ReferenceID32}">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                          <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          <av:Point x:Key="ShapeLocation">335,206.5</av:Point>
                                          <av:Size x:Key="ShapeSize">70,87</av:Size>
                                          <av:PointCollection x:Key="TrueConnector">335,250 72.5,250 72.5,1326.5 192.5,1326.5 192.5,1356.5</av:PointCollection>
                                          <av:PointCollection x:Key="FalseConnector">405,250 500,250 500,340 470,340</av:PointCollection>
                                        </scg2:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                    </FlowDecision>
                                  </FlowStep.Next>
                                </FlowStep>
                                <x:Reference>__ReferenceID33</x:Reference>
                                <x:Reference>__ReferenceID34</x:Reference>
                                <x:Reference>__ReferenceID35</x:Reference>
                                <x:Reference>__ReferenceID36</x:Reference>
                                <x:Reference>__ReferenceID31</x:Reference>
                                <x:Reference>__ReferenceID37</x:Reference>
                              </Flowchart>
                            </TryCatch.Try>
                            <TryCatch.Catches>
                              <Catch x:TypeArguments="s:Exception" sap:VirtualizedContainerService.HintSize="799,21">
                                <sap:WorkflowViewStateService.ViewState>
                                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                    <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                                    <x:Boolean x:Key="IsPinned">False</x:Boolean>
                                  </scg2:Dictionary>
                                </sap:WorkflowViewStateService.ViewState>
                                <ActivityAction x:TypeArguments="s:Exception">
                                  <ActivityAction.Argument>
                                    <DelegateInArgument x:TypeArguments="s:Exception" Name="ex" />
                                  </ActivityAction.Argument>
                                  <Sequence sap:VirtualizedContainerService.HintSize="264,308">
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg2:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                    <wag:RollbackTransactionActivity sap:VirtualizedContainerService.HintSize="242,22" />
                                    <wav:ShowExceptionMessageActivity Buttons="OK" DefaultResult="OK" DisplayName="Вывод ошбки(ок) пользователю" Error="[ex]" ErrorList="[Nothing]" ForceError="False" sap:VirtualizedContainerService.HintSize="242,22" Image="Warning" Message="ЗНТ для выбранных ТЕ не создано:" Title="Ошибка" />
                                    <Assign sap:VirtualizedContainerService.HintSize="242,60">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:Boolean">[back]</OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:Boolean">True</InArgument>
                                      </Assign.Value>
                                    </Assign>
                                  </Sequence>
                                </ActivityAction>
                              </Catch>
                            </TryCatch.Catches>
                          </TryCatch>
                          <FlowStep.Next>
                            <FlowDecision x:Name="__ReferenceID53" Condition="[back]" sap:VirtualizedContainerService.HintSize="70,87" True="{x:Reference __ReferenceID39}">
                              <sap:WorkflowViewStateService.ViewState>
                                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                  <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                  <av:Point x:Key="ShapeLocation">835,2546.5</av:Point>
                                  <av:Size x:Key="ShapeSize">70,87</av:Size>
                                  <av:PointCollection x:Key="TrueConnector">835,2590 80,2590 80,267.5 110,267.5</av:PointCollection>
                                  <av:PointCollection x:Key="FalseConnector">905,2590 1020,2590 1020,2619</av:PointCollection>
                                </scg2:Dictionary>
                              </sap:WorkflowViewStateService.ViewState>
                              <FlowDecision.False>
                                <FlowStep x:Name="__ReferenceID48">
                                  <sap:WorkflowViewStateService.ViewState>
                                    <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                      <av:Point x:Key="ShapeLocation">920,2619</av:Point>
                                      <av:Size x:Key="ShapeSize">200,22</av:Size>
                                      <av:PointCollection x:Key="ConnectorLocation">1020,2641 1020,2659</av:PointCollection>
                                    </scg2:Dictionary>
                                  </sap:WorkflowViewStateService.ViewState>
                                  <wab:RefreshEntityActivity DisplayName="Команда на обновление журналов" sap:VirtualizedContainerService.HintSize="200,22" IsEnabled="True">
                                    <wab:RefreshEntityActivity.EntityTypes>
                                      <wgpm:ValueDataField BackGroundColor="{x:Null}" BindingPath="{x:Null}" Caption="{x:Null}" DependentFields="{x:Null}" Description="{x:Null}" DisplayFormat="{x:Null}" EnableCreate="{x:Null}" EnableEdit="{x:Null}" EventName="{x:Null}" FieldName="{x:Null}" FieldType="{x:Null}" ImageName="{x:Null}" KeyLink="{x:Null}" LookupCode="{x:Null}" LookupFilterExt="{x:Null}" LookupVarFilterExt="{x:Null}" MaxLength="{x:Null}" SourceName="{x:Null}" Value="{x:Null}" AllowAddNewValue="False" CloseDialog="False" IsChangeLookupCode="False" IsEnabled="True" IsLabelFontWeightBold="False" IsMemoView="False" IsOnPropertyChange="False" IsRequired="False" LabelPosition="Left" LookupButtonEnabled="True" Name="TE" Order="0" SetFocus="False" Visible="True" />
                                      <wgpm:ValueDataField BackGroundColor="{x:Null}" BindingPath="{x:Null}" Caption="{x:Null}" DependentFields="{x:Null}" Description="{x:Null}" DisplayFormat="{x:Null}" EnableCreate="{x:Null}" EnableEdit="{x:Null}" EventName="{x:Null}" FieldName="{x:Null}" FieldType="{x:Null}" ImageName="{x:Null}" KeyLink="{x:Null}" LookupCode="{x:Null}" LookupFilterExt="{x:Null}" LookupVarFilterExt="{x:Null}" MaxLength="{x:Null}" SourceName="{x:Null}" Value="{x:Null}" AllowAddNewValue="False" CloseDialog="False" IsChangeLookupCode="False" IsEnabled="True" IsLabelFontWeightBold="False" IsMemoView="False" IsOnPropertyChange="False" IsRequired="False" LabelPosition="Left" LookupButtonEnabled="True" Name="TRANSPORTTASK" Order="0" SetFocus="False" Visible="True" />
                                      <wgpm:ValueDataField BackGroundColor="{x:Null}" BindingPath="{x:Null}" Caption="{x:Null}" DependentFields="{x:Null}" Description="{x:Null}" DisplayFormat="{x:Null}" EnableCreate="{x:Null}" EnableEdit="{x:Null}" EventName="{x:Null}" FieldName="{x:Null}" FieldType="{x:Null}" ImageName="{x:Null}" KeyLink="{x:Null}" LookupCode="{x:Null}" LookupFilterExt="{x:Null}" LookupVarFilterExt="{x:Null}" MaxLength="{x:Null}" SourceName="{x:Null}" Value="{x:Null}" AllowAddNewValue="False" CloseDialog="False" IsChangeLookupCode="False" IsEnabled="True" IsLabelFontWeightBold="False" IsMemoView="False" IsOnPropertyChange="False" IsRequired="False" LabelPosition="Left" LookupButtonEnabled="True" Name="PLACE" Order="0" SetFocus="False" Visible="True" />
                                    </wab:RefreshEntityActivity.EntityTypes>
                                    <sap:WorkflowViewStateService.ViewState>
                                      <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                      </scg2:Dictionary>
                                    </sap:WorkflowViewStateService.ViewState>
                                  </wab:RefreshEntityActivity>
                                  <FlowStep.Next>
                                    <FlowStep x:Name="__ReferenceID41">
                                      <sap:WorkflowViewStateService.ViewState>
                                        <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                          <av:Point x:Key="ShapeLocation">920,2659</av:Point>
                                          <av:Size x:Key="ShapeSize">200,22</av:Size>
                                        </scg2:Dictionary>
                                      </sap:WorkflowViewStateService.ViewState>
                                      <wav:ShowMessageBoxActivity Buttons="OK" DefaultResult="OK" DisplayName="Завершение процесса" sap:VirtualizedContainerService.HintSize="200,22" Image="Asterisk" Message="[resultMessage]" Result="OK" Title="Перемещение">
                                        <sap:WorkflowViewStateService.ViewState>
                                          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                                            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                                          </scg2:Dictionary>
                                        </sap:WorkflowViewStateService.ViewState>
                                      </wav:ShowMessageBoxActivity>
                                    </FlowStep>
                                  </FlowStep.Next>
                                </FlowStep>
                              </FlowDecision.False>
                            </FlowDecision>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowStep.Next>
                    </FlowStep>
                  </FlowStep.Next>
                </FlowStep>
              </FlowDecision.False>
            </FlowDecision>
            <x:Reference>__ReferenceID40</x:Reference>
            <x:Reference>__ReferenceID41</x:Reference>
            <x:Reference>__ReferenceID42</x:Reference>
            <x:Reference>__ReferenceID39</x:Reference>
            <x:Reference>__ReferenceID43</x:Reference>
            <x:Reference>__ReferenceID44</x:Reference>
            <x:Reference>__ReferenceID45</x:Reference>
            <x:Reference>__ReferenceID46</x:Reference>
            <x:Reference>__ReferenceID47</x:Reference>
            <x:Reference>__ReferenceID48</x:Reference>
            <x:Reference>__ReferenceID49</x:Reference>
            <x:Reference>__ReferenceID50</x:Reference>
            <x:Reference>__ReferenceID51</x:Reference>
            <x:Reference>__ReferenceID52</x:Reference>
            <x:Reference>__ReferenceID53</x:Reference>
            <x:Reference>__ReferenceID54</x:Reference>
            <x:Reference>__ReferenceID55</x:Reference>
            <x:Reference>__ReferenceID56</x:Reference>
            <x:Reference>__ReferenceID57</x:Reference>
            <x:Reference>__ReferenceID0</x:Reference>
            <x:Reference>__ReferenceID58</x:Reference>
            <x:Reference>__ReferenceID59</x:Reference>
            <x:Reference>__ReferenceID60</x:Reference>
            <FlowStep x:Name="__ReferenceID63">
              <sap:WorkflowViewStateService.ViewState>
                <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                  <av:Point x:Key="ShapeLocation">110,139</av:Point>
                  <av:Size x:Key="ShapeSize">200,22</av:Size>
                  <av:PointCollection x:Key="ConnectorLocation">210,161 210,239</av:PointCollection>
                </scg2:Dictionary>
              </sap:WorkflowViewStateService.ViewState>
              <wab:CheckBpContextActivity x:TypeArguments="wbo:TE" Context="[BpContext]" DisplayName="Проверка параметров контекста" sap:VirtualizedContainerService.HintSize="200,22" IsAssignableFrom="False" IsMultipleItems="True" Result="[Items]">
                <sap:WorkflowViewStateService.ViewState>
                  <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                    <x:Boolean x:Key="IsExpanded">True</x:Boolean>
                  </scg2:Dictionary>
                </sap:WorkflowViewStateService.ViewState>
              </wab:CheckBpContextActivity>
              <FlowStep.Next>
                <x:Reference>__ReferenceID39</x:Reference>
              </FlowStep.Next>
            </FlowStep>
            <x:Reference>__ReferenceID61</x:Reference>
            <x:Reference>__ReferenceID62</x:Reference>
          </Flowchart>
        </TryCatch.Try>
        <TryCatch.Catches>
          <Catch x:TypeArguments="s:Exception" sap:VirtualizedContainerService.HintSize="1138,21">
            <sap:WorkflowViewStateService.ViewState>
              <scg2:Dictionary x:TypeArguments="x:String, x:Object">
                <x:Boolean x:Key="IsExpanded">False</x:Boolean>
                <x:Boolean x:Key="IsPinned">False</x:Boolean>
              </scg2:Dictionary>
            </sap:WorkflowViewStateService.ViewState>
            <ActivityAction x:TypeArguments="s:Exception">
              <ActivityAction.Argument>
                <DelegateInArgument x:TypeArguments="s:Exception" Name="innerException" />
              </ActivityAction.Argument>
              <wav:ShowExceptionMessageActivity Buttons="OK" DefaultResult="OK" DisplayName="Отображение ошибки" Error="[innerException]" ErrorList="[Nothing]" ForceError="True" sap:VirtualizedContainerService.HintSize="200,22" Image="Warning" Message="Ошибка:" Title="Ошибка" />
            </ActivityAction>
          </Catch>
        </TryCatch.Catches>
      </TryCatch>
    </FlowStep>
  </Flowchart>
</Activity>